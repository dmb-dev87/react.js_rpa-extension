!function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={6:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([633,1,0]),n()}({121:function(e,t,n){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(122),o=n(88);function i(){}function s(e,t,n){if("function"==typeof t&&(n=t,t=null),!e||"object"!==(void 0===e?"undefined":a(e)))throw new Error("Expected first parameter to be a targetElement. Instead got: "+e);return{targetElement:e,eventProperties:t||{},configCallback:n||i}}function c(e,t,n,a,o,i){t.forEach((function(t){var s=r.createEvent(t,o,a);!function(e,t,n){t&&(t.length<2?n&&t(e):t(e,e.type))}(s,i,t===n),e.dispatchEvent(s)}))}var l=function(){this.lastDragSource=null,this.lastDataTransfer=null,this.pendingActionsQueue=[]};l.prototype._queue=function(e){this.pendingActionsQueue.push(e),1===this.pendingActionsQueue.length&&this._queueExecuteNext()},l.prototype._queueExecuteNext=function(){if(0!==this.pendingActionsQueue.length){var e=this,t=this.pendingActionsQueue[0],n=function(){e.pendingActionsQueue.shift(),e._queueExecuteNext()};0===t.length?(t.call(this),n()):t.call(this,n)}},l.prototype.dragStart=function(e,t,n){var a=s(e,t,n),r=["mousedown","dragstart","drag"],i=new o;return this._queue((function(){c(a.targetElement,r,"drag",i,a.eventProperties,a.configCallback),this.lastDragSource=e,this.lastDataTransfer=i})),this},l.prototype.dragEnter=function(e,t,n){var a=s(e,t,n),r=["mousemove","mouseover","dragenter"];return this._queue((function(){c(a.targetElement,r,"dragenter",this.lastDataTransfer,a.eventProperties,a.configCallback)})),this},l.prototype.dragOver=function(e,t,n){var a=s(e,t,n),r=["mousemove","mouseover","dragover"];return this._queue((function(){c(a.targetElement,r,"drag",this.lastDataTransfer,a.eventProperties,a.configCallback)})),this},l.prototype.dragLeave=function(e,t,n){var a=s(e,t,n),r=["mousemove","mouseover","dragleave"];return this._queue((function(){c(a.targetElement,r,"dragleave",this.lastDataTransfer,a.eventProperties,a.configCallback)})),this},l.prototype.drop=function(e,t,n){var a=s(e,t,n),r=["mousemove","mouseup","drop"],o=["dragend"];return this._queue((function(){c(a.targetElement,r,"drop",this.lastDataTransfer,a.eventProperties,a.configCallback),this.lastDragSource&&c(this.lastDragSource,o,"drop",this.lastDataTransfer,a.eventProperties,a.configCallback)})),this},l.prototype.then=function(e){return this._queue((function(){e.call(this)})),this},l.prototype.delay=function(e){return this._queue((function(t){window.setTimeout(t,e)})),this},e.exports=l},122:function(e,t,n){var a=n(88),r=["drag","dragstart","dragenter","dragover","dragend","drop","dragleave"];function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(e,t,n){var a;switch(t){case"MouseEvent":(a=document.createEvent("MouseEvent")).initEvent(e,!0,!0);break;default:(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,0)}return n&&o(a,n),a}function s(e,t,n){if(/Firefox/.test(window.navigator.userAgent))return i(e,t,n);try{return function(e,t,n){var a=window[t],r={view:window,bubbles:!0,cancelable:!0};o(r,n);var i=new a(e,r);return o(i,n),i}(e,t,n)}catch(a){return i(e,t,n)}}var c={createEvent:function(e,t,n){var o="CustomEvent";return e.match(/^mouse/)?o="MouseEvent":e.match(/^(drag|drop)/)&&(o="DragEvent"),r.indexOf(e)>-1&&(t.dataTransfer=n||new a),s(e,o,t)}};e.exports=c},131:function(e,t,n){var a=n(121);function r(e,t,n){return e[t].apply(e,n)}var o={dragStart:function(e,t,n){return r(new a,"dragStart",arguments)},dragEnter:function(e,t,n){return r(new a,"dragEnter",arguments)},dragOver:function(e,t,n){return r(new a,"dragOver",arguments)},dragLeave:function(e,t,n){return r(new a,"dragLeave",arguments)},drop:function(e,t,n){return r(new a,"drop",arguments)},delay:function(e,t,n){return r(new a,"delay",arguments)},triggerDragEvent:function(e,t){var n=function e(t){if(null==t)return"null";if(null==t.parentElement)return"/"+t.tagName;for(var n=t.parentElement.children,a=0,r=0,o=!1,i=0;i<n.length;i++)n[i].tagName!=t.tagName||o?n[i].tagName==t.tagName&&r++:(a++,r++),n[i]==t&&(o=!0);return r>1?e(t.parentElement)+"/"+t.tagName+"["+a+"]":e(t.parentElement)+"/"+t.tagName},a="                                                    function simulateDragDrop(sourceNode, destinationNode){      function createCustomEvent(type) {                               var event = new CustomEvent('CustomEvent');                  event.initCustomEvent(type, true, true, null);               event.dataTransfer = {                                           data: {                                                      },                                                           setData: function(type, val) {                                   this.data[type] = val;                                   },                                                           getData: function(type) {                                        return this.data[type];                                  }                                                        };                                                           return event;                                            }                                                            function dispatchEvent(node, type, event) {                      if (node.dispatchEvent) {                                        return node.dispatchEvent(event);                        }                                                            if (node.fireEvent) {                                            return node.fireEvent('on' + type, event);               }                                                        }                                                            var event = createCustomEvent('dragstart');                  dispatchEvent(sourceNode, 'dragstart', event);                                                                            var dropEvent = createCustomEvent('drop');                   dropEvent.dataTransfer = event.dataTransfer;                 dispatchEvent(destinationNode, 'drop', dropEvent);                                                                        var dragEndEvent = createCustomEvent('dragend');             dragEndEvent.dataTransfer = event.dataTransfer;              dispatchEvent(sourceNode, 'dragend', dragEndEvent);      }                                                            simulateDragDrop(document.evaluate('"+n(e)+"', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue, document.evaluate('"+n(t)+"', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue);  ",r=window.document,o=r.createElement("script");o.type="text/javascript",o.text=a,r.body.appendChild(o)},DataTransfer:n(88),DragDropAction:n(121),eventFactory:n(122)};e.exports=o},148:function(e,t,n){"use strict";n.r(t),n.d(t,"resizeWindow",(function(){return c})),n.d(t,"resizeViewport",(function(){return l})),n.d(t,"resizeViewportOfTab",(function(){return u})),n.d(t,"getWindowSize",(function(){return d})),n.d(t,"getFocusedWindowSize",(function(){return m}));var a=n(3),r=n.n(a),o=n(2),i=n(4),s=function(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=o||n<e-n-a;if(Object(i.a)("calcOffset",e,n,a,r,o),s)return n;if(!s){return a+n-r}};function c(e,t){var n=screen.availWidth,a=screen.availHeight,o=screen.availLeft,i=screen.availTop;return r.a.windows.get(e).then((function(c){var l=c.left,u=c.top,d=c.width,m=c.height;return r.a.windows.update(e,t).then((function(c){var p=s(n,o,l,d,c.width),f=s(a,i,u,m,c.height,!0);r.a.windows.update(e,{left:p,top:f});var g={width:c.width,height:c.height};return{actual:g,desired:t,diff:["width","height"].filter((function(e){return g[e]!==t[e]}))}}))}))}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=2;return Object(i.a)("resizeViewport, ROUND",n),d(e).then((function(r){Object(i.a)("currentSize!!!!"),p(r);var s=r.window.width-r.viewport.width,u=r.window.height-r.viewport.height,m={width:s+t.width,height:u+t.height};return Object(i.a)("size set to",m),c(e,m).then((function(){return d(e)})).then((function(r){Object(i.a)("newSize!!!!"),p(r);var s={actual:r.viewport,desired:t,diff:["width","height"].filter((function(e){return r.viewport[e]!==t[e]}))};return 0===s.diff.length||n>=a?s:Object(o.delay)((function(){}),0).then((function(){return l(e,t,n+1)}))}))}))}function u(e,t){return r.a.tabs.get(e).then((function(e){return l(e.windowId,t)}))}function d(e){return r.a.windows.get(e,{populate:!0}).then((function(e){var t=e.tabs.find((function(e){return e.active}));return{window:{width:e.width,height:e.height,left:e.left,top:e.top},viewport:{width:t.width,height:t.height}}}))}function m(){return r.a.windows.getLastFocused().then((function(e){return d(e.id)}))}function p(e){Object(i.a)(e.window,e.viewport),Object(i.a)("dx = ",e.window.width-e.viewport.width),Object(i.a)("dy = ",e.window.height-e.viewport.height)}},17:function(e,t,n){"use strict";var a=n(75),r=function(){throw new Error("You are not a top window, not allowed to initialize/use csIpc")},o=window.top===window?Object(a.b)():{ask:r,send:r,onAsk:r,destroy:r};t.a=o},217:function(e,t){},22:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return m}));var a=n(2);var r=function(e,t){if(!e)throw new Error("setStyle: dom does not exist");for(var n=0,a=Object.keys(t),r=a.length;n<r;n++)e.style[a[n]]=t[a[n]];return e},o=function(e){return-1!==(e+"").indexOf("px")?e:(e||0)+"px"},i=function(e){var t=e.onDragStart,n=e.onDragEnd,a=e.onDrag,r=e.$el,o=e.doc,i=void 0===o?document:o,s=!1,c={x:0,y:0},l=function(e){s=!0,c={x:e.screenX,y:e.screenY},t(e)},u=function(e){if(s){s=!1;var t=e.screenX-c.x,a=e.screenY-c.y;n(e,{dx:t,dy:a})}},d=function(e){if(s){var t=e.screenX-c.x,n=e.screenY-c.y;a(e,{dx:t,dy:n}),e.preventDefault(),e.stopPropagation()}},m=function(e){e.preventDefault(),e.stopPropagation()};return i.addEventListener("click",m,!0),i.addEventListener("mousemove",d,!0),i.addEventListener("mouseup",u,!0),r.addEventListener("mousedown",l,!0),function(){i.removeEventListener("click",m,!0),i.removeEventListener("mousemove",d,!0),i.removeEventListener("mouseup",u,!0),r.removeEventListener("mousedown",l,!0)}},s=function(e){var t=e.onChange,n=e.doc,a=void 0===n?document:n,r=null,o=null,i=function(e){"true"===e.target.contentEditable&&(r=e.target,o=r.innerHTML)},s=function(e){e.target!==r||r.innerHTML!==o&&t(e),r=null,o=null};return a.addEventListener("focus",i,!0),a.addEventListener("blur",s,!0),function(){a.removeEventListener("focus",i,!0),a.removeEventListener("blur",s,!0)}},c=function(e){return e.documentElement.scrollLeft},l=function(e){return e.documentElement.scrollTop},u=function(e){var t=e.innerText&&e.innerText.trim(),n=e.textContent,a=n.toUpperCase().indexOf(t.toUpperCase());return n.substr(a,t.length)},d=function e(t){if(t===window.document)return!0;if(!t)return!0;var n=window.getComputedStyle(t);return"none"!==n.display&&"0"!==n.opacity&&"hidden"!==n.visibility&&e(t.parentNode)},m=function e(t){if(1!==t.nodeType)return"";if("BODY"===t.tagName)return"body";if(t.id)return"#"+t.id;var n=t.className.split(/\s+/g).filter((function(e){return e&&e.length})),r=Array.from(t.parentNode.childNodes).filter((function(e){return 1===e.nodeType})),o=r.filter((function(e){return e.tagName===t.tagName})),i=r.filter((function(e){var t=e.className.split(/\s+/g);return a.and.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.map((function(e){return-1!==t.indexOf(e)}))))})),s="";s=1===o.length?"":n.length&&1===i.length?"."+n.join("."):":nth-child("+(1+r.findIndex((function(e){return e===t})))+")";var c=t.tagName.toLowerCase()+s;return e(t.parentNode)+" > "+c}},30:function(e,t,n){"use strict";n(4);var a=n(62),r=("function"==typeof Symbol&&Symbol.iterator,function(){var e=Array.from(arguments),t=e.length;if(t<=0)return{};if(1===t)return e[0];var n=e[0],a=e.slice(1);return a.reduce((function(e,t){for(var n=0,a=Object.keys(t),r=a.length;n<r;n++)e[a[n]]=t[a[n]];return e}),n)}),o=(Array.isArray,function(e){return e}),i=function(e){return(e||[]).reduce((function(e,t){return e&&t}),!0)},s=function(e){return-1!==(e+"").indexOf("px")?e:(e||0)+"px"},c=function(e,t){if(!e)throw new Error("getStyle: dom does not exist");return getComputedStyle(e)[t]},l=function(e,t){if(!e)throw new Error("setStyle: dom does not exist");for(var n=0,a=Object.keys(t),r=a.length;n<r;n++)e.style[a[n]]=t[a[n]];return e},u=function(e,t){var n="inline"===c(e,"display");return t.reduce((function(t,a){var r=n&&-1!==["width","height"].indexOf(a)?e.getClientRects()[0][a]:c(e,a);return t+parseInt(r||"0",10)}),0)},d=function(e,t){if(!e)return{left:0,top:0};var n=e.getBoundingClientRect(),a=t?o:s;return{left:a(n.left+window.scrollX),top:a(n.top+window.scrollY)}},m=function e(t,n){return!!n&&(t===n||e(t,n.parentNode))},p=function e(t){if(1!==t.nodeType)return"";if("BODY"===t.tagName)return"body";if(t.id)return"#"+t.id;var n=(t.getAttribute("class")||"").split(/\s+/g).filter((function(e){return e&&e.length})),a=Array.from(t.parentNode.childNodes).filter((function(e){return 1===e.nodeType})),r=a.filter((function(e){return e.tagName===t.tagName})),o=a.filter((function(e){var t=(e.getAttribute("class")||"").split(/\s+/g);return i(n.map((function(e){return-1!==t.indexOf(e)})))})),s="";s=1===r.length?"":n.length&&1===o.length?"."+n.join("."):":nth-child("+(1+a.findIndex((function(e){return e===t})))+")";var c=t.tagName.toLowerCase()+s;return e(t.parentNode)+" > "+c},f=function(e,t,n){var a=function(e){if(!e)return null;if(3===e.nodeType)return"@text";var t=function(e){return Array.from(e.parentNode.childNodes).filter((function(t){return t.nodeType===e.nodeType&&t.tagName===e.tagName})).reduce((function(t,n,a){return null!==t?t:n===e?a+1:t}),null)}(e),n=Array.from(e.parentNode.childNodes).filter((function(t){return t.nodeType===e.nodeType&&t.tagName===e.tagName})).length,a=e.tagName.toLowerCase();return n>1?a+"["+t+"]":a},r=function e(t,n,r){return t?n?n.parentNode?"BODY"===n.tagName?["html","body"].concat(r):n.id?['*[@id="'+n.id+'"]'].concat(r):e(t,n.parentNode,[a(n)].concat(r)):["html"].concat(r):3===t.nodeType?e(t.parentNode):e(t,t,[]):null}(e,t,n);return("html"===r[0]?"/":"//")+r.join("/")},g=function(e){var t=e.innerText&&e.innerText.trim(),n=e.textContent,a=n.toUpperCase().indexOf(t.toUpperCase());return n.substr(a,t.length)},h=function(e,t){var n=e.getAttribute("id"),r=e.getAttribute("name"),o="a"===e.tagName.toLowerCase(),i=g(e),s=(Array.from(e.classList),[]);if(o&&i&&i.length){var c=[].slice.call(document.getElementsByTagName("a")).filter((function(e){return g(e)===i})).findIndex((function(t){return t===e}));-1!==c&&s.push(0===c?"link="+i:"link="+i+"@POS="+(c+1))}n&&n.length&&s.push("id="+n),r&&r.length&&s.push("name="+r),s.push(f(e)),s.push("css="+p(e));var l=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t===Object(a.a)(e[n]))return e[n];return null}(s,e);return t?{target:l,targetOptions:s}:l};t.a={offset:d,setStyle:l,selector:p,xpath:f,atXPath:function(e,t){var n=function(e){return e&&e.toLowerCase()},a=/^([a-zA-Z0-9]+)(\[(\d+)\])?$/;return e.reduce((function(e,t){if(!e)return e;if(!e.childNodes||!e.childNodes.length)return null;var r=t.match(a),o=r[1],i=r[3]?parseInt(r[3],10):1;return Array.from(e.childNodes).filter((function(e){return 1===e.nodeType&&n(e.tagName)===n(o)}))[i-1]}),t)},domText:g,getLocator:h,getFrameLocator:function(e,t){if(function(e){var t=1*new Date+""+Math.random();try{return e[t]="asd","asd"===e[t]}catch(e){return!1}}(e)){var n=e.frameElement,a=h(n);if(/^id=/.test(a)||/^name=/.test(a))return a}for(var r=0,o=t.frames.length;r<o;r++)if(t.frames[r]===e)return"index="+r;throw new Error("Frame locator not found")},maskFactory:function(){var e=[],t="__mask__"+1*new Date+Math.round(1e3*Math.random())+"__",n=1,a={position:"absolute",zIndex:"999",display:"none",boxSizing:"border-box",backgroundColor:"red",opacity:.5,pointerEvents:"none"};return{gen:function(i,u){var m=document.createElement("div");return i=u?r({},a,i||{},function(e,t){var n=d(e,t),a="inline"===c(e,"display"),i=a?e.getClientRects()[0].width:c(e,"width"),l=a?e.getClientRects()[0].height:c(e,"height"),u=t?o:s;return r({width:u(i),height:u(l)},n)}(u)):r({},a,i||{}),l(m,i),m.id=t+n++,e.push(m),m},clear:function(){for(var t=0,n=e.length;t<n;t++){var a=e[t];a&&a.parentNode&&a.parentNode.removeChild(a)}}}},showMaskOver:function(e,t){var n=d(t),a=u(t,["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]),o=u(t,["height","paddingTop","paddingBottom","borderTopWidth"," borderBottomWidth"]);l(e,r(n,{width:s(a),height:s(o),display:"block"}))},inDom:m,isVisible:function e(t){if(t===window.document)return!0;if(!t)return!0;var n=window.getComputedStyle(t);return"none"!==n.display&&"0"!==n.opacity&&"hidden"!==n.visibility&&e(t.parentNode)},parentWithTag:function(e,t){for(var n=e.toLowerCase(),a=t;a;){if(a.tagName.toLowerCase()===n)return a;a=a.parentNode}return null},parentWithClass:function(e,t){for(var n=t;n;){if(void 0!==n.classList&&n.classList.contains(e))return n;n=n.parentNode}return null}}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(2),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={}}return r(e,[{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Object(a.until)("ipc by tab id",(function(){var n=t.cache[e],a=n&&1===n.status,o=n&&n.ipc;return{pass:a&&!!o&&(r===1/0||r>n.timestamp),result:o}}),100,n)}},{key:"set",value:function(e,t,n){this.cache[e]={ipc:t,cuid:n,status:1,timestamp:(new Date).getTime()}}},{key:"setStatus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.cache[e];return!!a&&(a.status=t,n&&(a.timestamp=(new Date).getTime()),!0)}},{key:"enable",value:function(e){return this.setStatus(e,1,!0)}},{key:"disable",value:function(e){return this.setStatus(e,0)}},{key:"getCuid",value:function(e){var t=this.cache[e];return t?t.cuid:null}},{key:"del",value:function(e){delete this.cache[e]}}]),e}(),i=void 0;function s(){return i||(i=new o)}},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r="SELENIUM_IDE_CS_MSG",o=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;return new Promise((function(i,s){if(!e||!e.postMessage)throw new Error("csPostMessage: targetWin is not a window",e);if(!t||!t.addEventListener||!t.removeEventListener)throw new Error("csPostMessage: myWin is not a window",t);var c=Math.random();t.addEventListener("message",(function e(n){if(n.data&&n.data.type===r&&!n.data.isRequest&&n.data.secret===c){t.removeEventListener("message",e);var a=n.data,o=a.payload,l=a.error;if(l)return s(new Error(l));if(void 0!==o)return i(o);s(new Error("csPostMessage: No payload nor error found"))}})),e.postMessage({type:"SELENIUM_IDE_CS_MSG",secret:c,payload:n,isRequest:!0},a),setTimeout((function(){s(new Error("csPostMessage: timeout "+o+" ms"))}),o)}))},i=function(e,t){if(!e||!e.addEventListener||!e.removeEventListener)throw new Error("csOnMessage: not a window",e);var n=function(e){if(e&&e.data&&e.data.type===r&&e.data.isRequest&&e.data.secret){var n={type:r,secret:e.data.secret};new Promise((function(n,a){var r=void 0;try{r=t(e.data.payload,{source:e.source})}catch(e){a(e)}void 0!==r&&n(r)})).then((function(t){e.source.postMessage(a({},n,{payload:t}),"*")}),(function(t){e.source.postMessage(a({},n,{error:t.message}),"*")}))}};return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}}},4:function(e,t,n){"use strict";var a,r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.a=(a=!!!1,r=["log","info","warn","error"].reduce((function(e,t){return e[t]=function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a&&(e=console)[t].apply(e,[(new Date).toISOString()," - "].concat(r))},e}),{}),o(r.log,r,{enable:function(){a=!0},disable:function(){a=!1}}))},45:function(e,t,n){var a,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},a="moz-extension:"===window.location.protocol?function(){var e=t.createElementNS("http://www.w3.org/1999/xhtml","iframe");e.id="downloadFrame",e.style.visibility="hidden",e.style.position="absolute",e.style.left="-999px",t.body.appendChild(e);var n=e.contentDocument.createElement("a");return setTimeout((function(){e.contentDocument.body.appendChild(n)})),n}():t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in a,o=/constructor/i.test(e.HTMLElement)||e.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(t,u,d){d||(t=l(t));var m,p=this,f="application/octet-stream"===t.type,g=function(){!function(e,t,n){for(var a=(t=[].concat(t)).length;a--;){var r=e["on"+t[a]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){s(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return m=n().createObjectURL(t),void setTimeout((function(){var e,t;a.href=m,a.download=u,e=a,t=new MouseEvent("click"),e.dispatchEvent(t),g(),c(m),p.readyState=p.DONE}));!function(){if((i||f&&o)&&e.FileReader){var a=new FileReader;return a.onloadend=function(){var t=i?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,g()},a.readAsDataURL(t),void(p.readyState=p.INIT)}(m||(m=n().createObjectURL(t)),f)?e.location.href=m:e.open(m,"_blank")||(e.location.href=m);p.readyState=p.DONE,g(),c(m)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,n){return new u(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */e.exports?e.exports.saveAs=r:null!==n(461)&&null!==n(462)&&(void 0===(a=function(){return r}.call(t,n,t,e))||(e.exports=a))},457:function(e,t,n){var a={"./af":251,"./af.js":251,"./ar":252,"./ar-dz":253,"./ar-dz.js":253,"./ar-kw":254,"./ar-kw.js":254,"./ar-ly":255,"./ar-ly.js":255,"./ar-ma":256,"./ar-ma.js":256,"./ar-sa":257,"./ar-sa.js":257,"./ar-tn":258,"./ar-tn.js":258,"./ar.js":252,"./az":259,"./az.js":259,"./be":260,"./be.js":260,"./bg":261,"./bg.js":261,"./bm":262,"./bm.js":262,"./bn":263,"./bn.js":263,"./bo":264,"./bo.js":264,"./br":265,"./br.js":265,"./bs":266,"./bs.js":266,"./ca":267,"./ca.js":267,"./cs":268,"./cs.js":268,"./cv":269,"./cv.js":269,"./cy":270,"./cy.js":270,"./da":271,"./da.js":271,"./de":272,"./de-at":273,"./de-at.js":273,"./de-ch":274,"./de-ch.js":274,"./de.js":272,"./dv":275,"./dv.js":275,"./el":276,"./el.js":276,"./en-au":277,"./en-au.js":277,"./en-ca":278,"./en-ca.js":278,"./en-gb":279,"./en-gb.js":279,"./en-ie":280,"./en-ie.js":280,"./en-nz":281,"./en-nz.js":281,"./eo":282,"./eo.js":282,"./es":283,"./es-do":284,"./es-do.js":284,"./es-us":285,"./es-us.js":285,"./es.js":283,"./et":286,"./et.js":286,"./eu":287,"./eu.js":287,"./fa":288,"./fa.js":288,"./fi":289,"./fi.js":289,"./fo":290,"./fo.js":290,"./fr":291,"./fr-ca":292,"./fr-ca.js":292,"./fr-ch":293,"./fr-ch.js":293,"./fr.js":291,"./fy":294,"./fy.js":294,"./gd":295,"./gd.js":295,"./gl":296,"./gl.js":296,"./gom-latn":297,"./gom-latn.js":297,"./gu":298,"./gu.js":298,"./he":299,"./he.js":299,"./hi":300,"./hi.js":300,"./hr":301,"./hr.js":301,"./hu":302,"./hu.js":302,"./hy-am":303,"./hy-am.js":303,"./id":304,"./id.js":304,"./is":305,"./is.js":305,"./it":306,"./it.js":306,"./ja":307,"./ja.js":307,"./jv":308,"./jv.js":308,"./ka":309,"./ka.js":309,"./kk":310,"./kk.js":310,"./km":311,"./km.js":311,"./kn":312,"./kn.js":312,"./ko":313,"./ko.js":313,"./ky":314,"./ky.js":314,"./lb":315,"./lb.js":315,"./lo":316,"./lo.js":316,"./lt":317,"./lt.js":317,"./lv":318,"./lv.js":318,"./me":319,"./me.js":319,"./mi":320,"./mi.js":320,"./mk":321,"./mk.js":321,"./ml":322,"./ml.js":322,"./mr":323,"./mr.js":323,"./ms":324,"./ms-my":325,"./ms-my.js":325,"./ms.js":324,"./mt":326,"./mt.js":326,"./my":327,"./my.js":327,"./nb":328,"./nb.js":328,"./ne":329,"./ne.js":329,"./nl":330,"./nl-be":331,"./nl-be.js":331,"./nl.js":330,"./nn":332,"./nn.js":332,"./pa-in":333,"./pa-in.js":333,"./pl":334,"./pl.js":334,"./pt":335,"./pt-br":336,"./pt-br.js":336,"./pt.js":335,"./ro":337,"./ro.js":337,"./ru":338,"./ru.js":338,"./sd":339,"./sd.js":339,"./se":340,"./se.js":340,"./si":341,"./si.js":341,"./sk":342,"./sk.js":342,"./sl":343,"./sl.js":343,"./sq":344,"./sq.js":344,"./sr":345,"./sr-cyrl":346,"./sr-cyrl.js":346,"./sr.js":345,"./ss":347,"./ss.js":347,"./sv":348,"./sv.js":348,"./sw":349,"./sw.js":349,"./ta":350,"./ta.js":350,"./te":351,"./te.js":351,"./tet":352,"./tet.js":352,"./th":353,"./th.js":353,"./tl-ph":354,"./tl-ph.js":354,"./tlh":355,"./tlh.js":355,"./tr":356,"./tr.js":356,"./tzl":357,"./tzl.js":357,"./tzm":358,"./tzm-latn":359,"./tzm-latn.js":359,"./tzm.js":358,"./uk":360,"./uk.js":360,"./ur":361,"./ur.js":361,"./uz":362,"./uz-latn":363,"./uz-latn.js":363,"./uz.js":362,"./vi":364,"./vi.js":364,"./x-pseudo":365,"./x-pseudo.js":365,"./yo":366,"./yo.js":366,"./zh-cn":367,"./zh-cn.js":367,"./zh-hk":368,"./zh-hk.js":368,"./zh-tw":369,"./zh-tw.js":369};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=457},47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(592),r=n(51),o=n(593),i=n(148);!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Middle=2]="Middle"}(t.MouseButton||(t.MouseButton={})),function(e){e[e.Move=0]="Move",e[e.Down=1]="Down",e[e.Up=2]="Up",e[e.Click=3]="Click",e[e.DoubleClick=4]="DoubleClick"}(t.MouseEventType||(t.MouseEventType={})),t.getNativeXYAPI=r.singletonGetter(()=>{const e=new o.KantuXYHost;let t=e.connectAsync().catch(e=>{throw console.warn("pReady - error",e),e});const n=a.MethodTypeInvocationNames.reduce((a,o)=>(a[r.snakeToCamel(o)]=a=>t.then(()=>e.invokeAsync(o,a).catch(e=>{throw n.reconnect(),e})),a),{reconnect:()=>(e.disconnect(),t=e.connectAsync(),t.then(()=>n)),sendViewportMouseEvent:(e,t)=>{const a=n,r=null!==s;return t.needCalibration().then(e=>e||!r).then(n=>{const{markPage:r,unmarkPage:o,findViewportRectInWindow:c}=n?{markPage:t.markPage,unmarkPage:t.unmarkPage,findViewportRectInWindow:e=>a.findRectangle(e)}:{markPage:()=>Promise.resolve(),unmarkPage:()=>Promise.resolve(),findViewportRectInWindow:e=>Promise.resolve(s)};return r().then(()=>Promise.all([c({color:"#00ff00"}),i.getFocusedWindowSize()])).then(t=>{const n=t[0],r=t[1];s=n;const i=r.window.left+Math.min(n.x,r.window.width-r.viewport.width),c=r.window.top+Math.min(n.y,r.window.height-r.viewport.height);return o().then(()=>a.sendMouseEvent({type:e.type,button:e.button,x:e.x+i,y:e.y+c}))})}).catch(e=>(console.error(e),!1))}});let s=null;return n})},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(119),r=n(47),o=n(51);class i extends a.XModule{getName(){return a.XModuleTypes.XUserIO}getAPI(){return r.getNativeXYAPI()}initConfig(){return this.getConfig()}sanityCheck(){return Promise.all([this.getConfig(),this.getAPI().reconnect().catch(e=>{throw new Error("Real User Simulation XModule is not installed yet")})]).then(()=>!0)}checkUpdate(){return Promise.reject(new Error("checkUpdate is not implemented yet"))}checkUpdateLink(e,t){return`https://a9t9.com/x/idehelp?help=xclick_updatecheck&xversion=${e}&kantuversion=${t}`}downloadLink(){return"https://a9t9.com/x/idehelp?help=xclick_download"}infoLink(){return"https://a9t9.com/x/idehelp?help=xclick"}}t.XUserIO=i,t.getXUserIO=o.singletonGetter(()=>new i)},589:function(e,t,n){var a=n(590);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(86)(a,r);a.locals&&(e.exports=a.locals)},590:function(e,t,n){(e.exports=n(85)(void 0)).push([e.i,'.header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;overflow:hidden;padding:0 20px;width:100%;height:44px;border-bottom:2px solid #ccc;background-color:#f9f9f9}.header .status{float:right;line-height:42px;font-size:14px}.header .status h1{margin:0;font-size:20px;line-height:44px}.header .select-case{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:44px;font-size:13px}.header .select-case .test-case-name{margin-right:15px;line-height:35px;max-width:120px;overflow:hidden;display:inline-block;white-space:nowrap;text-overflow:ellipsis}.header .select-case .test-case-name.unsaved{color:orange}.header .select-case .test-case-name.unsaved:after{content:"*";margin-left:3px}.header .actions{margin-top:6px}.header .actions .ant-btn-group>.ant-btn-group{float:none}.header .actions .play-actions{margin:0 10px}.ant-dropdown-menu{max-height:300px;overflow-y:auto}.ant-dropdown-menu .editing{color:blue!important}.settings-modal .ant-checkbox-wrapper+.ant-checkbox-wrapper{margin-left:0}.settings-modal .tip{margin-left:15px;color:#aaa}.settings-modal .backup-pane{padding:0 20px}.settings-modal .backup-pane h4{font-size:16px;margin-bottom:10px}.settings-modal .backup-pane .row{margin-bottom:10px}.settings-modal .backup-pane p,.settings-modal .backup-pane ul li{margin-bottom:5px}.settings-modal .security-pane{padding:0 20px 20px}.settings-modal .security-pane h4{font-size:16px;margin-bottom:10px}.settings-modal .security-pane p{margin-bottom:10px}.settings-modal .security-pane label{margin-right:10px}.settings-modal .security-pane .ant-radio-wrapper{display:block;height:30px;line-height:30px}.settings-modal .xmodules-pane{padding:0 0 20px}.settings-modal .xmodules-pane .xmodule-item{margin-bottom:25px;padding:15px;border:2px solid #333;font-size:14px;-webkit-box-shadow:rgba(0,0,0,.5) 0 2px 5px 0;box-shadow:0 2px 5px 0 rgba(0,0,0,.5)}.settings-modal .xmodules-pane .xmodule-item label{margin-right:15px;width:100px;font-size:14px}.settings-modal .xmodules-pane .xmodule-item .xmodule-title{margin-bottom:10px;font-size:14px}.settings-modal .xmodules-pane .xmodule-item .xmodule-title>*{margin-right:20px}.settings-modal .xmodules-pane .xmodule-item .xmodule-title>:last-child{margin-right:0}.settings-modal .xmodules-pane .xmodule-item .xmodule-status{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:20px}.settings-modal .xmodules-pane .xmodule-item .xmodule-status .status-box>*{margin-right:15px}.settings-modal .xmodules-pane .xmodule-item .xmodule-status .status-box>:last-child{margin-right:0}.settings-modal .xmodules-pane .xmodule-item .xmodule-settings h3{margin-bottom:10px;font-size:14px;font-weight:700}.settings-modal .xmodules-pane .xmodule-item .xmodule-settings .xmodule-settings-item .settings-detail{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:10px}.settings-modal .xmodules-pane .xmodule-item .xmodule-settings .xmodule-settings-item .settings-detail .settings-detail-content{-webkit-box-flex:1;-ms-flex:1;flex:1}.settings-modal .xmodules-pane .xmodule-item .xmodule-settings .check-result{margin-top:5px;color:red;font-size:13px}',""])},592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodTypeFriendlyNames=["GetVersion","SendMouseEvent","SendText","GetActiveBrowserOuterRect","FindRectangle","GetScreenBackingScaleFactor"],t.MethodTypeInvocationNames=["get_version","send_mouse_event","send_text","get_active_browser_outer_rect","find_rectangle","get_screen_backing_scale_factor"]},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(138);class r extends a.NativeMessagingHost{constructor(){super(r.HOST_NAME)}}t.KantuXYHost=r,r.HOST_NAME="com.a9t9.kantu.xy"},594:function(e,t,n){var a=n(595);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(86)(a,r);a.locals&&(e.exports=a.locals)},595:function(e,t,n){(e.exports=n(85)(void 0)).push([e.i,'.sidebar{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;min-width:260px;height:100%;border-right:2px solid #ccc}.sidebar .sidebar-inner{position:absolute;top:0;bottom:80px;right:0;left:0;overflow-y:auto}.sidebar .no-data{margin-top:20px;text-align:center;font-size:14px;color:#aaa}.sidebar .sidebar-test-cases{font-size:14px;line-height:18px}.sidebar .sidebar-test-cases li{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;padding:5px 10px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.sidebar .sidebar-test-cases li.success{background:#cfefdf}.sidebar .sidebar-test-cases li.error{background:#fcdbd9}.sidebar .sidebar-test-cases li.selected{background:#fdffd1}.sidebar .sidebar-test-cases li.selected.error,.sidebar .sidebar-test-cases li.selected.success{padding:1px 10px 1px 6px}.sidebar .sidebar-test-cases li.selected.error{border:4px solid #fcdbd9}.sidebar .sidebar-test-cases li.selected.success{border:4px solid #cfefdf}.sidebar .sidebar-test-cases li.disabled{-webkit-filter:grayscale(60%);filter:grayscale(60%);cursor:not-allowed}.sidebar .sidebar-test-cases li .test-case-name{-webkit-box-flex:1;-ms-flex:1;flex:1}.sidebar .sidebar-test-cases li .more-button{display:none}.sidebar .sidebar-test-cases li:hover .more-button{display:block}.sidebar .test-case-actions,.sidebar .test-suite-actions{padding:0 10px 10px}.sidebar .test-case-actions button,.sidebar .test-suite-actions button{margin-right:10px}.sidebar .test-case-actions{display:-webkit-box;display:-ms-flexbox;display:flex}.sidebar .sidebar-test-suites .test-suite-item{padding:0 0 10px;margin-bottom:5px}.sidebar .sidebar-test-suites .test-suite-item.playing{background:#fdffd1}.sidebar .sidebar-test-suites .test-suite-item.fold{margin-bottom:0;padding-bottom:0}.sidebar .sidebar-test-suites .test-suite-item.fold .test-suite-cases,.sidebar .sidebar-test-suites .test-suite-item.fold .test-suite-more-actions{display:none}.sidebar .sidebar-test-suites .test-suite-item .test-suite-row{padding:5px 10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.sidebar .sidebar-test-suites .test-suite-item .test-suite-row .test-suite-title{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:10px}.sidebar .sidebar-test-suites .test-suite-item .test-suite-row .more-button{display:none}.sidebar .sidebar-test-suites .test-suite-item .test-suite-row:hover .more-button{display:block}.sidebar .sidebar-test-suites .test-suite-item .test-suite-cases{padding:3px 5px}.sidebar .sidebar-test-suites .test-suite-item .test-suite-cases li{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px 5px 3px 20px;margin-bottom:5px}.sidebar .sidebar-test-suites .test-suite-item .test-suite-cases li.done-tc{background:#cfefdf}.sidebar .sidebar-test-suites .test-suite-item .test-suite-cases li.error-tc{background:#fcdbd9}.sidebar .sidebar-test-suites .test-suite-item .test-suite-cases li.current-tc{background:#d5d6f9}.sidebar .sidebar-test-suites .test-suite-item .test-suite-more-actions{padding-left:27px}.sidebar .sidebar-storage-mode{position:absolute;bottom:0;left:0;right:0;height:80px;padding:0 10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.sidebar .sidebar-storage-mode .storage-mode-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:5px;font-size:12px}.sidebar .sidebar-storage-mode .storage-mode-header h3{font-size:14px}.sidebar .ant-tabs{min-height:100%}.sidebar .ant-tabs-bar{border-bottom:2px solid #ccc}.sidebar .ant-tabs-nav-container-scrolling{padding-left:0;padding-right:0}.sidebar .ant-tabs-tab-next.ant-tabs-tab-arrow-show,.sidebar .ant-tabs-tab-prev.ant-tabs-tab-arrow-show{display:none}.sidebar .ant-tabs-nav{height:44px}.sidebar .ant-tabs-nav .ant-tabs-tab{margin-right:0;line-height:27px}.sidebar .ant-tabs-nav-scroll{text-align:center}.sidebar .resize-handler{position:absolute;right:-2px;top:0;bottom:0;width:2px;background:#ccc;cursor:col-resize}.sidebar .resize-handler.focused,.sidebar .resize-handler:hover{right:-4px;width:6px;background:#aaa}.with-sidebar .sidebar{display:block}.context-menu{z-index:10}.context-menu .ant-menu{border:"1px solid #ccc";border-radius:4px;-webkit-box-shadow:0 1px 6px rgba(0,0,0,.2);box-shadow:0 1px 6px rgba(0,0,0,.2)}.context-menu .ant-menu .ant-menu-item{height:36px;line-height:36px}.context-menu .ant-menu .ant-menu-item:hover{background:#ecf6fd}.xfile-not-installed-modal.left-bottom{position:absolute;top:auto!important;bottom:100px;left:100px}.xfile-not-installed-modal p{margin-bottom:20px;font-size:16px;font-weight:700}',""])},597:function(e,t,n){var a=n(598);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(86)(a,r);a.locals&&(e.exports=a.locals)},598:function(e,t,n){(e.exports=n(85)(void 0)).push([e.i,'.dashboard{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1;margin:15px 15px 0}.dashboard,.dashboard .flex-row{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}.dashboard .flex-row{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row}.dashboard .form-group{margin-bottom:15px}.dashboard .toolbox{display:-webkit-box;display:-ms-flexbox;display:flex}.dashboard .toolbox .record-ops{-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:right}.dashboard .toolbox .play-ops{margin-left:15px}.dashboard .ant-table-pagination{display:none}.dashboard .ant-table-header{overflow:hidden!important;margin-bottom:0!important;padding-bottom:0!important}.dashboard .ant-table-header .ant-table-thead>tr>th{padding:13px 8px}.dashboard .ant-table-body .ant-table-thead>tr>th{padding:10px 8px}.dashboard .ant-table-tbody>tr>td{padding:8px}.dashboard tr.selected-command>td{background-color:#fdffd1!important}.dashboard tr.error-command>td{background-color:#f7c1c1!important}.dashboard tr.running-command>td{background-color:#d5d6f9!important}.dashboard tr.done-command>td{background-color:#d1ffd8!important}.dashboard .ant-btn-group>.ant-btn-group{float:none}.dashboard .ant-form-item{margin-bottom:15px}.dashboard .commands-view,.dashboard .editor-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:2;-ms-flex:2;flex:2}.dashboard .commands-view .ant-tabs-bar{margin-bottom:0}.dashboard .commands-view .ant-tabs-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:10px;border:1px solid #d9d9d9;border-width:0 1px 1px}.dashboard .commands-view .ant-tabs-content .ant-tabs-tabpane{-webkit-box-flex:1;-ms-flex:1;flex:1;-ms-flex-negative:unset!important;flex-shrink:unset!important;position:relative}.dashboard .commands-view .ant-tabs-content .table-wrapper{position:absolute;top:0;bottom:140px;left:0;right:0;overflow-y:auto}.dashboard .commands-view .ant-tabs-content .fields-wrapper{position:absolute;left:0;right:0;bottom:0;height:130px}.dashboard .commands-view .ant-tabs-content .react-codemirror2{position:relative}.dashboard .commands-view .ant-tabs-content .react-codemirror2.has-error{height:calc(100% - 70px)}.dashboard .commands-view .ant-tabs-content .react-codemirror2.no-error{height:calc(100% - 0px)}.dashboard .commands-view .ant-tabs-content .react-codemirror2 .CodeMirror{position:absolute;top:0;bottom:0;left:0;right:0;height:auto;font-size:13px}.dashboard .commands-view .ant-tabs-content .ant-spin-container,.dashboard .commands-view .ant-tabs-content .ant-spin-nested-loading,.dashboard .commands-view .ant-tabs-content .ant-table,.dashboard .commands-view .ant-tabs-content .ant-table-content,.dashboard .commands-view .ant-tabs-content .ant-table-scroll,.dashboard .commands-view .ant-tabs-content .ant-table-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1}.dashboard .commands-view .ant-tabs-content .ant-table-scroll{overflow-y:auto}.dashboard .commands-view .command-row{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-left:5px;border-bottom:1px solid #e9e9e9;line-height:45px;font-size:13px}.dashboard .commands-view .command-row:hover{background:#ecf6fd}.dashboard .commands-view .command-row.footer-row,.dashboard .commands-view .command-row.header-row{background-color:#f7f7f7;font-weight:700}.dashboard .commands-view .command-row.footer-row{display:block;text-align:center;cursor:pointer}.dashboard .commands-view .command-row.breakpoint-command:before{content:"";position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:0;height:0;border:8px solid transparent;border-left-color:green}.dashboard .commands-view .command-row.selected-command{background-color:#fdffd1}.dashboard .commands-view .command-row.error-command{background-color:#f7c1c1}.dashboard .commands-view .command-row.running-command{background-color:#d5d6f9}.dashboard .commands-view .command-row.done-command{background-color:#d1ffd8}.dashboard .commands-view .command-row.comment-command{background-color:transparent;color:#ccc;font-style:italic}.dashboard .commands-view .command-row.comment-command.selected-command{background-color:#fdffd1}.dashboard .commands-view .command-row .row-col{padding:0 8px}.dashboard .commands-view .command-row .row-col.command-col{width:130px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dashboard .commands-view .command-row .row-col.target-col{width:30%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dashboard .commands-view .command-row .row-col.value-col{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dashboard .commands-view .command-row .row-col.op-col{width:80px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dashboard .table-footer{position:absolute;left:0;right:0;top:0;bottom:0;line-height:32px;text-align:center;font-weight:700;background:#f7f7f7;cursor:pointer}.dashboard .table-footer:hover{background:#e0e0e0}.dashboard .logs-screenshots{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;margin-top:15px}.dashboard .logs-screenshots .resize-handler{position:absolute;top:-10px;left:0;width:100%;height:6px;background:transparent;cursor:row-resize}.dashboard .logs-screenshots .resize-handler.focused,.dashboard .logs-screenshots .resize-handler:hover{height:6px;background:#ccc}.dashboard .logs-screenshots .ant-tabs.ant-tabs-card>.ant-tabs-bar .ant-tabs-tab{padding:5px 12px 4px}.dashboard .logs-screenshots .ant-tabs{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1}.dashboard .logs-screenshots .ant-tabs-bar{margin-bottom:0}.dashboard .logs-screenshots .ant-tabs-content{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow-y:auto;min-height:70px;border:1px solid #d9d9d9;border-width:0 1px 1px}.dashboard .logs-screenshots .ls-toolbox{position:absolute;right:0;top:0}.dashboard .logs-screenshots .log-content,.dashboard .logs-screenshots .screenshot-content{padding:10px 0}.dashboard .logs-screenshots .screenshot-content li{padding:0 20px 20px}.dashboard .logs-screenshots .screenshot-content li .timestamp{display:block;margin-bottom:10px;font-size:14px}.dashboard .logs-screenshots .screenshot-content li .filename{font-weight:700}.dashboard .logs-screenshots .screenshot-content li a{display:inline-block;margin-left:20px}.dashboard .logs-screenshots .screenshot-content li a img{max-width:250px;border:1px solid #ccc}.dashboard .logs-screenshots .log-content{list-style:none;margin:0;padding:0 10px;height:calc(100% - 38px);overflow-y:auto}.dashboard .logs-screenshots .log-content li{padding:5px 0;font-size:12px;border-bottom:1px solid #f3f3f3}.dashboard .logs-screenshots .log-content li:after{content:"";display:table;clear:both}.dashboard .logs-screenshots .log-content li.error{color:red;font-weight:700}.dashboard .logs-screenshots .log-content li.warning{color:orange}.dashboard .logs-screenshots .log-content li .log-type{float:left;margin-right:10px}.dashboard .logs-screenshots .log-content li .log-detail{white-space:pre-wrap}.dashboard .logs-screenshots .csv-content{padding:10px}.dashboard .logs-screenshots .csv-content button{margin-right:5px}.dashboard .logs-screenshots .variable-content{padding:10px}.dashboard .logs-screenshots .variable-content .variable-options{margin-bottom:10px}.dashboard .logs-screenshots .variable-content .ant-checkbox-wrapper{margin-left:0!important;margin-right:10px}.dashboard .logs-screenshots .variable-content .read-only{color:#ccc}.dashboard .logs-screenshots .vision-content{padding:10px}.dashboard .logs-screenshots .vision-content .vision-top-actions{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:15px}.dashboard .logs-screenshots .vision-content .vision-top-actions .main-actions{display:-webkit-box;display:-ms-flexbox;display:flex}.dashboard .logs-screenshots .vision-content .vision-top-actions .main-actions>*{margin-right:15px}.dashboard .logs-screenshots .vision-content .vision-top-actions .main-actions>:last-child{margin-right:0}.dashboard .logs-screenshots .vision-content .vision-top-actions .main-actions .load-image-button{padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.dashboard .logs-screenshots .vision-content .vision-top-actions .main-actions .load-image-button label{padding:0 15px;cursor:pointer}.dashboard .logs-screenshots .vision-content .vision-top-actions .more-info{font-size:14px}.dashboard .logs-screenshots .vision-content .vision-image{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:100px;height:100px;border:1px solid #ccc}.dashboard .logs-screenshots .vision-content .vision-image img{max-height:100px}.dashboard .logs-screenshots .vision-content .vision-name{font-size:14px;word-break:break-all}.dashboard .logs-screenshots .vision-content .vision-actions button{margin-right:5px}.dashboard .logs-screenshots .vision-content .vision-actions button:last-child{margin-right:0}.dashboard .online-help{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:15px;padding:0 10px;height:25px;line-height:25px;font-size:14px;text-align:right}.dashboard #context_menu{z-index:10}.dashboard #context_menu .ant-menu{border:"1px solid #ccc";border-radius:4px;-webkit-box-shadow:0 1px 6px rgba(0,0,0,.2);box-shadow:0 1px 6px rgba(0,0,0,.2)}.dashboard #context_menu .ant-menu .ant-menu-item{height:36px;line-height:36px}.dashboard #context_menu .ant-menu .ant-menu-item:hover{background:#ecf6fd}.source-error{color:red;white-space:pre-wrap;font-size:12px}.ant-dropdown .ant-dropdown-menu{max-height:none}@media (max-width:768px){.duplicate-modal,.play-loop-modal,.rename-modal,.save-modal{width:400px!important;margin:0 auto}}',""])},60:function(e,t,n){var a=n(2).retry,r=function(e){return e instanceof Error?{isError:!0,name:e.name,message:e.message,stack:e.stack}:e};function o(e){var t=e.ask,n=e.answer,o=e.timeout,i=e.onAnswer,s=e.onAsk,c=e.destroy,l=e.checkReady||function(){return Promise.resolve(!0)},u={},d=[],m=function(e,t,n){d.push({uid:e,cmd:t,args:n})},p=m,f=function(e,t,n,a,r){for(var o=0,i=e.length;o<i;o++){var s;try{s=e[o](t,n)}catch(e){return r(e)}if(void 0!==s)return a(s)}};o=o||-1,i((function(e,t,n){if(e&&!1===u[e])delete u[e];else if(e&&u[e]){var a=u[e][0],o=u[e][1];delete u[e],t?o(r(t)):a(n)}})),s((function(e,t,a){if(o>0&&setTimeout((function(){d&&d.find((function(t){return t.uid===e}))&&n(e,new Error("ipcPromise: answer timeout "+o+' for cmd "'+t+'", args "'+a+'"'))}),o),p!==m)return new Promise((function(e,n){f(p,t,a,e,n)})).then((function(r){if(void 0===r)return m(e,t,a);n(e,null,r)}),(function(t){n(e,r(t),null)}));m(e,t,a)}));return{ask:function(e,t){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=a(e,{shouldRetry:function(){return!0},retryInterval:100,timeout:5e3});return i().then((function(){return t.apply(void 0,r)}))}}(l,(function(e,n,a){var r="ipcp_"+1*new Date+"_"+Math.round(1e3*Math.random()),i=a||o;return i>0&&setTimeout((function(){var t;u&&u[r]&&(t=u[r][1],u[r]=!1,t(new Error("ipcPromise: onAsk timeout "+i+' for cmd "'+e+'", args "'+n+'"')))}),i),t(r,e,n||[]),new Promise((function(e,t){u[r]=[e,t]}))})),onAsk:function(e){Array.isArray(p)?p.push(e):p=[e];var t=d.map((function(e){return new Promise((function(t,n){f(p,e.cmd,e.args,t,n)})).then((function(t){if(void 0!==t)return n(e.uid,null,t),e.uid}),(function(t){return n(e.uid,t,null),e.uid}))}));Promise.all(t).then((function(e){var t=!0,n=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;if(void 0!==i){var s=d.findIndex((function(e){return e.uid===i}));d.splice(s,1)}}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}}))},destroy:function(e){c&&c(),t=null,n=null,i=null,s=null,d=null,e||Object.keys(u).forEach((function(e){var t=u[e][1];t&&t(new Error("IPC Promise has been Destroyed.")),delete u[e]}))}}}o.serialize=function(e){return{ask:function(t,n,a){return e.ask(t,JSON.stringify(n),a)},onAsk:function(t){return e.onAsk((function(e,n){return t(e,JSON.parse(n))}))},destroy:e.destroy}},e.exports=o},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return L})),n.d(t,"c",(function(){return U}));var a=n(97),r=n.n(a),o=n(2),i=n(22),s=n(35),c=n(3),l=n.n(c),u=n(4),d=n(131),m=n.n(d),p=n(132),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h={DOWN:1,PRESS:2,UP:4,INPUT:8};h.ALL=h.DOWN|h.PRESS|h.UP|h.INPUT;var v=function e(t,n){g(this,e),this.modifiers=t,this.ctrlKey=!!(1&t),this.metaKey=!!(2&t),this.altKey=!!(4&t),this.shiftKey=!!(8&t),this.keyCode=n};v.CTRL=1,v.META=2,v.ALT=4,v.SHIFT=8;var b=function(){function e(t,n){g(this,e),this._charCodeKeyCodeMap=t,this._actionKeyCodeMap=n}return f(e,[{key:"charCodeForKeystroke",value:function(e){var t=this._charCodeKeyCodeMap;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];if(e.keyCode===a.keyCode&&e.modifiers===a.modifiers)return parseInt(n,10)}return null}},{key:"createEventFromKeystroke",value:function(e,t,n){var a=n.ownerDocument,r=a.defaultView.Event,o=void 0;try{o=new r(e)}catch(e){o=a.createEvent("UIEvents")}switch(o.initEvent(e,!0,!0),e){case"textInput":o.data=String.fromCharCode(this.charCodeForKeystroke(t));break;case"keydown":case"keypress":case"keyup":o.shiftKey=t.shiftKey,o.altKey=t.altKey,o.metaKey=t.metaKey,o.ctrlKey=t.ctrlKey,o.keyCode="keypress"===e?this.charCodeForKeystroke(t):t.keyCode,o.charCode="keypress"===e?o.keyCode:0,o.which=o.keyCode}return o}},{key:"dispatchEventsForAction",value:function(e,t){var n=this.keystrokeForAction(e);this.dispatchEventsForKeystroke(n,t)}},{key:"dispatchEventsForInput",value:function(e,t){for(var n=0,a=0,r=e.length;a<r;a++){var o=this.keystrokeForCharCode(e.charCodeAt(a));o&&(this.dispatchModifierStateTransition(t,n,o.modifiers),this.dispatchEventsForKeystroke(o,t,!1),n=o.modifiers)}this.dispatchModifierStateTransition(t,n,0)}},{key:"dispatchEventsForKeystroke",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.ALL;if(e){n&&this.dispatchModifierStateTransition(t,0,e.modifiers,a);var r=void 0;if(a&h.DOWN&&(r=this.createEventFromKeystroke("keydown",e,t)),r&&t.dispatchEvent(r)&&this.targetCanReceiveTextInput(t)){var o=void 0;if(a&h.PRESS&&(o=this.createEventFromKeystroke("keypress",e,t)),o&&o.charCode&&t.dispatchEvent(o)&&a&h.INPUT){var i=this.createEventFromKeystroke("textInput",e,t);t.dispatchEvent(i);var s=this.createEventFromKeystroke("input",e,t);t.dispatchEvent(s)}}if(a&h.UP){var c=this.createEventFromKeystroke("keyup",e,t);t.dispatchEvent(c)}n&&this.dispatchModifierStateTransition(t,e.modifiers,0)}}},{key:"dispatchModifierStateTransition",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.ALL,r=t,o=2==(2&t),i=2==(2&n),s=1==(1&t),c=1==(1&n),l=8==(8&t),u=8==(8&n),d=4==(4&t),m=4==(4&n),p=a&h.UP,f=a&h.DOWN;if(p&&!0===o&&!1===i&&(r&=-3,e.dispatchEvent(this.createEventFromKeystroke("keyup",new v(r,this._actionKeyCodeMap.META),e))),p&&!0===s&&!1===c&&(r&=-2,e.dispatchEvent(this.createEventFromKeystroke("keyup",new v(r,this._actionKeyCodeMap.CTRL),e))),p&&!0===l&&!1===u&&(r&=-9,e.dispatchEvent(this.createEventFromKeystroke("keyup",new v(r,this._actionKeyCodeMap.SHIFT),e))),p&&!0===d&&!1===m&&(r&=-5,e.dispatchEvent(this.createEventFromKeystroke("keyup",new v(r,this._actionKeyCodeMap.ALT),e))),f&&!1===o&&!0===i&&(r|=2,e.dispatchEvent(this.createEventFromKeystroke("keydown",new v(r,this._actionKeyCodeMap.META),e))),f&&!1===s&&!0===c&&(r|=1,e.dispatchEvent(this.createEventFromKeystroke("keydown",new v(r,this._actionKeyCodeMap.CTRL),e))),f&&!1===l&&!0===u&&(r|=8,e.dispatchEvent(this.createEventFromKeystroke("keydown",new v(r,this._actionKeyCodeMap.SHIFT),e))),f&&!1===d&&!0===m&&(r|=4,e.dispatchEvent(this.createEventFromKeystroke("keydown",new v(r,this._actionKeyCodeMap.ALT),e))),r!==n)throw new Error("internal error, expected modifier state: "+n+", got: "+r)}},{key:"keystrokeForAction",value:function(e){var t=null,n=0,a=1===e.length?[e]:e.split("+"),r=a.pop();if(a.forEach((function(t){switch(t.toUpperCase()){case"CTRL":n|=1;break;case"META":n|=2;break;case"ALT":n|=4;break;case"SHIFT":n|=8;break;default:throw console.error("parts",a),new Error('in "'+e+'", invalid modifier: '+t)}})),r.toUpperCase()in this._actionKeyCodeMap)t=this._actionKeyCodeMap[r.toUpperCase()];else{if(1!==r.length)throw new Error('in "'+e+'", invalid action: '+r);var o=this.keystrokeForCharCode(r.charCodeAt(0));if(!o)return null;n|=o.modifiers,t=o.keyCode}return new v(n,t)}},{key:"keystrokeForCharCode",value:function(e){return this._charCodeKeyCodeMap[e]||null}},{key:"targetCanReceiveTextInput",value:function(e){return!!e&&Object(p.a)(e)}}]),e}(),y={32:new v(0,32),33:new v(8,49),34:new v(8,222),35:new v(8,51),36:new v(8,52),37:new v(8,53),38:new v(8,55),39:new v(0,222),40:new v(8,57),41:new v(8,48),42:new v(8,56),43:new v(8,187),44:new v(0,188),45:new v(0,189),46:new v(0,190),47:new v(0,191),48:new v(0,48),49:new v(0,49),50:new v(0,50),51:new v(0,51),52:new v(0,52),53:new v(0,53),54:new v(0,54),55:new v(0,55),56:new v(0,56),57:new v(0,57),58:new v(8,186),59:new v(0,186),60:new v(8,188),61:new v(0,187),62:new v(8,190),63:new v(8,191),64:new v(8,50),65:new v(8,65),66:new v(8,66),67:new v(8,67),68:new v(8,68),69:new v(8,69),70:new v(8,70),71:new v(8,71),72:new v(8,72),73:new v(8,73),74:new v(8,74),75:new v(8,75),76:new v(8,76),77:new v(8,77),78:new v(8,78),79:new v(8,79),80:new v(8,80),81:new v(8,81),82:new v(8,82),83:new v(8,83),84:new v(8,84),85:new v(8,85),86:new v(8,86),87:new v(8,87),88:new v(8,88),89:new v(8,89),90:new v(8,90),91:new v(0,219),92:new v(0,220),93:new v(0,221),94:new v(8,54),95:new v(8,189),96:new v(0,192),97:new v(0,65),98:new v(0,66),99:new v(0,67),100:new v(0,68),101:new v(0,69),102:new v(0,70),103:new v(0,71),104:new v(0,72),105:new v(0,73),106:new v(0,74),107:new v(0,75),108:new v(0,76),109:new v(0,77),110:new v(0,78),111:new v(0,79),112:new v(0,80),113:new v(0,81),114:new v(0,82),115:new v(0,83),116:new v(0,84),117:new v(0,85),118:new v(0,86),119:new v(0,87),120:new v(0,88),121:new v(0,89),122:new v(0,90),123:new v(8,219),124:new v(8,220),125:new v(8,221),126:new v(8,192)};b.US_ENGLISH=new b(y,{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,META:91,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123});var E,w=b.US_ENGLISH,C=function(e){if(null!==e.getAttribute("readonly"))return!1;var t=e.tagName.toUpperCase(),n=(e.type||"").toLowerCase();return"TEXTAREA"===t||"INPUT"===t&&-1!==["text","search","tel","url","email","password","number"].indexOf(n)},T=function(e){return null==e},x=function(e,t,n){T(e.selectionStart)||(e.selectionStart=t),T(e.selectionEnd)||(e.selectionEnd=void 0!==n?n:t)},S=(E={0:null,8:"BACKSPACE",9:"TAB",10:"ENTER",11:null,12:null,13:null},function(e){return e.length>1?e:E[e.charCodeAt(0)]||e});function _(e,t,n){var a=(n?t.split(""):function(e){var t=new RegExp("\\$\\{("+["KEY_LEFT","KEY_UP","KEY_RIGHT","KEY_DOWN","KEY_PGUP","KEY_PAGE_UP","KEY_PGDN","KEY_PAGE_DOWN","KEY_BKSP","KEY_BACKSPACE","KEY_DEL","KEY_DELETE","KEY_ENTER","KEY_TAB"].join("|")+")\\}");return Object(o.splitKeep)(t,e).reduce((function(e,n){return t.test(n)?e.push(n):e=e.concat(n.split("")),e}),[])}(t)).map(S).filter((function(e){return e&&e.length}));e.focus(),e.value&&x(e,e.value.length),a.forEach((function(t){var a=function(e){var t;if(t=e.match(/^\$\{([^}]+)\}$/))switch(t[1]){case"KEY_LEFT":return"LEFT";case"KEY_UP":return"UP";case"KEY_RIGHT":return"RIGHT";case"KEY_DOWN":return"DOWN";case"KEY_PGUP":case"KEY_PAGE_UP":return"PAGEUP";case"KEY_PGDN":case"KEY_PAGE_DOWN":return"PAGEDOWN";case"KEY_BKSP":case"KEY_BACKSPACE":return"BACKSPACE";case"KEY_DEL":case"KEY_DELETE":return"DELETE";case"KEY_ENTER":return"ENTER";case"KEY_TAB":return"TAB"}return e}(t);!function(e,t){if(C(e))if(1===t.length)if(T(e.selectionStart))e.value=e.value+t;else{var n=e.selectionStart;e.value=e.value.substring(0,e.selectionStart)+t+e.value.substring(e.selectionEnd),x(e,n+1)}else switch(t){case"ENTER":e.value=e.value+"\n",x(e,e.value.length);break;case"TAB":e.value=e.value+"\t",x(e,e.value.length);break;case"LEFT":x(e,e.selectionStart-1);break;case"RIGHT":x(e,e.selectionEnd+1);break;case"BACKSPACE":var a=e.selectionStart;e.value=e.value.substring(0,e.selectionStart-1)+e.value.substring(e.selectionEnd),x(e,a-1);break;case"DELETE":var r=e.selectionEnd;e.value=e.value.substring(0,e.selectionStart)+e.value.substring(e.selectionEnd+1),x(e,r)}}(e,a),w.dispatchEventsForAction(a,e),n||function(e,t){if("ENTER"===t&&C(e)){var n=function(e,t){for(var n=e;n=n.parentNode;)if(n.tagName===t.toUpperCase())return n;return null}(e,"FORM");n&&n.submit()}}(e,a)}))}var k=n(93),O=n(8),I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e,t){return r()(e).test(t)},P=function(e){return document.evaluate(e,document.body,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotItem(0)},j=function(e){var t=e.getBoundingClientRect();return{top:t.top,left:t.left}},V=function(){return window===window.top?Promise.resolve({x:0,y:0}):Object(s.b)(window.parent,window,{action:"SOURCE_PAGE_OFFSET",data:{}})},D=function(e){return/^#elementfrompoint/i.test(e.trim())},M=function(e){var t=function(e){var t=e.trim().match(/^#elementfrompoint\s*\((\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\)/i);if(!t)throw new Error("Invalid '#elementfrompoint' expression");var n=parseFloat(t[1]),a=parseFloat(t[2]);if(n<=0||a<=0)throw new Error("'#elementfrompoint' only accepts positive numbers");return[n,a]}(e),n=I(t,2),a=n[0],r=n[1];return[0+a-Object(i.g)(document),0+r-Object(i.h)(document)]},R=function(e){try{return function(e){var t=e.indexOf("=");if(/^\//.test(e))return!0;if(/^#elementfrompoint/i.test(e))return!0;if(-1===t)throw new Error("invalid locator, "+e);var n=e.substr(0,t),a=e.substr(t+1);if(!a||!a.length)throw new Error("invalid locator, "+e);switch(n&&n.toLowerCase()){case"id":case"name":case"identifier":case"link":case"css":case"xpath":return!0;default:throw new Error("invalid locator, "+e)}}(e),!0}catch(e){return!1}},L=function(e,t){var n=e.indexOf("="),a=void 0;if(/^\//.test(e))a=P(e);else if(/^#elementfrompoint/i.test(e.trim()))a=function(e){var t=M(e),n=I(t,2),a=n[0],r=n[1];return document.elementFromPoint(a,r)}(e),Object(u.a)("elementfrompoint",a);else{if(-1===n)throw new Error("getElementByLocator: invalid locator, "+e);var r=e.substr(0,n),o=e.substr(n+1);switch(r&&r.toLowerCase()){case"id":a=document.getElementById(o);break;case"name":a=document.getElementsByName(o)[0];break;case"identifier":a=document.getElementById(o)||document.getElementsByName(o)[0];break;case"link":var s=[].slice.call(document.getElementsByTagName("a")),c=o.replace(/^exact:/,""),l=c.match(/^(.+)@POS=(\d+)$/i),d=0;l&&(c=l[1],d=parseInt(l[2])-1),a=s.filter((function(e){return N(c,Object(i.d)(e))}))[d];break;case"css":a=document.querySelector(o);break;case"xpath":a=P(o);break;default:throw new Error("getElementByLocator: unsupported locator method, "+r)}}if(!a)throw new Error("getElementByLocator: fail to find element based on the locator, "+e);if(t&&!Object(i.e)(a))throw new Error("getElementByLocator: element is found but not visible yet");return a},F=function(e,t){var n=e.indexOf("=");if(-1!==n){var a=e.substr(0,n),r=e.substr(n+1);switch(a){case"index":var o=parseInt(r,10),i=window.frames,s=i[o];if(!s)throw new Error("Frame index out of range (index "+r+" in "+i.length+" frames");return{frame:s};case"relative":if("top"===r)return{frame:window.top};if("parent"===r)return{frame:window.parent};throw new Error("Unsupported relative type, "+r)}}-1!==n||/^\//.test(e)||(e="name="+e);var c=L(e);if(!c||!c.contentWindow)throw new Error("The element found based on "+e+" is NOT a frame/iframe");if(!c.getAttribute("src")){var u=l.a.extension.getURL("content_script.js"),d=c.contentDocument,m=d.constructor.prototype.createElement.call(d,"script");m.setAttribute("type","text/javascript"),m.setAttribute("src",u),d.documentElement.appendChild(m),m.parentNode.removeChild(m),t.hackAlertConfirmPrompt(d)}return{frame:c.contentWindow}},U=function(e,t,n){var a,c,d,p,f=e.cmd,g=e.target,h=e.value,v=e.extra,b=function(e,t){return function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var o=t.apply(void 0,a);return new Promise((function(t,n){try{t(e.apply(void 0,a))}catch(e){n(new Error(o.errorMsg(e.message)))}}))}},y=b(F,(function(e){return{errorMsg:function(t){return"timeout reached when looking for frame '"+e+"'"}}})),E=b((function(e,a){var r=L(e,a);if(D(e)){var o="unkown";try{o=n.xpath(r)}catch(e){}var i=e+' => xpath "'+o+'"';console.log(i,r),t.ask("CS_ADD_LOG",{info:i})}return r}),(function(e){return{errorMsg:function(t){return/element is found but not visible yet/.test(t)?"element is found but not visible yet for '"+e+"' (use !WaitForVisible = false to disable waiting for visible)":"timeout reached when looking for element '"+e+"'"}}}));switch(f){case"open":return!!window.noCommandsYet||Object(o.until)("document.body",(function(){return{pass:!!document.body,result:document.body}})).then((function(t){return window.location.href=e.target,!0}));case"refresh":return setTimeout((function(){return window.location.reload()}),0),!0;case"mouseOver":return E(g).then((function(e){try{v.playScrollElementsIntoView&&e.scrollIntoView({block:"center"}),v.playHighlightElements&&n.highlightDom(e,500)}catch(e){u.a.error("error in scroll and highlight",e.message)}return e.dispatchEvent(new MouseEvent("mouseover",{bubbles:!0})),!0}));case"locate":return E(g).then((function(e){try{v.playScrollElementsIntoView&&e.scrollIntoView({block:"center"}),v.playHighlightElements&&n.highlightDom(e,500)}catch(e){u.a.error("error in scroll and highlight",e.message)}var t=j(e);return V().then((function(n){return{rect:{x:t.left+n.x,y:t.top+n.y,width:e.offsetWidth,height:e.offsetHeight}}}))}));case"dragAndDropToObject":return Promise.all([E(g),E(h)]).then((function(e){var t=I(e,2),n=t[0],a=t[1];return m.a.triggerDragEvent(n,a),!0}));case"waitForVisible":return E(g,!0).then((function(){return!0}));case"clickAt":var w=D(g);return(w?V().then((function(e){Object(u.a)("iframeOffset",e);var t=M(g),n=I(t,2),a=n[0],r=n[1];return"#elementfrompoint ("+(a-e.x)+", "+(r-e.y)+")"})):Promise.resolve(g)).then((function(e){return E(e,v.waitForVisible).then((function(t){if(!/^\d+\s*,\s*\d+$/.test(h)&&!D(e))throw new Error("invalid offset for clickAt: "+h);var a=function(){try{v.playScrollElementsIntoView&&t.scrollIntoView({block:"center"}),v.playHighlightElements&&n.highlightDom(t,500)}catch(e){u.a.error("error in scroll and highlight")}},r=function(){if(w)return M(e);var n=h.split(",").map((function(e){return parseInt(e.trim(),10)})),a=I(n,2),r=a[0],o=a[1],i=j(t),s=i.top;return[i.left+r,s+o]}(),o=I(r,2),i=o[0],s=o[1],c=window.scrollX,l=window.scrollY;w||a();var d=i+(c-window.scrollX),m=s+(l-window.scrollY);return Object(u.a)("clickAt clientX/clientY",d,m),["mousedown","mouseup","click"].forEach((function(e){t.dispatchEvent(new MouseEvent(e,{view:window,bubbles:!0,cancelable:!0,clientX:d,clientY:m}))})),w&&a(),!0}))}));case"click":case"clickAndWait":return E(g,v.waitForVisible).then((function(e){try{v.playScrollElementsIntoView&&e.scrollIntoView({block:"center"}),v.playHighlightElements&&n.highlightDom(e,500)}catch(e){u.a.error("error in scroll and highlight")}return e.click(),!0}));case"select":case"selectAndWait":return E(g,v.waitForVisible).then((function(e){var t=[].slice.call(e.getElementsByTagName("option")),a=h.indexOf("="),r=h.substring(0,a),o=h.substring(a+1),s=function(){switch(r){case"label":return t.find((function(e){return N(o,Object(i.d)(e).trim())}));case"index":return t.find((function(e,t){return t===parseInt(o)}));case"id":return t.find((function(e,t){return e.id===o}));case"value":return t.find((function(e){return e.value===o}));default:throw new Error('Option type "'+r+'" not supported')}}();if(!s)throw new Error("cannot find option with '"+h+"'");return v.playScrollElementsIntoView&&e.scrollIntoView({block:"center"}),v.playHighlightElements&&n.highlightDom(e,500),e.value=s.value,e.dispatchEvent(new Event("change")),!0}));case"type":return E(g,v.waitForVisible).then((function(e){var a=e.tagName.toLowerCase();if("input"!==a&&"textarea"!==a)throw new Error("run command: element found is neither input nor textarea");if(v.playScrollElementsIntoView&&e.scrollIntoView({block:"center"}),v.playHighlightElements&&n.highlightDom(e,500),e.type&&"file"===e.type.toLowerCase()){if(l.a.isFirefox())throw new Error("Setting file path fo file inputs is not supported by Firefox extension api yet");return t.ask("CS_SET_FILE_INPUT_FILES",{files:h.split(";"),selector:Object(i.c)(e)})}return Object(k.a)(h,e).then((function(t){return e.value="",_(e,t,!0),e.value=t,e.dispatchEvent(new Event("change")),!0}))})).catch((function(e){if(/This input element accepts a filename/i.test(e.message))throw new Error("Sorry, upload can not be automated Chrome (API limitation).");throw e}));case"editContent":return E(g,v.waitForVisible).then((function(e){if("true"!==e.contentEditable)throw new Error("Target is not contenteditable");return v.playScrollElementsIntoView&&e.scrollIntoView({block:"center"}),v.playHighlightElements&&n.highlightDom(e,500),e.innerHTML=h,!0}));case"selectFrame":return y(g,n).then((function(e){if(!e)throw new Error("Invalid frame/iframe");return e}));case"verifyText":return E(g).then((function(e){var t=Object(i.d)(e);return!!N(h,t)||{log:{error:'text not matched, \n\texpected: "'+h+'", \n\tactual: "'+t+'"'}}}));case"verifyTitle":return!!N(g,document.title)||{log:{error:'title not matched, \n\texpected: "'+g+'", \n\tactual: "'+document.title+'"'}};case"verifyElementPresent":var C=v||{},T=C.timeoutElement,x=C.retryInfo;return E(g).then((function(){return!0}),(function(e){if(1e3*T/x.retryInterval-x.retryCount<=1)return{log:{error:"'"+g+"' element not present"}};throw e}));case"verifyChecked":return E(g).then((function(e){if(!!!e.checked)return{log:{error:"'"+g+"' is not checked"}}}));case"verifyAttribute":var S=g.lastIndexOf("@");if(-1===S)throw new Error("invalid target for verifyAttribute - "+g);var P=g.substr(0,S),R=g.substr(S+1);return E(P).then((function(e){var t=e.getAttribute(R);if(!N(h,t))return{log:{error:'attribute not matched, \n\texpected: "'+h+'", \n\tactual: "'+t+'"'}}}));case"verifyError":return!v.lastCommandOk||{log:{error:g}};case"assertText":return E(g).then((function(e){var t=Object(i.d)(e);if(!N(h,t))throw new Error('text not matched, \n\texpected: "'+h+'", \n\tactual: "'+t+'"');return!0}));case"assertTitle":if(!N(g,document.title))throw new Error('title not matched, \n\texpected: "'+g+'", \n\tactual: "'+document.title+'"');return!0;case"assertElementPresent":return E(g).then((function(){return!0}));case"assertChecked":return E(g).then((function(e){if(!!!e.checked)throw new Error("'"+g+"' is not checked")}));case"assertAttribute":var U=g.lastIndexOf("@");if(-1===U)throw new Error("invalid target for assertAttribute - "+g);var B=g.substr(0,U),K=g.substr(U+1);return E(B).then((function(e){var t=e.getAttribute(K);if(!N(h,t))throw new Error('attribute not matched, \n\texpected: "'+h+'", \n\tactual: "'+t+'"')}));case"assertError":if(v.lastCommandOk)throw new Error(g);return!0;case"assertAlert":var Y=document.body.getAttribute("data-alert");if(!Y)throw new Error("no alert found!");if(!N(g,Y))throw new Error('unmatched alert msg, \n\texpected: "'+g+'", \n\tactual: "'+Y+'"');return document.body.setAttribute("data-alert",""),!0;case"assertConfirmation":var G=document.body.getAttribute("data-confirm");if(!G)throw new Error("no confirm found!");if(!N(g,G))throw new Error('unmatched confirm msg, \n\texpected: "'+g+'", \n\tactual: "'+G+'"');return document.body.setAttribute("data-confirm",""),!0;case"assertPrompt":var $=document.body.getAttribute("data-prompt");if(!$)throw new Error("no prompt found!");if(!N(g,$))throw new Error('unmatched prompt msg, \n\texpected: "'+g+'", \n\tactual: "'+$+'"');return document.body.setAttribute("data-prompt",""),!0;case"answerOnNextPrompt":return document.body.setAttribute("data-prompt-answer",g),!0;case"waitForPageToLoad":return!0;case"storeTitle":return{vars:A({},h,document.title)};case"storeText":return E(g).then((function(e){return{vars:A({},h,Object(i.d)(e))}}));case"storeAttribute":var z=g.lastIndexOf("@");if(-1===z)throw new Error("invalid target for storeAttribute - "+g);var W=g.substr(0,z),X=g.substr(z+1);return E(W).then((function(e){var t=e.getAttribute(X);if(!t)throw new Error("missing attribute '"+X+"'");return{vars:A({},h,t)}}));case"storeEval":return(p={eval:function(e){return Object(u.a)("sending INJECT_RUN_EVAL"),Object(s.b)(window,window,{cmd:"INJECT_RUN_EVAL",args:{code:e}},"*",5e3).then((function(e){return Object(u.a)("eval result",e),e.result}))}},document.body.getAttribute("data-injected")?Promise.resolve(p):(Object(o.insertScript)(l.a.extension.getURL("inject.js")),Object(o.retry)((function(){return Object(u.a)("sending INJECT_READY"),Object(s.b)(window,window,{cmd:"INJECT_READY"},"*",500)}),{shouldRetry:function(){return!0},timeout:5e3,retryInterval:0})().then((function(){return p})).catch((function(e){throw Object(u.a)(e.stack),new Error("fail to inject")})))).then((function(e){return e.eval(g).then((function(e){return{vars:A({},h,e)}})).catch((function(e){throw new Error("Error in runEval code: "+e.message)}))}));case"storeValue":return E(g).then((function(e){var t=e.value||"";return{vars:A({},h,t)}}));case"storeChecked":return E(g).then((function(e){var t=!!e.checked;return{vars:A({},h,t)}}));case"verifyValue":return E(g).then((function(e){var t=e.value;return!!N(h,t)||{log:{error:'value not matched, \n\texpected: "'+h+'", \n\tactual: "'+t+'"'}}}));case"assertValue":return E(g).then((function(e){var t=e.value;if(!N(h,t))throw new Error('value not matched, \n\texpected: "'+h+'", \n\tactual: "'+t+'"');return!0}));case"sendKeys":return E(g).then((function(e){return _(e,h),!0}));case"selectWindow":return(g&&"TAB=CLOSEALLOTHER"===g.toUpperCase()?t.ask("CS_CLOSE_OTHER_TABS",{}):t.ask("CS_SELECT_WINDOW",{target:g,value:h})).then((function(){return!0}));case"sourceSearch":case"sourceExtract":if(!g)throw new Error("Must provide text / regular expression to search for");if(!h)throw new Error("Must specify a variable to save the result");var H=(c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return void 0===e?0:Math.max(0,parseInt(e,10)+t)},(d=/@\s*(\d+)(?:\s*,\s*(\d+))?\s*$/.exec(a=g))?{rest:a.substring(0,d.index),matchIndex:c(d[1],-1),captureIndex:c(d[2])}:{rest:a,matchIndex:0,captureIndex:0}),q=H.rest,J=H.matchIndex,Q=H.captureIndex;if("sourceSearch"===f&&q!==g)throw new Error("The @ parameter is only supported in sourceExtract");var Z=function(){if(!/^regex(=|:)/i.test(q))return null;var e=q.replace(/^regex(=|:)/i,"").replace(/^\/|\/g?$/g,"");return Object(o.toRegExp)(e,{needEncode:!1,flag:"g"})}(),ee=function(){if(Z)return null;var e=q.replace(/^text(=|:)/i,"");if("sourceExtract"===f&&!/\*/.test(e))throw new Error("Missing * or REGEX in sourceExtract. Extracting a plain text doesn't make much sense");return r()(e,{capture:!0,flags:"g"})}(),te=function(){for(var e=document.documentElement.outerHTML,t=Z||ee,n=[],a=void 0;(a=t.exec(e))&&(n.push(a),!("sourceExtract"===f&&n.length>=J+1)););return n}();if(Object(u.a)("matches",te,Z,ee),"sourceSearch"===f)return{vars:A({},h,te.length)};if("sourceExtract"===f){return{vars:A({},h,function(e){return void 0!==e?e:"#nomatchfound"}((te[J]||[])[Q]))}}throw new Error("Impossible to reach here");case"visionLimitSearchArea":case"storeImage":var ne=void 0,ae=void 0;return"storeImage"===f?(ne=g,ae=h):"visionLimitSearchArea"===f&&(ne=g.trim().replace(/^element:/i,"").trim(),ae=O.d),function(e,n){return E(e).then((function(e){if(!n||!n.length)throw new Error("storeImage: 'value' is required as image name");var a=e.getBoundingClientRect();return(window.top===window?Promise.resolve({x:0,y:0}):(e.scrollIntoView(),Object(s.b)(window.parent,window,{action:"SOURCE_PAGE_OFFSET",data:{}}))).then((function(e){var r={x:e.x+a.x+Object(i.g)(document),y:e.y+a.y+Object(i.h)(document),width:a.width,height:a.height};return t.ask("CS_STORE_SCREENSHOT_IN_SELECTION",{rect:r,fileName:Object(o.ensureExtName)(".png",n),devicePixelRatio:window.devicePixelRatio}).then((function(){return{vars:{"!storedImageRect":r}}}))}))}))}(ne,ae);case"captureScreenshot":if(!g||!g.length)throw new Error("captureScreenshot: 'target' is required as file name");return t.ask("CS_CAPTURE_SCREENSHOT",{fileName:Object(o.ensureExtName)(".png",g)}).then((function(e){var t=e.fileName;return{screenshot:{url:e.url,name:t}}}));case"captureEntirePageScreenshot":if(!g||!g.length)throw new Error("captureEntirePageScreenshot: 'target' is required as file name");return t.ask("CS_CAPTURE_FULL_SCREENSHOT",{fileName:Object(o.ensureExtName)(".png",g)}).then((function(e){var t=e.fileName;return{screenshot:{url:e.url,name:t}}}));case"onDownload":return t.ask("CS_ON_DOWNLOAD",{fileName:g,wait:"true"===(h||"").trim(),timeout:1e3*v.timeoutDownload,timeoutForStart:1e3*Math.max(10,v.timeoutElement)});case"deleteAllCookies":return t.ask("CS_DELETE_ALL_COOKIES",{url:window.location.origin}).then((function(){return!0}));case"if":case"while":case"gotoIf":try{return{condition:window.eval(g)}}catch(e){throw new Error("Error in runEval condition of "+f+": "+e.message)}default:throw new Error("Command "+f+" not supported yet")}}},622:function(e,t,n){var a=n(623);"string"==typeof a&&(a=[[e.i,a,""]]);var r={transform:void 0};n(86)(a,r);a.locals&&(e.exports=a.locals)},623:function(e,t,n){(e.exports=n(85)(void 0)).push([e.i,"body{margin:0;padding:0;font-size:16px}*{-webkit-box-sizing:border-box;box-sizing:border-box}.app{position:absolute;top:0;bottom:0;left:0;right:0;-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}.app,.app .app-inner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}.app .app-inner{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row}.app.with-alert .backup-alert{display:block}.app .backup-alert{display:none;padding:5px 0;text-align:center;font-size:14px;background:#fdfdc2}.app .backup-alert .backup-actions{margin-left:20px}.app .backup-alert .backup-actions button{margin-right:10px}.app .content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:3;-ms-flex:3;flex:3;background:#fff;overflow-y:auto}",""])},633:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setRoute",(function(){return de})),n.d(a,"startRecording",(function(){return me})),n.d(a,"stopRecording",(function(){return pe})),n.d(a,"startInspecting",(function(){return fe})),n.d(a,"stopInspecting",(function(){return ge})),n.d(a,"startPlaying",(function(){return he})),n.d(a,"stopPlaying",(function(){return ve})),n.d(a,"doneInspecting",(function(){return be})),n.d(a,"appendCommand",(function(){return ye})),n.d(a,"duplicateCommand",(function(){return Ee})),n.d(a,"insertCommand",(function(){return we})),n.d(a,"updateCommand",(function(){return Ce})),n.d(a,"removeCommand",(function(){return Te})),n.d(a,"selectCommand",(function(){return xe})),n.d(a,"cutCommand",(function(){return Se})),n.d(a,"copyCommand",(function(){return _e})),n.d(a,"pasteCommand",(function(){return ke})),n.d(a,"normalizeCommands",(function(){return Oe})),n.d(a,"updateSelectedCommand",(function(){return Ie})),n.d(a,"setSourceError",(function(){return Ae})),n.d(a,"setSourceCurrent",(function(){return Ne})),n.d(a,"saveSourceCodeToEditing",(function(){return Pe})),n.d(a,"saveEditingAsExisted",(function(){return je})),n.d(a,"saveEditingAsNew",(function(){return Ve})),n.d(a,"setTestCases",(function(){return De})),n.d(a,"resetEditing",(function(){return Me})),n.d(a,"setEditing",(function(){return Re})),n.d(a,"editTestCase",(function(){return Le})),n.d(a,"editNewTestCase",(function(){return Fe})),n.d(a,"upsertTestCase",(function(){return Ue})),n.d(a,"addTestCases",(function(){return Be})),n.d(a,"renameTestCase",(function(){return Ke})),n.d(a,"removeTestCase",(function(){return Ye})),n.d(a,"removeCurrentTestCase",(function(){return Ge})),n.d(a,"duplicateTestCase",(function(){return $e})),n.d(a,"setPlayerState",(function(){return ze})),n.d(a,"setTimeoutStatus",(function(){return We})),n.d(a,"addPlayerErrorCommandIndex",(function(){return Xe})),n.d(a,"addLog",(function(){return He})),n.d(a,"clearLogs",(function(){return qe})),n.d(a,"addScreenshot",(function(){return Je})),n.d(a,"clearScreenshots",(function(){return Qe})),n.d(a,"addVision",(function(){return Ze})),n.d(a,"clearVisions",(function(){return et})),n.d(a,"updateConfig",(function(){return tt})),n.d(a,"updateTestCasePlayStatus",(function(){return nt})),n.d(a,"playerPlay",(function(){return at})),n.d(a,"listCSV",(function(){return rt})),n.d(a,"listScreenshots",(function(){return ot})),n.d(a,"listVisions",(function(){return it})),n.d(a,"setTestSuites",(function(){return st})),n.d(a,"addTestSuite",(function(){return ct})),n.d(a,"addTestSuites",(function(){return lt})),n.d(a,"updateTestSuite",(function(){return ut})),n.d(a,"removeTestSuite",(function(){return dt})),n.d(a,"setPlayerMode",(function(){return mt})),n.d(a,"runBackup",(function(){return pt})),n.d(a,"setVariables",(function(){return ft})),n.d(a,"updateUI",(function(){return gt})),n.d(a,"addBreakpoint",(function(){return ht})),n.d(a,"removeBreakpoint",(function(){return vt})),n.d(a,"setEditorActiveTab",(function(){return bt})),n.d(a,"preinstall",(function(){return yt}));var r=n(10),o=n.n(r),i=n(394),s=n.n(i),c=n(0),l=n.n(c),u=n(18),d=n.n(u),m=n(133),p=n(400),f=n.n(p),g=n(71),h=n(45),v=n.n(h),b=n(11),y=n.n(b),E=n(33),w=n.n(E),C=n(46),T=n(40),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S=function(e){return[e+"_REQUEST",e+"_SUCCESS",e+"_FAIL"]},_=function(e){return S(e).map((function(e){return O[e]}))},k=["START_RECORDING","STOP_RECORDING","START_INSPECTING","STOP_INSPECTING"].reduce((function(e,t){return S(t).forEach((function(t){e[t]=t})),e}),{}),O=x({},["SET_ROUTE","SET_EDITOR_ACTIVE_TAB","DONE_INSPECTING","UPDATE_BASE_URL","APPEND_COMMAND","DUPLICATE_COMMAND","INSERT_COMMAND","UPDATE_COMMAND","REMOVE_COMMAND","SELECT_COMMAND","CUT_COMMAND","COPY_COMMAND","PASTE_COMMAND","NORMALIZE_COMMANDS","UPDATE_SELECTED_COMMAND","SAVE_EDITING_AS_EXISTED","SAVE_EDITING_AS_NEW","SET_TEST_CASES","SET_EDITING","EDIT_TEST_CASE","EDIT_NEW_TEST_CASE","ADD_TEST_CASES","RENAME_TEST_CASE","REMOVE_TEST_CASE","UPDATE_TEST_CASE_STATUS","SET_PLAYER_STATE","SET_PLAYER_MODE","PLAYER_ADD_ERROR_COMMAND_INDEX","SET_TEST_SUITES","UPDATE_TEST_SUITE","ADD_BREAKPOINT","REMOVE_BREAKPOINT","ADD_LOGS","CLEAR_LOGS","ADD_SCREENSHOT","CLEAR_SCREENSHOTS","ADD_VISION","CLEAR_VISIONS","START_PLAYING","STOP_PLAYING","SET_CSV_LIST","SET_SCREENSHOT_LIST","SET_VISION_LIST","SET_VARIABLE_LIST","SET_SOURCE_ERROR","SET_SOURCE_CURRENT","UPDATE_CONFIG","UPDATE_UI"].reduce((function(e,t){return e[t]=t,e}),{}),k),I=n(2),A=n(17),N=n(31),P=n(5),j=n(66),V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D=(j.default.testCases,function(e){return Object(I.pick)(["cmd","target","value"],e)}),M=function(e){return Object(I.compose)(Object(I.on)("data"),Object(I.on)("commands"),I.map)(D)(e)},R=function(e){return function(t){return"open"!==t.cmd?t:V({},t,{target:(e+"/"+t.target).replace(/\/+/g,"/")})}},L=function(e){return e.baseUrl?Object(I.compose)(Object(I.on)("data"),Object(I.on)("commands"),I.map)(R(e.baseUrl))(e):e},F=n(403),U=n.n(F),B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},K=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Y={STRAIGHT:"STRAIGHT",SINGLE:"SINGLE",LOOP:"LOOP"},G={PLAYING:"PLAYING",PAUSED:"PAUSED",STOPPED:"STOPPED",ERROR:"ERROR"},$={COMPLETE:"COMPLETE",ERROR:"ERROR",MANUAL:"MANUAL"},z=function(e){return null==e},W={startUrl:null,startIndex:null,endIndex:null,nextIndex:null,errorIndex:null,doneIndices:[],mode:Y.STRAIGHT,resources:[],status:G.STOPPED},X=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=B({},W),!t)throw new Error("Player - constructor: must provide opts as 1st argument");if("function"!=typeof t.run)throw new Error("Player - constructor: must provide a run function");if("function"!=typeof t.prepare)throw new Error("Player - constructor: must provide a prepare function");if("function"!=typeof t.handleResult)throw new Error("Player - constructor: must provide a handleResult function");this.__run=t.run,this.__prepare=t.prepare,this.__handle=t.handleResult,this.__setState(n||{})}return K(e,[{key:"play",value:function(e){var t=this;if(!e)throw new Error("Player - play: config should not be empty");if(!e.mode||-1===Object.keys(Y).indexOf(e.mode))throw new Error("Player - play: must provide a valid mode, now it is "+e.mode);if(e.mode===Y.LOOP&&(!e.loopsStart||e.loopsStart<0||Math.floor(e.loopsStart)!==e.loopsStart||!e.loopsEnd||e.loopsEnd<e.loopsStart||Math.floor(e.loopsEnd)!==e.loopsEnd))throw new Error('Player - play: must provide a valid tuple of "loopsStart" and "loopsEnd" in loop mode, now it is '+e.loopsStart+", "+e.loopsEnd);if(!e.resources||!e.resources.length)throw new Error("Player - play: resources should not be empty");if(z(e.startIndex)||e.startIndex<0||e.startIndex>=e.resources.length)throw new Error("Player - play: startIndex out of range, now it is "+e.startIndex+", len: "+e.resources.length);if(!z(e.endIndex)&&(e.endIndex<0||e.endIndex>=e.resources.length))throw new Error("Player - play: endIndex out of range, now it is "+e.endIndex+", len: "+e.resources.length);var n=e.startIndex,a=e.startUrl,r=e.resources,o=e.title,i={title:o,extra:e.extra,startUrl:a,startIndex:n,endIndex:e.endIndex||r.length-1,nextIndex:n,errorIndex:null,doneIndices:[],mode:e.mode,loopsCursor:1,loopsStart:1,loopsEnd:1,resources:e.resources,breakpoints:e.breakpoints||[],status:G.PLAYING,public:e.public||{},callback:e.callback||function(){},lastPlayConfig:e};switch(["preDelay","postDelay"].forEach((function(t){z(e[t])||(i[t]=e[t])})),e.mode){case Y.STRAIGHT:this.__setState(B({},i));break;case Y.SINGLE:this.__setState(B({},i,{endIndex:n}));break;case Y.LOOP:this.__setState(B({},i,{loopsCursor:e.loopsStart,loopsStart:e.loopsStart,loopsEnd:e.loopsEnd}))}return this.emit("START",{title:o,loopsCursor:this.state.loopsCursor,extra:this.state.extra}),Promise.resolve().then((function(){return t.__prepare(t.state)})).then((function(){return t.__go(null,e.isStep)}),(function(e){return t.__errLog(e,e.errorIndex)}))}},{key:"pause",value:function(){this.__setState({status:G.PAUSED}),this.emit("PAUSED",{extra:this.state.extra})}},{key:"resume",value:function(e){this.__setState({status:G.PLAYING}),this.emit("RESUMED",{extra:this.state.extra}),this.__go(null,e)}},{key:"stop",value:function(e){this.__end($.MANUAL,e)}},{key:"stopWithError",value:function(e){this.__errLog(e)}},{key:"jumpTo",value:function(e){var t=this.state.resources;if(e<0||e>=t.length)throw new Error("jumpTo: nextIndex out of range");this.__setState({nextIndex:e})}},{key:"setPostDelay",value:function(e){this.__setState({postDelay:e})}},{key:"getStatus",value:function(){return this.state.status}},{key:"getState",value:function(){return B({},this.state)}},{key:"replayLastConfig",value:function(){var e=this.state.lastPlayConfig;if(!e)throw new Error("No last play config available");return this.play(e)}},{key:"__go",value:function(e,t){var n=this;if(null==e)this.token=e=Math.random();else if(e!==this.token)return;var a=function(t){return function(){if(e!==n.token)throw new Error("token expired");return t.apply(void 0,arguments)}},r=this.state,o=(r.resources,r.nextIndex,r.preDelay);return(o>0?this.__delay((function(){}),o):Promise.resolve()).then((function(){return n.__shouldContinue()})).then((function(r){var o=r.paused;if(r.stopped)return n.__end($.COMPLETE);if(!o){var i=n.state,s=i.resources,c=i.nextIndex,l=i.startIndex,u=i.loopsCursor,d=i.loopsStart,m=i.loopsEnd;if(c===l){var p={loopsCursor:u,index:c,currentLoop:u-d+1,loops:m-d+1,resource:s[c],extra:n.state.extra};n.emit("LOOP_START",p),u!==d&&n.emit("LOOP_RESTART",p)}return n.emit("TO_PLAY",{index:c,currentLoop:u-d+1,loops:m-d+1,resource:s[c],extra:n.state.extra}),void 0===n.state.lastBreakpoint&&-1!==n.state.breakpoints.indexOf(c)?(n.__setState({lastBreakpoint:c}),n.emit("BREAKPOINT",{index:c,currentLoop:u-d+1,loops:m-d+1,resource:s[c],extra:n.state.extra}),n.pause()):(n.__setState({lastBreakpoint:void 0}),n.__run(s[c],n.state).then(a((function(r){return n.__handle(r,s[c],n.state).then(a((function(e){var t=n.state.loopsCursor;return n.__setNext(e),n.emit("PLAYED_LIST",{indices:n.state.doneIndices,extra:n.state.extra}),t!==n.state.loopsCursor}))).then((function(e){var t=n.state.postDelay,a=Math.max(t,e?10:0);return a>0?n.__delay((function(){}),a):Promise.resolve()})).then((function(){return t?n.pause():n.__go(e)}))}))).catch(a((function(e){return n.__errLog(e)}))))}}))}},{key:"__shouldContinue",value:function(){var e=this.state,t=e.status,n=(e.mode,e.nextIndex),a=e.startIndex,r=e.endIndex,o=void 0;return o=t===G.PLAYING&&n>=a&&n<=r?{paused:!1,stopped:!1}:t===G.PAUSED?{paused:!0}:{stopped:!0},Promise.resolve(o)}},{key:"__end",value:function(e,t){if(this.state.status!==G.STOPPED){if(-1===Object.keys($).indexOf(e))throw new Error("Player - __end: invalid reason, "+e);t&&t.silent||(this.emit("END",{opts:t,reason:e,extra:this.state.extra}),e!==$.ERROR&&this.state.callback(null,e)),this.__setState(W)}}},{key:"__errLog",value:function(e,t){this.state.status!==G.STOPPED&&(this.emit("ERROR",{errorIndex:void 0!==t?t:this.state.nextIndex,msg:e&&e.message,extra:this.state.extra,restart:!!e.restart}),this.state.callback(e,null),this.__end($.ERROR))}},{key:"__setNext",value:function(e){if(void 0!==e&&(e<0||e>this.state.resources.length))throw new Error("invalid nextIndexPassed "+e);var t=this.state,n=t.mode,a=t.doneIndices,r=t.nextIndex,o=t.endIndex,i=t.startIndex,s=t.loopsCursor,c=t.loopsEnd,l=void 0!==e?e:r+1,u=-1===a.indexOf(r)?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a),[r]):a,d=s,m=null;n===Y.LOOP?l<=o||s>=c?m=l:(d+=1,m=i,u=[]):m=l,this.__setState({loopsCursor:d,nextIndex:m,doneIndices:u})}},{key:"__setState",value:function(e){this.state=B({},this.state,e)}},{key:"__delay",value:function(e,t){var n=this,a=0,r=setInterval((function(){a+=1e3,n.emit("DELAY",{extra:n.state.extra,total:t,past:a})}),1e3);return Object(I.delay)(e,t).then((function(e){return r&&clearInterval(r),e}))}}]),e}();U()(X.prototype),X.C=X.prototype.C={MODE:Y,STATUS:G,END_REASON:$};var H={},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e.name||"testCase";if(delete e.name,Object.keys(e).length>0&&(H[n]=new X(e,t)),!H[n])throw new Error("player not initialized");return H[n]},J=n(77),Q=n.n(J),Z=n(38),ee=n(48);var te=n(4),ne={DemoAutofill:{CreationDate:"2018-02-18",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"store",Target:"15",Value:"!TIMEOUT_WAIT"},{Command:"store",Target:"60",Value:"!TIMEOUT_PAGELOAD"},{Command:"open",Target:"https://docs.google.com/forms/d/e/1FAIpQLScPXRMtYI_KYL8J6fivHUV0hQKB7j1RtqTrBBUtEr8VMmyCqw/viewform",Value:""},{Command:"click",Target:"css=span.docssharedWizToggleLabeledLabelText.exportLabel.freebirdFormviewerViewItemsRadioLabel",Value:""},{Command:"click",Target:"css=div.quantumWizTogglePaperradioEl.docssharedWizToggleLabeledControl.freebirdThemedRadio.freebirdThemedRadioDarkerDisabled.freebirdFormviewerViewItemsRadioControl",Value:""},{Command:"click",Target:"css=div.quantumWizTogglePapercheckboxInnerBox.exportInnerBox",Value:""},{Command:"click",Target:'//*[@id="mG61Hd"]/div/div[2]/div[2]/div[2]/div[2]/div[2]/div/label/div/div[1]/div[2]',Value:""},{Command:"click",Target:'//*[@id="mG61Hd"]/div/div[2]/div[2]/div[2]/div[2]/div[3]/div/label/div/div[1]/div[2]',Value:""},{Command:"click",Target:"css=content.quantumWizMenuPaperselectContent.exportContent",Value:""},{Command:"click",Target:'//*[@id="mG61Hd"]/div/div[2]/div[2]/div[3]/div[2]/div[2]/div[4]/content',Value:""},{Command:"captureScreenshot",Target:"AutoFill1stPage${!LOOP}",Value:""},{Command:"clickAndWait",Target:"css=span.quantumWizButtonPaperbuttonLabel.exportLabel",Value:""},{Command:"click",Target:"name=entry.1572386418",Value:""},{Command:"type",Target:"name=entry.1572386418",Value:"This is a single line test..."},{Command:"click",Target:"name=entry.1569542411",Value:""},{Command:"type",Target:"name=entry.1569542411",Value:"...and this a multiline test:\nLine2\nLine3"},{Command:"captureScreenshot",Target:"AutoFill2ndPage${!LOOP}",Value:""},{Command:"pause",Target:"1000",Value:""},{Command:"clickAndWait",Target:'//*[@id="mG61Hd"]/div/div[2]/div[3]/div[1]/div[1]/div[2]/div[2]',Value:""},{Command:"captureScreenshot",Target:"AutoFill3rdPage${!LOOP}",Value:""},{Command:"echo",Target:"DemoAutofill macro completed (shown as notifcation because of #shownotification in the 3rd column)",Value:"#shownotification"}]},DemoCanvas:{CreationDate:"2018-6-26",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"open",Target:"https://a9t9.com/kantu/demo/canvas",Value:""},{Command:"clickAndWait",Target:"link=LiterallyCanvas",Value:""},{Command:"comment",Target:"First a simple clickAt demo (3 dots)",Value:""},{Command:"clickAt",Target:'//*[@id="literally-canvas"]/div[1]/div[1]/canvas[2]',Value:"28,28"},{Command:"clickAt",Target:'//*[@id="literally-canvas"]/div[1]/div[1]/canvas[2]',Value:"58,28"},{Command:"clickAt",Target:'//*[@id="literally-canvas"]/div[1]/div[1]/canvas[2]',Value:"88,28"},{Command:"comment",Target:"Just image search the canvas!",Value:"88,28"},{Command:"visionLimitSearchArea",Target:'element://*[@id="literally-canvas"]/div[1]/div[1]/canvas[2]',Value:""},{Command:"visualVerify",Target:"canvas_3dots_verify_dpi_96.png",Value:""},{Command:"open",Target:"https://a9t9.com/kantu/demo/canvas",Value:""},{Command:"clickAndWait",Target:"link=Mapbox",Value:""},{Command:"comment",Target:"Test: Embedded map (Mapbox)",Value:""},{Command:"selectFrame",Target:"id=demo",Value:""},{Command:"visionLimitSearchArea",Target:"viewport",Value:""},{Command:"visualAssert",Target:"canvas_wyoming_dpi_96.png@0.60",Value:""},{Command:"clickAt",Target:"#efp",Value:""},{Command:"comment",Target:"Now verify that the click (= the map) works as expected",Value:""},{Command:"visualVerify",Target:"canvas_wyoming_verify_dpi_96.png@0.5",Value:""},{Command:"comment",Target:"Test Google Maps: Find & click Hyde park, and check that its info bubble shows.",Value:""},{Command:"open",Target:"https://a9t9.com/kantu/demo/canvas#maps",Value:""},{Command:"visionLimitSearchArea",Target:"viewport",Value:""},{Command:"visualAssert",Target:"canvas_hydepark_dpi_96.png@0.70",Value:""},{Command:"selectFrame",Target:"index=0",Value:""},{Command:"clickAt",Target:"#efp",Value:""},{Command:"comment",Target:"Now verify that the click (= the map) works as expected",Value:""},{Command:"visualVerify",Target:"canvas_hydepark_verify_dpi_96.png@0.70",Value:""}]},DemoComputerVision:{CreationDate:"2018-5-31",Commands:[{Command:"open",Target:"https://ocr.space/",Value:""},{Command:"comment",Target:"OCR.space is our own OCR API service, this demo is a test that our QA uses internally, too :-)",Value:""},{Command:"comment",Target:'Verify the 3rd party "Share" banner shows',Value:""},{Command:"store",Target:"true",Value:"!errorignore"},{Command:"visualSearch",Target:"democv_share.png@0.50",Value:"matches"},{Command:"if",Target:"${matches} == 0",Value:""},{Command:"echo",Target:'Browser width too small for "share" banner to show',Value:"blue"},{Command:"endif",Target:"",Value:""},{Command:"store",Target:"false",Value:"!errorignore"},{Command:"type",Target:"id=imageUrl",Value:"https://a9t9.com/Content/Images/kantu-chrome-loop.png"},{Command:"select",Target:"id=ocrLanguage",Value:"label=English"},{Command:"comment",Target:'viewport is default, but we add it here for test. Try "full" to see the differenc',Value:"label=English"},{Command:"visionLimitSearchArea",Target:"viewport",Value:""},{Command:"comment",Target:'we could use "click link=Start OCR!" but we use the image of the button instead',Value:""},{Command:"visualAssert",Target:"democv_startocr.png@0.60",Value:""},{Command:"comment",Target:'#efp is short for "#ElementFromPoint (${imageX},(${imageY})',Value:""},{Command:"click",Target:"#efp",Value:""},{Command:"comment",Target:"Wait for OCR to be completed",Value:""},{Command:"store",Target:"30",Value:"!timeout_wait"},{Command:"visualAssert",Target:"democv_ocrdone.png",Value:""},{Command:"store",Target:"10",Value:"!timeout_wait"},{Command:"click",Target:"link=Show Overlay",Value:""},{Command:"comment",Target:"Visually verify that the overlay is correct",Value:""},{Command:"visualAssert",Target:"democv_checkoverlay.png@0.60",Value:""}]},DemoDialogboxes:{CreationDate:"2018-02-15",Commands:[{Command:"open",Target:"https://a9t9.com/kantu/demo/storeeval",Value:""},{Command:"type",Target:"id=sometext",Value:"Start..."},{Command:"click",Target:'//*[@id="content"]/div[2]/div/p[3]/button[1]',Value:""},{Command:"echo",Target:"Kantu IDE closes dialog boxes automatially. You need assertAlert (etc) only to verify expected texts.",Value:""},{Command:"assertAlert",Target:"Hello\\nHow are you?",Value:""},{Command:"click",Target:'//*[@id="content"]/div[2]/div/p[3]/button[2]',Value:""},{Command:"assertConfirmation",Target:"Press a button!",Value:""},{Command:"answerOnNextPrompt",Target:"I am Kantu for Chrome...",Value:""},{Command:"click",Target:'//*[@id="content"]/div[2]/div/p[3]/button[3]',Value:""},{Command:"assertPrompt",Target:"Please enter your name",Value:""},{Command:"type",Target:"id=sometext",Value:"Done!"}]},DemoDragDrop:{CreationDate:"2017-10-18",Commands:[{Command:"open",Target:"https://a9t9.com/demo/webtest/dragdrop/",Value:""},{Command:"echo",Target:"Reduce replay speed so we can better see what is going on...",Value:""},{Command:"store",Target:"medium",Value:"!replayspeed"},{Command:"dragAndDropToObject",Target:"id=one",Value:"id=bin"},{Command:"dragAndDropToObject",Target:"id=two",Value:"id=bin"},{Command:"dragAndDropToObject",Target:"id=three",Value:"id=bin"},{Command:"dragAndDropToObject",Target:"id=four",Value:"id=bin"},{Command:"dragAndDropToObject",Target:"id=five",Value:"id=bin"}]},DemoDownload:{CreationDate:"2018-2-25",Commands:[{Command:"store",Target:"200",Value:"!timeout_download"},{Command:"store",Target:"10",Value:"!timeout_wait"},{Command:"storeEval",Target:"var d=new Date(); d.getFullYear() + '-' +((d.getMonth()+1))+'-' +d.getDate();",Value:"todaydate"},{Command:"echo",Target:"Today is ${todaydate}",Value:""},{Command:"open",Target:"https://a9t9.com/kantu/demo/filedownload",Value:""},{Command:"onDownload",Target:"KantuTest1_${todaydate}.exe",Value:"true"},{Command:"store",Target:"${!runtime}",Value:"starttime"},{Command:"click",Target:"link=USA (East coast)*",Value:""},{Command:"storeEval",Target:'parseFloat("${!runtime}")-parseFloat("${starttime}")',Value:"downloadtime"},{Command:"echo",Target:"Download1 (USA) took ${downloadtime} seconds",Value:"blue"},{Command:"onDownload",Target:"KantuTest2_${todaydate}.exe",Value:"true"},{Command:"store",Target:"${!runtime}",Value:"starttime"},{Command:"click",Target:"link=*Asia*",Value:""},{Command:"storeEval",Target:'parseFloat("${!runtime}")-parseFloat("${starttime}")',Value:"downloadtime"},{Command:"echo",Target:"Download2 (Asia) took ${downloadtime} seconds",Value:"green"},{Command:"echo",Target:"All done...",Value:""},{Command:"clickAndWait",Target:"link=OnDownload command",Value:""}]},DemoExtract:{CreationDate:"2018-05-28",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"open",Target:"https://a9t9.com/kantu/demo/storeeval",Value:""},{Command:"echo",Target:"Current page URL = ${!URL}",Value:""},{Command:"echo",Target:"Current loop value = ${!LOOP}",Value:""},{Command:"echo",Target:"This macro shows various methods to extract and save data from a website",Value:""},{Command:"storeAttribute",Target:"css=img.responsive-img@src",Value:"mylink"},{Command:"echo",Target:"href=${mylink}",Value:""},{Command:"storeAttribute",Target:"css=img.responsive-img@alt",Value:"myalttext"},{Command:"echo",Target:"alt text = ${myalttext}",Value:""},{Command:"storeAttribute",Target:"//input[@id='sometext']@size",Value:"boxsize"},{Command:"echo",Target:"input box size =${boxsize}",Value:""},{Command:"type",Target:"id=sometext",Value:"This box is ${boxsize} chars wide"},{Command:"storeEval",Target:"document.title = ${boxsize};",Value:""},{Command:"assertTitle",Target:"70",Value:""},{Command:"click",Target:'//*[@id="content"]/div[2]/div/h2[3]',Value:""},{Command:"storeText",Target:'//*[@id="content"]/div[2]/div/h2[3]',Value:"myheader"},{Command:"echo",Target:"header = ${myheader}",Value:""},{Command:"storeTitle",Target:"",Value:"mytitle"},{Command:"echo",Target:"page title = ${mytitle}",Value:""},{Command:"echo",Target:"page title = ${mytitle}",Value:""},{Command:"echo",Target:"page title = ${mytitle}",Value:""},{Command:"echo",Target:"page title = ${mytitle}",Value:""},{Command:"echo",Target:"Now test some extraction with storeValue",Value:""},{Command:"storeValue",Target:"id=sometext",Value:"mytext"},{Command:"select",Target:"id=tesla",Value:"label=Model Y"},{Command:"storeValue",Target:"id=tesla",Value:"mytesla"},{Command:"echo",Target:"The text box contains [${mytext}] and the select box has the value [${mytesla}] selected",Value:""},{Command:"verifyValue",Target:"id=tesla",Value:"y"},{Command:"storeChecked",Target:"name=vehicle",Value:"hasbike"},{Command:"storeChecked",Target:"xpath=(//input[@name='vehicle'])[2]",Value:"hascar"},{Command:"storeChecked",Target:"xpath=(//input[@name='vehicle'])[3]",Value:"hasboat"},{Command:"echo",Target:"User has bike:${hasbike}, car:${hascar}, boat:${hasboat}",Value:"green"},{Command:"comment",Target:"Search and extract directly from the page SOURCE",Value:"y"},{Command:"sourceExtract",Target:"regex=[\\$\\\\](\\d+(?:\\.\\d{1,2})?)",Value:"match1"},{Command:"sourceExtract",Target:"regex=[\\$\\\\](\\d+(?:\\.\\d{1,2})?)@2",Value:"match2"},{Command:"comment",Target:"You can also extract without regex with the * symbol",Value:"match2b"},{Command:"sourceExtract",Target:"$*<",Value:"match2b"},{Command:"echo",Target:"Coffee costs ${match1} and tea ${match2}",Value:"blue"},{Command:"sourceExtract",Target:"regex=_width: (\\d+)",Value:"match1"},{Command:"sourceExtract",Target:"regex=_width: (\\d+)@1,1",Value:"match1group1"},{Command:"sourceExtract",Target:"regex=_width: (\\d+)@2",Value:"match2"},{Command:"sourceExtract",Target:"regex=_width: (\\d+)@2,1",Value:"match2group1"},{Command:"echo",Target:"match1 = [${MATCH1}] (group1 = [${match1group1}]) match2 =  [${MATCH2}]  (group1 = [${MATCH2GROUP1}])",Value:"blue"},{Command:"comment",Target:"Extract Google Analytics ID",Value:""},{Command:"sourceExtract",Target:"UA-*,",Value:"ga_option1"},{Command:"sourceExtract",Target:"regex=UA-[0-9]+-[0-9]+",Value:"ga_option2"},{Command:"echo",Target:"Google Analytics ID = ${ga_option2}",Value:"pink"},{Command:"comment",Target:"Some assertion test for QA",Value:""},{Command:"if",Target:"${match2group1} != 22",Value:""},{Command:"throwError",Target:"Regex Extraction failed for Match2(1):  ${match2group1}",Value:""},{Command:"endif",Target:"",Value:""},{Command:"echo",Target:"Last but not least, taking a screenshot is another way to extract data",Value:""},{Command:"captureScreenshot",Target:"myscreenshot_${mytitle}",Value:""},{Command:"storeImage",Target:'//*[@id="page-header"]/div/div/h1',Value:"pagetitle.png"},{Command:"comment",Target:"Export images to download folder",Value:""},{Command:"localStorageExport",Target:"myscreenshot_${mytitle}.png",Value:""},{Command:"localStorageExport",Target:"pagetitle.png",Value:""}]},DemoFrames:{CreationDate:"2017-10-16",Commands:[{Command:"open",Target:"https://a9t9.com/demo/webtest/frames/",Value:""},{Command:"echo",Target:"Reduce replay speed so we can better see what is going on...",Value:""},{Command:"store",Target:"medium",Value:"!replayspeed"},{Command:"selectFrame",Target:"index=0",Value:""},{Command:"click",Target:"name=mytext1",Value:""},{Command:"type",Target:"name=mytext1",Value:"Frame1 (index=0)"},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"selectFrame",Target:"index=1",Value:""},{Command:"click",Target:"name=mytext2",Value:""},{Command:"type",Target:"name=mytext2",Value:"Frame2 (index=1)"},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"selectFrame",Target:"index=2",Value:""},{Command:"click",Target:"name=mytext3",Value:""},{Command:"type",Target:"name=mytext3",Value:"Frame3 (index=2)"},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"selectFrame",Target:"index=3",Value:""},{Command:"click",Target:"name=mytext4",Value:""},{Command:"type",Target:"name=mytext4",Value:"Frame4 (index=3)"},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"selectFrame",Target:"index=4",Value:""},{Command:"click",Target:"name=mytext5",Value:""},{Command:"type",Target:"name=mytext5",Value:"Frame5 (index=4)"},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"selectFrame",Target:"index=2",Value:""},{Command:"type",Target:"name=mytext3",Value:"now testing iframe inside this frame"},{Command:"selectFrame",Target:"index=0",Value:""},{Command:"click",Target:'//*[@id="mG61Hd"]/div/div[2]/div[2]/div[1]/div[2]/div/content/div/div/label/div/div[1]/div[3]/div',Value:""},{Command:"click",Target:"css=input.quantumWizTextinputSimpleinputInput.exportInput",Value:""},{Command:"type",Target:"css=input.quantumWizTextinputSimpleinputInput.exportInput",Value:"iframe in frame: works!"},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"selectFrame",Target:"index=2",Value:""},{Command:"type",Target:"name=mytext3",Value:"Test completed!"}]},DemoTakeScreenshots:{CreationDate:"2018-1-25",Commands:[{Command:"open",Target:"https://a9t9.com/blog/",Value:""},{Command:"captureEntirePageScreenshot",Target:"a9t9blog",Value:""},{Command:"clickAndWait",Target:"link=read more@POS=1",Value:""},{Command:"captureEntirePageScreenshot",Target:"article1",Value:""},{Command:"open",Target:"https://a9t9.com/blog/",Value:""},{Command:"clickAndWait",Target:"link=read more@POS=2",Value:""},{Command:"captureEntirePageScreenshot",Target:"article2",Value:""},{Command:"captureScreenshot",Target:"article2_just_viewport",Value:""},{Command:"comment",Target:"take screenshot of an _element_ with storeImage",Value:""},{Command:"storeImage",Target:"link=The Autonomous Technology (A9T9) Blog",Value:"blogtitle"}]},DemoIfElse:{CreationDate:"2018-4-28",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"open",Target:"https://a9t9.com/kantu/demo/storeeval",Value:""},{Command:"echo",Target:"How to use gotoIf and label(s) for flow control. For a while/endWhile demo, see the DemoSaveCSV macro.",Value:""},{Command:"storeEval",Target:"(new Date().getHours())",Value:"mytime"},{Command:"echo",Target:"mytime = ${mytime}",Value:""},{Command:"if",Target:"${mytime}  > 16",Value:""},{Command:"echo",Target:"Good afternoon!",Value:""},{Command:"else",Target:"",Value:""},{Command:"echo",Target:"Good morning!",Value:""},{Command:"endif",Target:"",Value:""},{Command:"store",Target:"true",Value:"!errorignore"},{Command:"storeAttribute",Target:"//input[@id='sometext-WRONG-ID-TEST']@size",Value:"boxsize"},{Command:"if",Target:"${!LastCommandOK}",Value:""},{Command:"echo",Target:"Boxsize is ${boxsize}",Value:""},{Command:"else",Target:"",Value:""},{Command:"storeAttribute",Target:"//input[@id='sometext']@size",Value:"boxsize"},{Command:"echo",Target:"Old ID not found, with new ID we have: Boxsize = ${boxsize}",Value:""},{Command:"endif",Target:"",Value:""},{Command:"store",Target:"false",Value:"!errorignore"},{Command:"echo",Target:"input box size =${boxsize}",Value:""},{Command:"gotoIf",Target:"${boxsize} > 70",Value:"BOX-TOO-BIG"},{Command:"type",Target:"id=sometext",Value:"This box is ${boxsize} chars wide"},{Command:"storeEval",Target:"document.title = ${boxsize};",Value:""},{Command:"gotoLabel",Target:"END",Value:""},{Command:"label",Target:"BOX-TOO-BIG",Value:""},{Command:"echo",Target:"Input box too big. This is just a test of gotoIf",Value:""},{Command:"storeEval",Target:'document.title = "Just a gotoIf test. This line should not be reached unless you edit the macro"',Value:""},{Command:"label",Target:"END",Value:""},{Command:"echo",Target:"test case completed",Value:""},{Command:"comment",Target:"",Value:""},{Command:"onError",Target:"#goto",Value:"fixerror"},{Command:"type",Target:"id=sometext",Value:"this line works"},{Command:"type",Target:"id=sometextXXXXX",Value:"this line has the wrong ID..."},{Command:"echo",Target:"this line is never reached, because of the error above",Value:"blue"},{Command:"gotoLabel",Target:"end-part2",Value:""},{Command:"label",Target:"fixerror",Value:""},{Command:"echo",Target:"here we can have code that handles the error..",Value:"green"},{Command:"type",Target:"id=sometext",Value:"Fix Error Section: This command works."},{Command:"label",Target:"end-part2",Value:""}]},DemoIframe:{CreationDate:"2018-4-28",Commands:[{Command:"open",Target:"https://a9t9.com/kantu/demo/iframes",Value:""},{Command:"click",Target:'//*[@id="content"]/div[2]/div/p[1]',Value:""},{Command:"click",Target:'//*[@id="content"]/div[2]/div/h2[1]',Value:""},{Command:"comment",Target:"First iframe: Embedded Google Doc",Value:""},{Command:"selectFrame",Target:"index=0",Value:""},{Command:"click",Target:'//*[@id="mG61Hd"]/div/div[2]/div[2]/div[1]/div[2]/div/content/div/div/label/div/div[1]/div[3]/div',Value:""},{Command:"click",Target:"css=input.quantumWizTextinputSimpleinputInput.exportInput",Value:""},{Command:"type",Target:"css=input.quantumWizTextinputSimpleinputInput.exportInput",Value:"hello iframe"},{Command:"click",Target:"css=div.quantumWizTogglePapercheckboxInnerBox.exportInnerBox",Value:""},{Command:"click",Target:'//*[@id="mG61Hd"]/div/div[2]/div[2]/div[2]/div[2]/div[2]/div/label/div/div[1]/div[2]',Value:""},{Command:"click",Target:'//*[@id="mG61Hd"]/div/div[2]/div[2]/div[2]/div[2]/div[3]/div/label/div/div[1]/div[2]',Value:""},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"comment",Target:"Second iframe: Embedded Youtube Video",Value:""},{Command:"selectFrame",Target:"index=1",Value:""},{Command:"click",Target:"css=button.ytp-large-play-button.ytp-button",Value:""},{Command:"selectFrame",Target:"relative=top",Value:""},{Command:"comment",Target:"Third iframe: Embedded Twitter + click links that open new tabs, then switch to them",Value:""},{Command:"selectFrame",Target:"id=twitter-widget-0",Value:""},{Command:"click",Target:"link=@A9T9_com",Value:""},{Command:"pause",Target:"2000",Value:""},{Command:"selectWindow",Target:"tab=1",Value:""},{Command:"click",Target:"link=a9t9.com",Value:""},{Command:"comment",Target:"Wait for tab to open",Value:""},{Command:"pause",Target:"2000",Value:""},{Command:"selectWindow",Target:"tab=2",Value:""},{Command:"clickAndWait",Target:"link=Kantu Sel. IDE - Docs",Value:""}]},DemoImplicitWaiting:{CreationDate:"2018-4-28",Commands:[{Command:"comment",Target:"WaitForVisible is not part of implicit waiting",Value:""},{Command:"open",Target:"https://a9t9.com/kantu/demo/waitforvisible",Value:""},{Command:"waitForVisible",Target:"css=#div1 > h1",Value:""},{Command:"click",Target:"css=#div1 > h1",Value:""},{Command:"store",Target:"20",Value:"!timeout_wait"},{Command:"waitForVisible",Target:"css=#div2 > h1",Value:""},{Command:"click",Target:"css=#div2 > h1",Value:""},{Command:"comment",Target:"Implicit waiting: Wait for elements to be loaded  or <timeout_wait> is reached",Value:""},{Command:"open",Target:"https://a9t9.com/demo/webtest/implicitwaiting/",Value:""},{Command:"store",Target:"15",Value:"!TIMEOUT_WAIT"},{Command:"assertText",Target:"/html/body/header/center/p[2]",Value:"Use the select box to start the timer..."},{Command:"select",Target:"id=minutesSelect",Value:"label=5 Seconds"},{Command:"echo",Target:"The next element (target) is not available yet... Kantu waits for it up to ${!TIMEOUT_WAIT} seconds to appear.",Value:"blue"},{Command:"click",Target:"/html/body/header/center/img",Value:""}]},DemoCsvReadWithLoop:{CreationDate:"2017-11-23",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"comment",Target:"The file ReadCSVTestData.csv is pre-installed with Kantu.",Value:""},{Command:"csvRead",Target:"ReadCSVTestData.csv",Value:""},{Command:"open",Target:"https://docs.google.com/forms/d/e/1FAIpQLScGWVjexH2FNzJqPACzuzBLlTWMJHgLUHjxehtU-2cJxtu6VQ/viewform",Value:""},{Command:"type",Target:"name=entry.933434489",Value:"${!COL1}"},{Command:"type",Target:"name=entry.2004105717",Value:"${!COL2}"},{Command:"type",Target:"name=entry.1382578664",Value:"${!COL3}"},{Command:"clickAndWait",Target:'//*[@id="mG61Hd"]/div/div[2]/div[3]/div[1]/div/div/content/span',Value:""}]},DemoCsvReadWithWhile:{CreationDate:"2018-1-25",Commands:[{Command:"store",Target:"180",Value:"!timeout_macro"},{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"comment",Target:"The file ReadCSVTestData.csv is pre-installed with Kantu.",Value:""},{Command:"csvRead",Target:"ReadCSVTestData.csv",Value:""},{Command:"echo",Target:"Status = ${!csvReadStatus}, line = ${!csvReadLineNumber}",Value:""},{Command:"while",Target:'"${!csvReadStatus}" == "OK"',Value:""},{Command:"echo",Target:"status = ${!csvReadStatus}, line = ${!csvReadLineNumber}",Value:""},{Command:"open",Target:"https://docs.google.com/forms/d/e/1FAIpQLScGWVjexH2FNzJqPACzuzBLlTWMJHgLUHjxehtU-2cJxtu6VQ/viewform",Value:""},{Command:"type",Target:"name=entry.933434489",Value:"${!COL1}_${!csvReadLineNumber}"},{Command:"type",Target:"name=entry.2004105717",Value:"${!COL2}"},{Command:"type",Target:"name=entry.1382578664",Value:"${!COL3}"},{Command:"clickAndWait",Target:'//*[@id="mG61Hd"]/div/div[2]/div[3]/div[1]/div/div/content/span',Value:""},{Command:"storeEval",Target:"${!csvReadLineNumber}+1",Value:"!csvReadLineNumber"},{Command:"store",Target:"true",Value:"!errorIgnore"},{Command:"echo",Target:"Reading CSV line No.  ${!csvReadLineNumber} ",Value:"!errorIgnore"},{Command:"csvRead",Target:"ReadCSVTestData.csv",Value:""},{Command:"store",Target:"false",Value:"!errorIgnore"},{Command:"endWhile",Target:"",Value:""}]},DemoCsvSave:{CreationDate:"2018-06-01",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"open",Target:"https://a9t9.com/kantu/demo/csvsave",Value:""},{Command:"storeEval",Target:'new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+new Date().getDate()+" "+ new Date().getHours()+":" + new Date().getMinutes() + ":" + new Date().getSeconds()',Value:"timestamp"},{Command:"store",Target:"${timestamp}",Value:"!csvLine"},{Command:"echo",Target:"First column in the CSV is time (${timestamp})",Value:""},{Command:"echo",Target:"Set i = 1 as we start the extraction with the 2nd table cell.",Value:""},{Command:"store",Target:"1",Value:"i"},{Command:"while",Target:"(${i} < 8)",Value:""},{Command:"storeEval",Target:"${i}+1",Value:"i"},{Command:"echo",Target:"Current value of i = ${i}",Value:"i"},{Command:"storeText",Target:'//*[@id="gcw_mainFNGP5XSu6"]/div[2]/table/tbody/tr[2]/td[${i}]/a',Value:"c2"},{Command:"store",Target:"${c2}",Value:"!csvLine"},{Command:"echo",Target:"Extracted Value for i=${i} is exchange rate = ${c2}",Value:""},{Command:"endWhile",Target:"",Value:""},{Command:"echo",Target:"${!csvLine}",Value:""},{Command:"comment",Target:"Append content of !csvLine to CSV file (or create file if none exists)",Value:""},{Command:"csvSave",Target:"CurrencyConverterData",Value:""},{Command:"comment",Target:"If needed, you can download (save) the CSV data from the CSV tab to the the download folder",Value:""},{Command:"localStorageExport",Target:"currencyconverterdata.csv",Value:""}]},DemoStoreEval:{CreationDate:"2018-4-28",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"open",Target:"https://a9t9.com/kantu/demo/storeeval",Value:""},{Command:"assertText",Target:'//*[@id="content"]/div[2]/div/h2[1]',Value:"Input box to display some results"},{Command:"verifyText",Target:'//*[@id="content"]/div[2]/div/h2[1]',Value:"Input box to display some results"},{Command:"verifyTitle",Target:"Selenium IDE store, storeEval, Demo Page",Value:""},{Command:"assertTitle",Target:"Selenium IDE store, storeEval, Demo Page",Value:""},{Command:"echo",Target:"storeEVAL can run Javascript... and store the result in a variable (optional)",Value:""},{Command:"storeEval",Target:'document.title = "123";',Value:""},{Command:"assertTitle",Target:"123",Value:""},{Command:"comment",Target:"Use sourceSearch to assert we have the right Google Analytics Code",Value:""},{Command:"sourceSearch",Target:"UA-86195842-1",Value:"matches"},{Command:"if",Target:"${matches} == 0",Value:""},{Command:"throwError",Target:"Google Analytics ID is wrong!",Value:""},{Command:"endif",Target:"",Value:""},{Command:"echo",Target:"First some basic calculations with STORE",Value:""},{Command:"store",Target:"15",Value:"AAA"},{Command:"store",Target:"10",Value:"BBB"},{Command:"storeEval",Target:"storedVars['AAA']-storedVars['BBB']",Value:"CCC"},{Command:"echo",Target:"${CCC}",Value:""},{Command:"storeEval",Target:'document.title = "${CCC}";',Value:""},{Command:"assertTitle",Target:"5",Value:""},{Command:"echo",Target:"storedVars gives access to VARIABLE, ${...} to VALUE",Value:""},{Command:"store",Target:"SELenium IDe",Value:"AAA"},{Command:"storeEval",Target:"storedVars['AAA'].toUpperCase()",Value:"CCC"},{Command:"echo",Target:"${CCC}",Value:""},{Command:"type",Target:"id=sometext",Value:"${CCC}"},{Command:"echo",Target:"Generate TODAYs date in in YYYY-MM-DD format ",Value:""},{Command:"storeEval",Target:'var d= new Date(); var m=((d.getMonth()+1)<10)?\'0\'+(d.getMonth()+1):(d.getMonth()+1); d.getFullYear()+"-"+m+"-"+d.getDate();',Value:"mydate"},{Command:"echo",Target:"Today is ${mydate}",Value:""},{Command:"echo",Target:"Pick a random item from a list, useful for data-driven testing",Value:""},{Command:"storeEval",Target:"new Array ('cat','dog','fish','dog','??','frog','?','dog','??','horse','??elephant')",Value:"names"},{Command:"storeEval",Target:"storedVars['names'].length",Value:"length"},{Command:"echo",Target:"array length = ${length}",Value:""},{Command:"storeEval",Target:"Math.floor(Math.random()*storedVars['length'])",Value:"num"},{Command:"echo",Target:"num=${num}",Value:""},{Command:"echo",Target:"The next command picks the random item",Value:""},{Command:"storeEval",Target:"storedVars['names'][${num}]",Value:"myrandomname"},{Command:"store",Target:"Today is ${mydate}, and we draw a ${myrandomname}",Value:"output"},{Command:"echo",Target:"To is ${mydate}, and we draw a ${myrandomname}",Value:"${output}"},{Command:"type",Target:"id=sometext",Value:"${output}"},{Command:"if",Target:'parseFloat("${!runtime}") > 15',Value:""},{Command:"throwError",Target:"Runtime too slow, test failed",Value:""},{Command:"else",Target:"",Value:""},{Command:"echo",Target:"Runtime Ok, test passed!",Value:"green"},{Command:"endif",Target:"",Value:""},{Command:"comment",Target:"With @POS you click on the (in this case) 3rd link with the same name. Great for looping over a list of links with the same name.",Value:"green"},{Command:"clickAndWait",Target:"link=This link@POS=3",Value:""}]},DemoTabs:{CreationDate:"2017-10-15",Commands:[{Command:"open",Target:"https://a9t9.com/kantu/demo/tabs",Value:""},{Command:"click",Target:"link=Open new web page in new browser tab",Value:""},{Command:"selectWindow",Target:"tab=1",Value:""},{Command:"assertTitle",Target:"*1* TAB1",Value:""},{Command:"type",Target:"id=sometext1",Value:"this is tab 1"},{Command:"click",Target:"link=Open yet another web page in a new browser tab",Value:""},{Command:"selectWindow",Target:"tab=2",Value:""},{Command:"assertTitle",Target:"*2* TAB2",Value:""},{Command:"type",Target:"id=sometext2",Value:"And this is tab 2!"},{Command:"selectWindow",Target:"tab=1",Value:""},{Command:"assertTitle",Target:"*1* TAB1",Value:""},{Command:"type",Target:"id=sometext1",Value:"Now back in tab 1 - test done!"},{Command:"comment",Target:"We can also open new tabs",Value:""},{Command:"selectWindow",Target:"tab=open",Value:"https://a9t9.com"},{Command:"selectWindow",Target:"tab=open",Value:"https://ocr.space"},{Command:"type",Target:"id=imageUrl",Value:"Kantu Tab Test done"}]},DemoVisualUITest:{CreationDate:"2018-6-26",Commands:[{Command:"open",Target:"https://a9t9.com/",Value:""},{Command:"resize",Target:"1024@768",Value:""},{Command:"visualVerify",Target:"uitest_logo_wide_dpi_96.png@0.70",Value:""},{Command:"visualAssert",Target:"uitest_download_dpi_96.png@0.70",Value:""},{Command:"visualVerify",Target:"uitest_share_dpi_96.png@0.70",Value:""},{Command:"comment",Target:"Resize to iPhone6 screen size",Value:""},{Command:"resize",Target:"375@768",Value:""},{Command:"visualVerify",Target:"uitest_logo_mobile_dpi_96.png",Value:""},{Command:"comment",Target:"Missing menu is critical, so we use ASSERT (instead of just VERIFY)",Value:""},{Command:"visualAssert",Target:"uitest_hamburger_dpi_96.png",Value:""},{Command:"comment",Target:"Check that Share buttons do not show",Value:""},{Command:"comment",Target:"At this point, page is surely loaded => reduce wait for (normally missing) image",Value:""},{Command:"store",Target:"2",Value:"!timeout_wait"},{Command:"visualSearch",Target:"uitest_share_dpi_96.png@0.70",Value:"count"},{Command:"if",Target:"${count} > 0",Value:""},{Command:"throwError",Target:"Share buttons should NOT show on mobile phones",Value:""},{Command:"endif",Target:"",Value:""},{Command:"comment",Target:"Restore default wait (not really needed here, since macro stops now anyway)",Value:""},{Command:"store",Target:"10",Value:"!timeout_wait"},{Command:"comment",Target:"Done, enlarge browser again",Value:""},{Command:"resize",Target:"1024@768",Value:""}]},DemoXType:{CreationDate:"2018-10-24",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"open",Target:"https://a9t9.com/kantu/demo/xtype",Value:""},{Command:"comment",Target:"Send CTRL+S to open the browser save dialog",Value:""},{Command:"XType",Target:"${KEY_CTRL+KEY_S}",Value:""},{Command:"comment",Target:"Generate today's date and time ",Value:""},{Command:"storeEval",Target:'var d= new Date(); var m=((d.getMonth()+1)<10)?\'0\'+(d.getMonth()+1):(d.getMonth()+1); d.getFullYear()+"-"+m+"-"+d.getDate();',Value:"mydate"},{Command:"storeEval",Target:'new Date().getHours()+"-" + new Date().getMinutes() + "-" + new Date().getSeconds()',Value:"mytime"},{Command:"echo",Target:"Today is ${mydate}, and the time is ${mytime}",Value:"blue"},{Command:"comment",Target:"Wait for the dialog to appear before sending the next keystrokes",Value:""},{Command:"pause",Target:"2000",Value:""},{Command:"comment",Target:"Send the new file name to the dialog and press ENTER",Value:"blue"},{Command:"XType",Target:"Page_saved_by_Kantu_${mydate}_${mytime}${KEY_ENTER}",Value:""}]},DemoXClick:{CreationDate:"2018-10-24",Commands:[{Command:"store",Target:"fast",Value:"!replayspeed"},{Command:"open",Target:"https://a9t9.com/kantu/demo/draw",Value:""},{Command:"clickAndWait",Target:"link=Kantu will click this link",Value:""},{Command:"echo",Target:"Kantu controls the mouse cursor now",Value:"#shownotification"},{Command:"comment",Target:"Use image search to find the drawing applet",Value:""},{Command:"XClick",Target:"draw_box_dpi_96.png",Value:""},{Command:"echo",Target:"x=${!imagex} y=${!imagey}",Value:"green"},{Command:"XClick",Target:"${!imagex},${!imagey}",Value:""},{Command:"store",Target:"${!imagex}",Value:"x"},{Command:"store",Target:"${!imagey}",Value:"y"},{Command:"comment",Target:"Draw top line ---\x3e",Value:""},{Command:"XMove",Target:"${x},${y}",Value:"#down"},{Command:"storeEval",Target:"${x}+50",Value:"x"},{Command:"XMove",Target:"${x},${y}",Value:"#move"},{Command:"XMove",Target:"${x},${y}",Value:"#up"},{Command:"comment",Target:"Draw right line down",Value:""},{Command:"XMove",Target:"${x},${y}",Value:"#down"},{Command:"storeEval",Target:"${y}+50",Value:"y"},{Command:"XMove",Target:"${x},${y}",Value:"#move"},{Command:"XMove",Target:"${x},${y}",Value:"#up"},{Command:"comment",Target:"Draw bottom line <---",Value:""},{Command:"XMove",Target:"${x},${y}",Value:"#down"},{Command:"storeEval",Target:"${x}-50",Value:"x"},{Command:"XMove",Target:"${x},${y}",Value:"#move"},{Command:"XMove",Target:"${x},${y}",Value:"#up"},{Command:"comment",Target:"Draw left line up",Value:""},{Command:"XMove",Target:"${x},${y}",Value:"#down"},{Command:"storeEval",Target:"${y}-50",Value:"y"},{Command:"XMove",Target:"${x},${y}",Value:"#move"},{Command:"XMove",Target:"${x},${y}",Value:"#up"},{Command:"comment",Target:"Check that the square was drawn ok",Value:""},{Command:"visualAssert",Target:"draw_square_dpi_96.png",Value:""},{Command:"comment",Target:"Now type some text. First click the TEXT icon",Value:""},{Command:"XClick",Target:"draw_texticon_dpi_96.png",Value:""},{Command:"comment",Target:"Now click the place where the text should start (80px below the square)",Value:""},{Command:"storeEval",Target:"${y}+80",Value:"y"},{Command:"echo",Target:"x=${x}, y=${y}",Value:"blue"},{Command:"XClick",Target:"${x},${y}",Value:""},{Command:"comment",Target:"Send keystrokes, and demo the use of the BACKSPACE special key.",Value:""},{Command:"XType",Target:"Kantuuu${KEY_BACKSPACE}${KEY_BACKSPACE} can draw and write.",Value:""},{Command:"echo",Target:"DemoXClick completed",Value:"#shownotification"}]}},ae=[{creationDate:"2018-05-12",name:"DemoLoopsInsideTestSuite",fold:!0,macros:[{macro:"DemoDragDrop",loops:3},{macro:"DemoIfElse",loops:3},{macro:"DemoStoreEval",loops:3}]},{creationDate:"2018-05-31",name:"DemoTestSuite",fold:!0,macros:[{macro:"DemoAutofill",loops:1},{macro:"DemoCanvas",loops:1},{macro:"DemoComputerVision",loops:1},{macro:"DemoCsvReadWithLoop",loops:3},{macro:"DemoCsvReadWithWhile",loops:1},{macro:"DemoCsvSave",loops:1},{macro:"DemoDialogboxes",loops:1},{macro:"DemoDownload",loops:1},{macro:"DemoDragDrop",loops:1},{macro:"DemoExtract",loops:1},{macro:"DemoFrames",loops:1},{macro:"DemoTakeScreenshots",loops:1},{macro:"DemoIfElse",loops:1},{macro:"DemoIframe",loops:1},{macro:"DemoImplicitWaiting",loops:1},{macro:"DemoStoreEval",loops:1},{macro:"DemoTabs",loops:1},{macro:"DemoVisualUITest",loops:1}]}],re=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function ie(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var se,ce=0,le=function(e){e.dispatch;var t=(0,e.getState)().editor.editing;N.default.set("editing",t)},ue=(se={},function(e){e.dispatch;var t=(0,e.getState)().config,n=((t=t||{}).size?t.size[t.showSidebar?"with_sidebar":"standard"]:null)||(t.showSidebar?{width:850,height:775}:{width:520,height:775});n.width===se.width&&n.height===se.height||N.default.get("config").then((function(e){e.showSidebar!==t.showSidebar&&(n.width===window.outerWidth&&n.height===window.outerHeight||A.a.ask("PANEL_RESIZE_WINDOW",{size:n}))})),N.default.set("config",t),se=n});function de(e){return{type:O.SET_ROUTE,data:e}}function me(){return ce=0,{types:_("START_RECORDING"),promise:function(){return setTimeout((function(){A.a.ask("PANEL_TRY_TO_RECORD_OPEN_COMMAND")})),A.a.ask("PANEL_START_RECORDING",{})}}}function pe(){return{types:_("STOP_RECORDING"),promise:function(){return A.a.ask("PANEL_STOP_RECORDING",{})}}}function fe(){return{types:_("START_INSPECTING"),promise:function(){return A.a.ask("PANEL_START_INSPECTING",{})}}}function ge(){return{types:_("STOP_INSPECTING"),promise:function(){return A.a.ask("PANEL_STOP_INSPECTING",{})}}}function he(){return{type:O.START_PLAYING,data:null}}function ve(){return{type:O.STOP_PLAYING,data:null}}function be(){return{type:O.DONE_INSPECTING,data:{}}}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(ce+=1,A.a.ask("PANEL_UPDATE_BADGE",{type:"record",text:""+ce})),{type:O.APPEND_COMMAND,data:{command:e},post:le}}function Ee(e){return{type:O.DUPLICATE_COMMAND,data:{index:e},post:le}}function we(e,t){return{type:O.INSERT_COMMAND,data:{index:t,command:e},post:le}}function Ce(e,t){return{type:O.UPDATE_COMMAND,data:{command:e,index:t},post:le}}function Te(e){return{type:O.REMOVE_COMMAND,data:{index:e},post:le}}function xe(e,t){return{type:O.SELECT_COMMAND,data:{index:e,forceClick:t},post:le}}function Se(e){return{type:O.CUT_COMMAND,data:{indices:[e]},post:le}}function _e(e){return{type:O.COPY_COMMAND,data:{indices:[e]}}}function ke(e){return{type:O.PASTE_COMMAND,data:{index:e},post:le}}function Oe(){return{type:O.NORMALIZE_COMMANDS,data:{},post:le}}function Ie(e){return{type:O.UPDATE_SELECTED_COMMAND,data:e,post:le}}function Ae(e){return{type:O.SET_SOURCE_ERROR,data:e}}function Ne(e){return{type:O.SET_SOURCE_CURRENT,data:e}}function Pe(e){return function(t,n){var a=n().editor,r=a.editing;if(a.editingSource.pure!==r.current){Object(te.a)("ACTION, saveSourceCodeToEditing",e);try{var i=Object(Z.fromJSONString)(e,"untitled");t(Re(oe({},i.data,{meta:r.meta}))),t(Ae(null))}catch(e){o.a.error("There are errors in the source"),t(Ae(e.message))}}}}function je(){return function(e,t){var n=t(),a=n.editor.editing.meta.src,r=n.editor.testCases.find((function(e){return e.id===a.id})),o=Object(I.pick)(["commands"],n.editor.editing);return o.commands=o.commands.map(D),Object(P.getStorageManager)().getMacroStorage().write(r.name,oe({},r,{data:o})).then((function(){e({type:O.SAVE_EDITING_AS_EXISTED,data:null,post:le})}))}}function Ve(e){return function(t,n){var a=n(),r=Object(I.pick)(["commands"],a.editor.editing);if(a.editor.testCases.find((function(t){return t.name===e})))return Promise.reject(new Error("The macro name already exists!"));var o=Object(I.uid)();return Object(P.getStorageManager)().getMacroStorage().write(e,{name:e,data:r,id:o}).then((function(){t({type:O.SAVE_EDITING_AS_NEW,data:{id:o,name:e},post:le})}))}}function De(e){return{type:O.SET_TEST_CASES,data:e,post:function(e){var t=e.dispatch,n=(0,e.getState)();n.editor.testCases.length>0&&!n.editor.editing.meta.src&&0===n.editor.editing.commands.length&&t(Le(n.editor.testCases[0].id))}}}function Me(){return function(e,t){var n=t().editor,a=n.editing,r=n.testCases;if(!a.meta||a.meta.src)if(0===r.length)e(Fe());else{var o=r.slice();o.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n===a?0:1})),e(Le(o[0].id))}}}function Re(e){return{type:O.SET_EDITING,data:e}}function Le(e){return{type:O.EDIT_TEST_CASE,data:e,post:le}}function Fe(){return{type:O.EDIT_NEW_TEST_CASE,data:null,post:le}}function Ue(e){return function(t,n){n().editor.testCases;return Object(te.a)("upsertTestCase",e),Object(P.getStorageManager)().getMacroStorage().write(e.name,oe({id:Object(I.uid)()},e))}}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(a,r){var o=r().editor.testCases,i=t?e:e.filter((function(e){return!o.find((function(t){return t.name===e.name}))})),s=t?[]:e.filter((function(e){return o.find((function(t){return t.name===e.name}))})),c=i.length,l=e.length-c;return 0===c?Promise.resolve({passCount:c,failCount:l,failTcs:s}):Object(P.getStorageManager)().getStorageForTarget(P.StorageTarget.Macro,n||Object(P.getStorageManager)().getCurrentStrategyType()).bulkWrite(i.map((function(e){return{fileName:e.name,content:oe({},e,{id:Object(I.uid)(),udpateTime:1*new Date})}}))).then((function(){return{passCount:c,failCount:l,failTcs:s}}))}}function Ke(e,t){return function(n,a){var r=a(),o=r.editor.editing.meta.src.id,i=r.editor.testCases.find((function(e){return e.id===t})),s=r.editor.testCases.find((function(t){return t.name===e}));return i?s?Promise.reject(new Error("The macro name already exists!")):Object(P.getStorageManager)().getMacroStorage().rename(i.name,e).then((function(){o===t&&n({type:O.RENAME_TEST_CASE,data:e,post:le})})):Promise.reject(new Error("No macro found with id '"+t+"'!"))}}function Ye(e){return function(t,n){var a=n(),r=a.editor.testCases.find((function(t){return t.id===e})),o=a.editor.editing.meta.src.id,i=a.editor.testSuites.filter((function(t){return t.cases.find((function(t){return t.testCaseId===e}))}));return i.length>0?Promise.reject(new Error("Can't delete this macro for now, it's currently used in following test suites: "+i.map((function(e){return e.name})))):Object(P.getStorageManager)().getMacroStorage().remove(r.name).then((function(){t({type:O.REMOVE_TEST_CASE,data:{isCurrent:o===e},post:le})})).catch((function(e){return te.a.error(e.stack)}))}}function Ge(){return function(e,t){return Ye(t().editor.editing.meta.src.id)(e,t)}}function $e(e,t){return function(n,a){var r=a(),o=r.editor.testCases.find((function(e){return e.id===t})),i=r.editor.testCases.find((function(t){return t.name===e}));return o?i?Promise.reject(new Error("The macro name already exists!")):Object(P.getStorageManager)().getMacroStorage().write(e,oe({},o,{id:Object(I.uid)(),name:e})):Promise.reject(new Error("No macro found with id '"+t+"'!"))}}function ze(e){return{type:O.SET_PLAYER_STATE,data:e}}function We(e){return function(t){t(ze({timeoutStatus:e})),A.a.ask("PANEL_UPDATE_BADGE",{type:"play",text:(e.total-e.past)/1e3+"s"})}}function Xe(e){return{type:O.PLAYER_ADD_ERROR_COMMAND_INDEX,data:e}}function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:O.ADD_LOGS,data:[{type:e,text:t,options:n,id:Object(I.uid)(),createTime:new Date}]}}function qe(){return{type:O.CLEAR_LOGS,data:null}}function Je(e){return{type:O.ADD_SCREENSHOT,data:oe({},e,{createTime:new Date})}}function Qe(){return{type:O.CLEAR_SCREENSHOTS,data:null,post:function(){return Object(P.getStorageManager)().getScreenshotStorage().clear()}}}function Ze(e){return{type:O.ADD_VISION,data:oe({},e,{createTime:new Date})}}function et(){return{type:O.CLEAR_VISIONS,data:null,post:function(){return Object(P.getStorageManager)().getVisionStorage().clear()}}}function tt(e){return{type:O.UPDATE_CONFIG,data:e,post:ue}}function nt(e,t){return function(n,a){var r=a().editor.testCases.find((function(t){return t.id===e}));return Object(P.getStorageManager)().getMacroStorage().write(r.name,oe({},r,{status:t})).then((function(){n({type:O.UPDATE_TEST_CASE_STATUS,data:{id:e,status:t}})}))}}function at(e){return function(t,n){var a=n(),r=a.config,o=Object(I.pick)(["playHighlightElements","playScrollElementsIntoView"],r),i=a.editor.editing.meta.src?a.editor.editing.meta.src.name:"Untitled",s=oe({"!MACRONAME":i,"!TIMEOUT_PAGELOAD":parseInt(r.timeoutPageLoad,10),"!TIMEOUT_WAIT":parseInt(r.timeoutElement,10),"!TIMEOUT_MACRO":parseInt(r.timeoutMacro,10),"!TIMEOUT_DOWNLOAD":parseInt(r.timeoutDownload,10),"!REPLAYSPEED":{0:"FAST",.3:"MEDIUM",2:"SLOW"}[e.postDelay/1e3]||"MEDIUM"},e.overrideScope||{}),c=a.player.breakpointIndices||[],l=Object(I.compose)(Object(I.on)("resources"),I.map,Object(I.on)("extra"))((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return oe({},t,o,e.commandExtra||{})}))(e);q().play(oe({breakpoints:c},l,{public:oe({},l.public||{},{scope:s})}))}}function rt(){return function(e,t){var n=Object(P.getStorageManager)().getCSVStorage();n.list().then((function(e){return Promise.all(e.map((function(e){return n.getLink(e.fileName).then((function(t){return{url:t,name:e.fileName,size:e.size,createTime:new Date(e.lastModified)}}))})))})).then((function(t){e({type:O.SET_CSV_LIST,data:t})}))}}function ot(){return function(e,t){var n=Object(P.getStorageManager)().getScreenshotStorage();n.list().then((function(e){return e.reverse(),Object(te.a)("listScreenshots",e),Promise.all(e.map((function(e){return n.getLink(e.fileName).then((function(t){return{url:t,name:e.fileName,createTime:new Date(e.lastModified)}}))})))})).then((function(t){e({type:O.SET_SCREENSHOT_LIST,data:t})}))}}function it(){return function(e,t){var n=Object(P.getStorageManager)().getVisionStorage();n.list().then((function(e){return e.reverse(),Object(te.a)("listVisions",e),Promise.all(e.map((function(e){return n.getLink(e.fileName).then((function(t){return{url:t,name:e.fileName,createTime:new Date(e.lastModified)}}))})))})).then((function(t){e({type:O.SET_VISION_LIST,data:t})}))}}function st(e){return{type:O.SET_TEST_SUITES,data:e}}function ct(e){return function(t,n){return Object(P.getStorageManager)().getTestSuiteStorage().write(e.name,oe({},e,{id:Object(I.uid)(),updateTime:1*new Date}))}}function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,a){a();var r=e,o=r.length,i=e.length-o;return 0===o?Promise.resolve({passCount:o,failCount:i,failTss:[]}):Object(P.getStorageManager)().getStorageForTarget(P.StorageTarget.TestSuite,t||Object(P.getStorageManager)().getCurrentStrategyType()).bulkWrite(r.map((function(e){return{fileName:e.name,content:oe({},e,{id:Object(I.uid)(),updateTime:1*new Date})}}))).then((function(){return{passCount:o,failCount:i,failTss:[]}}))}}function ut(e,t){return function(n,a){var r=a().editor.testSuites.find((function(t){return t.id===e})),o="function"==typeof t?t(r):t,i=oe({},r,o);n({type:O.UPDATE_TEST_SUITE,data:{id:e,updated:i}});var s=Object(P.getStorageManager)().getTestSuiteStorage(),c=o.name&&r.name!==o.name?s.rename(r.name,o.name):Promise.resolve(),l=o.name&&r.name!==o.name?o.name:r.name;return c.then((function(){return s.write(l,i)}))}}function dt(e){return function(t,n){var a=n().editor.testSuites.find((function(t){return t.id===e}));if(!a)throw new Error("can't find test suite with id '"+e+"'");return Object(P.getStorageManager)().getTestSuiteStorage().remove(a.name)}}function mt(e){return{type:O.SET_PLAYER_STATE,data:{mode:e}}}function pt(){return function(e,t){var n=t(),a=n.config,r=n.editor,o=a.autoBackupTestCases,i=a.autoBackupTestSuites,s=a.autoBackupScreenshots,c=a.autoBackupCSVFiles,l=a.autoBackupVisionImages,u=Object(P.getStorageManager)();return Promise.all([u.getCSVStorage().list(),u.getScreenshotStorage().list(),u.getVisionStorage().list()]).then((function(e){var t=re(e,3);return function(e){var t=e.backup,n=e.testCases,a=e.testSuites,r=e.screenshots,o=e.csvs,i=e.visions,s=new Q.a,c=[];if(t.testCase&&n&&n.length){var l=s.folder("macros");n.forEach((function(e){l.file(e.name+".json",Object(Z.toJSONString)({name:e.name,commands:e.data.commands}))}))}if(t.testSuite&&n&&a&&a.length){var u=s.folder("testsuites"),d=Object(I.nameFactory)();a.forEach((function(e){var t=d(e.name);u.file(t+".json",Object(ee.stringifyTestSuite)(e,n))}))}if(t.screenshot&&r&&r.length){var m=s.folder("screenshots"),p=Object(P.getStorageManager)().getScreenshotStorage();r.forEach((function(e){c.push(p.read(e.fileName,"ArrayBuffer").then((function(t){m.file(e.fileName,t,{binary:!0})})))}))}if(t.vision&&i&&i.length){var f=s.folder("images"),g=Object(P.getStorageManager)().getVisionStorage();i.forEach((function(e){c.push(g.read(e.fileName,"ArrayBuffer").then((function(t){f.file(e.fileName,t,{binary:!0})})))}))}if(t.csv&&o&&o.length){var h=s.folder("datasources"),b=Object(P.getStorageManager)().getCSVStorage();o.forEach((function(e){c.push(b.read(e.fileName,"Text").then((function(t){return h.file(e.fileName,t)})))}))}return Promise.all(c).then((function(){s.generateAsync({type:"blob"}).then((function(e){v.a.saveAs(e,"kantu_backup.zip")}))}))}({csvs:t[0],screenshots:t[1],visions:t[2],testCases:r.testCases,testSuites:r.testSuites,backup:{testCase:o,testSuite:i,screenshot:s,csv:c,vision:l}})})).catch((function(e){te.a.error(e.stack)}))}}function ft(e){return e.sort((function(e,t){return e.key<t.key?-1:e.key>t.key?1:0})),{type:O.SET_VARIABLE_LIST,data:e}}function gt(e){return{type:O.UPDATE_UI,data:e}}function ht(e){return{type:O.ADD_BREAKPOINT,data:e}}function vt(e){return{type:O.REMOVE_BREAKPOINT,data:e}}function bt(e){return{type:O.SET_EDITOR_ACTIVE_TAB,data:e}}function yt(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,n){var a=function(){return N.default.get("preinstall_info").then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.askedVersions||[],n=g.a.preinstallVersion,a=-1!==t.indexOf(n);return!!a||N.default.set("preinstall_info",oe({},e,{askedVersions:[].concat(ie(t),[n])}))}))};if(!e)return a();Object(te.a)("PREINSTALL_CSV_LIST",["preinstall/csv/readcsvtestdata.csv"]),Object(te.a)("PREINSTALL_VISION_LIST",["preinstall/vision/canvas_3dots_verify_dpi_96.png","preinstall/vision/canvas_hydepark_dpi_96.png","preinstall/vision/canvas_hydepark_extract_dpi_96_relative.png","preinstall/vision/canvas_hydepark_verify_dpi_96.png","preinstall/vision/canvas_wyoming_dpi_96.png","preinstall/vision/canvas_wyoming_verify_dpi_96.png","preinstall/vision/democv_checkoverlay.png","preinstall/vision/democv_ocrdone.png","preinstall/vision/democv_share.png","preinstall/vision/democv_startocr.png","preinstall/vision/desktop_area_bottomright_dpi_96.png","preinstall/vision/desktop_area_topleft3_dpi_96.png","preinstall/vision/desktop_area_topleft_dpi_96.png","preinstall/vision/desktop_checktab_dpi_96.png","preinstall/vision/desktop_clearbutton_dpi_96.png","preinstall/vision/desktop_logstab_grey_dpi_96.png","preinstall/vision/desktop_logstab_white_dpi_96.png","preinstall/vision/desktop_scrtab_dpi_96.png","preinstall/vision/desktop_searcharea_dpi_96_relative.png","preinstall/vision/desktop_vartab_dpi_96.png","preinstall/vision/desktop_vitab_dpi_96.png","preinstall/vision/draw_checkresult1_dpi_96.png","preinstall/vision/draw_compare_dpi_96.png","preinstall/vision/draw_create1_dpi_96.png","preinstall/vision/draw_create_dpi_96.png","preinstall/vision/draw_icon_dpi_96.png","preinstall/vision/draw_plus1_dpi_96.png","preinstall/vision/draw_plus_dpi_96.png","preinstall/vision/draw_select_pencil1_dpi_96.png","preinstall/vision/draw_start1_dpi_96.png","preinstall/vision/draw_start_dpi_96.png","preinstall/vision/draw_text1_dpi_96.png","preinstall/vision/draw_text_dpi_96.png","preinstall/vision/getquotenumber_dpi_96_relative.png","preinstall/vision/pdftest_salesquote.png","preinstall/vision/slider_handle_dpi_96.png","preinstall/vision/slider_red_dpi_96.png","preinstall/vision/uitest_download_dpi_96.png","preinstall/vision/uitest_hamburger_dpi_96.png","preinstall/vision/uitest_logo_mobile_dpi_96.png","preinstall/vision/uitest_logo_wide_dpi_96.png","preinstall/vision/uitest_share_dpi_96.png","preinstall/vision/youtube_play_button.png","preinstall/vision/youtube_video_content_verify.png"]);return Promise.all([function(){if(!ne||!Object.keys(ne).length)return Promise.resolve();var e=Object.keys(ne).map((function(e){var t=JSON.stringify(ne[e]);return Object(Z.fromJSONString)(t,e)}));return t(Be(e,!0,P.StorageStrategyType.Browser)),Object(I.delay)((function(){var e=n(),a=ae.map((function(t){return Object(ee.parseTestSuite)(JSON.stringify(t),e.editor.testCases)}));t(lt(a,P.StorageStrategyType.Browser))}),1e3)}(),function(){var e=["preinstall/csv/readcsvtestdata.csv"];if(0===e.length)return Promise.resolve();var n=Object(P.getStorageManager)().getStorageForTarget(P.StorageTarget.CSV,P.StorageStrategyType.Browser),a=e.map((function(e){var t=e.split("/"),a=t[t.length-1];return Object(I.loadCsv)(e).then((function(e){return n.write(a,new Blob([e]))}))}));return Promise.resolve(a).then((function(){return Object(I.delay)((function(){}),3e3)})).then((function(){t(rt())}))}(),function(){var e=["preinstall/vision/canvas_3dots_verify_dpi_96.png","preinstall/vision/canvas_hydepark_dpi_96.png","preinstall/vision/canvas_hydepark_extract_dpi_96_relative.png","preinstall/vision/canvas_hydepark_verify_dpi_96.png","preinstall/vision/canvas_wyoming_dpi_96.png","preinstall/vision/canvas_wyoming_verify_dpi_96.png","preinstall/vision/democv_checkoverlay.png","preinstall/vision/democv_ocrdone.png","preinstall/vision/democv_share.png","preinstall/vision/democv_startocr.png","preinstall/vision/desktop_area_bottomright_dpi_96.png","preinstall/vision/desktop_area_topleft3_dpi_96.png","preinstall/vision/desktop_area_topleft_dpi_96.png","preinstall/vision/desktop_checktab_dpi_96.png","preinstall/vision/desktop_clearbutton_dpi_96.png","preinstall/vision/desktop_logstab_grey_dpi_96.png","preinstall/vision/desktop_logstab_white_dpi_96.png","preinstall/vision/desktop_scrtab_dpi_96.png","preinstall/vision/desktop_searcharea_dpi_96_relative.png","preinstall/vision/desktop_vartab_dpi_96.png","preinstall/vision/desktop_vitab_dpi_96.png","preinstall/vision/draw_checkresult1_dpi_96.png","preinstall/vision/draw_compare_dpi_96.png","preinstall/vision/draw_create1_dpi_96.png","preinstall/vision/draw_create_dpi_96.png","preinstall/vision/draw_icon_dpi_96.png","preinstall/vision/draw_plus1_dpi_96.png","preinstall/vision/draw_plus_dpi_96.png","preinstall/vision/draw_select_pencil1_dpi_96.png","preinstall/vision/draw_start1_dpi_96.png","preinstall/vision/draw_start_dpi_96.png","preinstall/vision/draw_text1_dpi_96.png","preinstall/vision/draw_text_dpi_96.png","preinstall/vision/getquotenumber_dpi_96_relative.png","preinstall/vision/pdftest_salesquote.png","preinstall/vision/slider_handle_dpi_96.png","preinstall/vision/slider_red_dpi_96.png","preinstall/vision/uitest_download_dpi_96.png","preinstall/vision/uitest_hamburger_dpi_96.png","preinstall/vision/uitest_logo_mobile_dpi_96.png","preinstall/vision/uitest_logo_wide_dpi_96.png","preinstall/vision/uitest_share_dpi_96.png","preinstall/vision/youtube_play_button.png","preinstall/vision/youtube_video_content_verify.png"];if(0===e.length)return Promise.resolve();var n=Object(P.getStorageManager)().getStorageForTarget(P.StorageTarget.Vision,P.StorageStrategyType.Browser),a=e.map((function(e){var t=e.split("/"),a=t[t.length-1];return Object(I.loadImage)(e).then((function(e){return n.write(a,e)}))}));return Promise.resolve(a).then((function(){return Object(I.delay)((function(){}),3e3)})).then((function(){t(it())}))}()]).then(a)}}var Et=n(19),wt=n.n(Et),Ct=n(76),Tt=n.n(Ct),xt=n(13),St=n.n(xt),_t=n(26),kt=n.n(_t),Ot=n(24),It=n.n(Ot),At=n(42),Nt=n.n(At),Pt=n(29),jt=n.n(Pt),Vt=n(25),Dt=n.n(Vt),Mt=n(23),Rt=n.n(Mt),Lt=n(406),Ft=n.n(Lt),Ut=n(150),Bt=n.n(Ut);n(589);function Kt(e){var t=e.editor,n=t.editing,a=t.editingSource,r=t.activeTab;if(!n.meta.src)return!0;switch(r){case"table_view":return(n.meta||{}).hasUnsaved;case"source_view":return a.original!==a.current;default:throw new Error("Unknown activeTab")}}function Yt(e){var t=e.editor.editing,n=t.meta,a=t.commands;return n&&-1!==n.selectedIndex&&a[n.selectedIndex]||null}var Gt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Wt=function(e){function t(){var e,n,a;$t(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=zt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={name:null},zt(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Gt(t,[{key:"componentDidMount",value:function(){var e=this;this.props.name&&this.setState({name:this.props.name}),setTimeout((function(){var t=e.inputSaveTestCase.refs.input;t.focus(),t.selectionStart=t.selectionEnd=t.value.length}),100)}},{key:"render",value:function(){var e=this;return l.a.createElement(w.a,{title:"Save macro as..",okText:"Save",cancelText:"Cancel",visible:!0,onOk:function(){return e.props.onOk(e.state.name)},onCancel:this.props.onCancel,className:"save-modal"},l.a.createElement(It.a,{style:{width:"100%"},onKeyDown:function(t){13===t.keyCode&&e.props.onOk(e.state.name)},onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name||"",placeholder:"macro name",ref:function(t){e.inputSaveTestCase=t}}))}}]),t}(l.a.Component),Xt=function(e){var t=e.editor.editing.meta.src;return t&&t.name&&t.name.length?t.name:"Untitled"},Ht=function(e,t){var n=function(){var e="save_test_case_container",t=document.getElementById(e);if(t)return t;var n=document.createElement("div");return n.id=e,document.body.appendChild(n),n}();return!!e.getState().editor.editing.meta.src?e.dispatch(je()):new Promise((function(a,r){d.a.render(l.a.createElement(Wt,{name:t,onOk:function(t){return e.dispatch(Ve(t)).then((function(){return o.a.success("successfully saved!",1.5)}),(function(e){return o.a.error(e.message,1.5)})).then(a,r)},onCancel:a}),n)})).then((function(){d.a.unmountComponentAtNode(n)})).catch((function(e){console.error(e.message)}))},qt=void 0;function Jt(e){if(qt)return qt;if(!e)throw new Error("must provide store");return qt=function(e){return{saveOrNot:function(){var t=e.getState();return Kt(t)?new Promise((function(n,a){w.a.confirm({title:'Unsaved changes in macro "'+Xt(t)+'"',content:"Do you want to discard or save these changes?",okText:"Save",cancelText:"Discard",onOk:function(){return Ht(e).then(n),Promise.resolve(!0)},onCancel:function(){return n(),Promise.resolve(!0)}})})):Promise.resolve()},save:function(t){if(Kt(e.getState()))return Ht(e,t)}}}(e)}var Qt=n(8),Zt=n(27),en=n(50),tn=(n(119),n(3)),nn=n.n(tn),an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function on(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ln(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var un,dn=function(e){function t(){var e,n,a;cn(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=a=ln(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={showPlayLoops:!1,loopsStart:1,loopsEnd:3,xModules:[Object(Zt.getXFile)(),Object(en.getXUserIO)()],xModuleData:{},xFileRootDirChanged:!1},a.getPlayer=function(e){if(e)return q({name:e});switch(a.props.player.mode){case Qt.e.TEST_CASE:return q({name:"testCase"});case Qt.e.TEST_SUITE:return q({name:"testSuite"})}},a.getTestCaseName=function(){var e=a.props.editing.meta.src;return e&&e.name&&e.name.length?e.name:"Untitled"},a.togglePlayLoopsModal=function(e){a.setState({showPlayLoops:e})},a.onToggleRecord=function(){a.props.status===Qt.a.RECORDER?(a.props.stopRecording(),a.props.normalizeCommands()):a.props.startRecording(),a.setState({lastOperation:"record"})},a.onClickPlayLoops=function(){var e=a.state,t=e.loopsStart,n=e.loopsEnd;if(t<0)return o.a.error("Start value must be no less than zero",1.5);if(n<t)return o.a.error("Max value must be greater than start value",1.5);var r=a.getPlayer(),i=a.props.editing.commands,s=a.props.editing.meta.src,c=i.find((function(e){return"open"===e.cmd.toLowerCase()}));a.props.playerPlay({loopsEnd:n,loopsStart:t,title:a.getTestCaseName(),extra:{id:s&&s.id},mode:r.C.MODE.LOOP,startIndex:0,startUrl:c?c.target:null,resources:a.props.editing.commands,postDelay:1e3*a.props.config.playCommandInterval}),a.setState({lastOperation:"play"}),a.togglePlayLoopsModal(!1)},a.onCancelPlayLoops=function(){a.togglePlayLoopsModal(!1),a.setState({loopsToPlay:2})},a.onChangePlayLoops=function(e,t){a.setState(sn({},e,parseInt(t,10)))},a.onClickSave=function(){return Jt().save()},a.playCurrentMacro=function(e){var t=a.props.editing.commands,n=a.props.editing.meta.src,r=t.find((function(e){return"open"===e.cmd.toLowerCase()}));a.setState({lastOperation:"play"}),a.props.playerPlay({title:a.getTestCaseName(),extra:{id:n&&n.id},mode:q().C.MODE.STRAIGHT,startIndex:0,startUrl:r?r.target:null,resources:t,postDelay:1e3*a.props.config.playCommandInterval,isStep:e})},a.playCurrentLine=function(){var e=a.props.editing.commands,t=a.props.editing.meta,n=t.src,r=t.selectedIndex,o=-1===r?0:r||0;return a.props.playerPlay({title:a.getTestCaseName(),extra:{id:n&&n.id},mode:X.C.MODE.SINGLE,startIndex:o,startUrl:null,resources:e,postDelay:1e3*a.props.config.playCommandInterval,callback:function(t,n){t||o+1<e.length&&a.props.selectCommand(o+1,!0)}})},ln(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rn(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history;this.props.setRoute(t.location.pathname),this.props.history.listen((function(n,a){e.props.setRoute(t.location.pathname)}))}},{key:"componentWillReceiveProps",value:function(e){e.ui.showSettings&&!this.props.ui.showSettings&&this.onShowSettings()}},{key:"initXModules",value:function(){var e=this,t=this.state.xModules;Promise.all(t.map((function(e){return e.getVersion().then((function(t){return t.installed?e.sanityCheck().then((function(){return{error:null}}),(function(e){return{error:e.message}})).then((function(e){return{versionInfo:t,checkResult:e}})):{versionInfo:t,checkResult:null}}))}))).then((function(n){var a=n.reduce((function(e,n,a){return e[t[a].getName()]=an({},n.versionInfo,{checkResult:n.checkResult,config:t[a].getCachedConfig()}),e}),{});e.setState({xModuleData:a,xFileRootDirChanged:!1})}))}},{key:"onShowSettings",value:function(){this.initXModules()}},{key:"showSettingsModal",value:function(){this.props.updateUI({showSettings:!0})}},{key:"renderPlayLoopModal",value:function(){var e=this;return l.a.createElement(w.a,{title:"How many loops to play?",okText:"Play",cancelText:"Cancel",className:"play-loop-modal",visible:this.state.showPlayLoops,onOk:this.onClickPlayLoops,onCancel:this.onCancelPlayLoops},l.a.createElement(Ft.a,null,l.a.createElement(Bt.a,{span:10},l.a.createElement(Dt.a.Item,{label:"Start value"},l.a.createElement(It.a,{type:"number",min:"0",value:this.state.loopsStart,onKeyDown:function(t){13===t.keyCode&&e.onClickPlayLoops()},onChange:function(t){return e.onChangePlayLoops("loopsStart",t.target.value)}}))),l.a.createElement(Bt.a,{span:10,offset:2},l.a.createElement(Dt.a.Item,{label:"Max"},l.a.createElement(It.a,{type:"number",min:"0",value:this.state.loopsEnd,onKeyDown:function(t){13===t.keyCode&&e.onClickPlayLoops()},onChange:function(t){return e.onChangePlayLoops("loopsEnd",t.target.value)}})))),l.a.createElement("p",null,"The value of the loop counter is available in $","{","!LOOP","}"," variable"))}},{key:"renderSettingModal",value:function(){var e=this,t=function(t,n){e.props.updateConfig(sn({},t,n))},n={labelCol:{span:8},wrapperCol:{span:16}};return l.a.createElement(w.a,{title:"Settings",className:"settings-modal",width:650,footer:null,visible:this.props.ui.showSettings,onCancel:function(){return e.props.updateUI({showSettings:!1})}},l.a.createElement(kt.a,{activeKey:this.props.ui.settingsTab||"replay",onChange:function(t){return e.props.updateUI({settingsTab:t})}},l.a.createElement(kt.a.TabPane,{tab:"Replay",key:"replay"},l.a.createElement(Dt.a,null,l.a.createElement(Dt.a.Item,an({label:"Replay Helper"},n),l.a.createElement(jt.a,{onChange:function(e){return t("playScrollElementsIntoView",e.target.checked)},checked:this.props.config.playScrollElementsIntoView},"Scroll elements into view during replay"),l.a.createElement(jt.a,{onChange:function(e){return t("playHighlightElements",e.target.checked)},checked:this.props.config.playHighlightElements},"Highlight elements during replay")),l.a.createElement(Dt.a.Item,an({label:l.a.createElement("a",{target:"_blank",href:"https://a9t9.com/x/idehelp?help=command_interval"},"Command Interval")},n),l.a.createElement(Rt.a,{style:{width:"200px"},placeholder:"interval",value:""+this.props.config.playCommandInterval,onChange:function(e){return t("playCommandInterval",e)}},l.a.createElement(Rt.a.Option,{value:"0"},"Fast (no delay)"),l.a.createElement(Rt.a.Option,{value:"0.3"},"Medium (0.3s delay)"),l.a.createElement(Rt.a.Option,{value:"2"},"Slow (2s delay)"))),l.a.createElement(Dt.a.Item,an({label:l.a.createElement("a",{target:"_blank",href:"https://a9t9.com/x/idehelp?help=timeout_pageload"},"!TIMEOUT_PAGELOAD")},n),l.a.createElement(It.a,{type:"number",min:"0",style:{width:"70px"},value:this.props.config.timeoutPageLoad,onChange:function(e){return t("timeoutPageLoad",e.target.value)},placeholder:"in seconds"}),l.a.createElement("span",{className:"tip"},"Max. time for new page load")),l.a.createElement(Dt.a.Item,an({label:l.a.createElement("a",{target:"_blank",href:"https://a9t9.com/x/idehelp?help=timeout_wait"},"!TIMEOUT_WAIT")},n),l.a.createElement(It.a,{type:"number",min:"0",style:{width:"70px"},value:this.props.config.timeoutElement,onChange:function(e){return t("timeoutElement",e.target.value)},placeholder:"in seconds"}),l.a.createElement("span",{className:"tip"},"Max. time per step")),l.a.createElement(Dt.a.Item,an({label:l.a.createElement("a",{target:"_blank",href:"https://a9t9.com/x/idehelp?help=timeout_macro"},"!TIMEOUT_MACRO")},n),l.a.createElement(It.a,{type:"number",min:"0",style:{width:"70px"},value:this.props.config.timeoutMacro,onChange:function(e){return t("timeoutMacro",e.target.value)},placeholder:"in seconds"}),l.a.createElement("span",{className:"tip"},"Max. overall macro runtime")),l.a.createElement(Dt.a.Item,an({label:l.a.createElement("a",{target:"_blank",href:"https://a9t9.com/x/idehelp?help=timeout_download"},"!TIMEOUT_DOWNLOAD")},n),l.a.createElement(It.a,{type:"number",min:"0",style:{width:"70px"},value:this.props.config.timeoutDownload,onChange:function(e){return t("timeoutDownload",e.target.value)},placeholder:"in seconds"}),l.a.createElement("span",{className:"tip"},"Max. allowed time for file")),l.a.createElement(Dt.a.Item,an({label:"If error happens in loop"},n),l.a.createElement(Nt.a.Group,{onChange:function(e){return t("onErrorInLoop",e.target.value)},value:this.props.config.onErrorInLoop},l.a.createElement(Nt.a,{value:"continue_next_loop"},"Continue next loop"),l.a.createElement(Nt.a,{value:"stop"},"Stop"))),l.a.createElement(Dt.a.Item,an({label:"Default Vision Search Confidence"},n),l.a.createElement(Rt.a,{style:{width:"200px"},placeholder:"interval",value:""+this.props.config.defaultVisionSearchConfidence,onChange:function(e){return t("defaultVisionSearchConfidence",parseFloat(e))}},Object(I.range)(1,11,1).map((function(e){return l.a.createElement(Rt.a.Option,{key:e,value:""+(.1*e).toFixed(1)},(.1*e).toFixed(1))})))),l.a.createElement(Dt.a.Item,an({label:l.a.createElement("a",{target:"_blank",href:"https://a9t9.com/x/idehelp?help=cmdline"},"Allow Command Line")},n),l.a.createElement(jt.a,{onChange:function(e){return t("allowRunFromBookmark",e.target.checked)},checked:this.props.config.allowRunFromBookmark},"Run macro and test suite shortcuts from Javascript Bookmarklets"),l.a.createElement(jt.a,{onChange:function(e){return t("allowRunFromFileSchema",e.target.checked)},checked:this.props.config.allowRunFromFileSchema},"Run embedded macros from local files"),l.a.createElement(jt.a,{onChange:function(e){return t("allowRunFromHttpSchema",e.target.checked)},checked:this.props.config.allowRunFromHttpSchema},"Run embedded macros from public websites")))),l.a.createElement(kt.a.TabPane,{tab:"Record",key:"record",className:"record-pane"},l.a.createElement(Dt.a,null,l.a.createElement(Dt.a.Item,an({label:"Notification"},n),l.a.createElement(jt.a,{onChange:function(e){return t("recordNotification",e.target.checked)},checked:this.props.config.recordNotification},"Show notifications when recording")),l.a.createElement(Dt.a.Item,an({label:"click / clickAt"},n),l.a.createElement(Nt.a.Group,{onChange:function(e){return t("recordClickType",e.target.value)},value:this.props.config.recordClickType},l.a.createElement(Nt.a,{value:"click"},"Record click"),l.a.createElement(Nt.a,{value:"clickAt"},"Record clickAt"))))),l.a.createElement(kt.a.TabPane,{tab:"Backup",key:"backup",className:"backup-pane"},l.a.createElement("h4",null,"Automatic Backup"),l.a.createElement("p",null,"The automatic backup reminder helps to you to regularly export macros and other data as ZIP archive - so you don't loose your macros when you uninstall Kantu by mistake. The ZIP archive does not include data that is already stored directly on hard drive with the XFileAcess module."),l.a.createElement("div",{className:"row"},l.a.createElement(jt.a,{onChange:function(e){return t("enableAutoBackup",e.target.checked)},checked:this.props.config.enableAutoBackup}),l.a.createElement("span",null,"Show backup reminder every"),l.a.createElement(It.a,{type:"number",min:1,disabled:!this.props.config.enableAutoBackup,value:this.props.config.autoBackupInterval,onChange:function(e){return t("autoBackupInterval",e.target.value)},style:{width:"40px"}}),l.a.createElement("span",null," days")),l.a.createElement("div",{className:"row"},l.a.createElement("p",null,"Backup includes"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(jt.a,{onChange:function(e){return t("autoBackupTestCases",e.target.checked)},checked:this.props.config.autoBackupTestCases}),l.a.createElement("span",null,"Macros")),l.a.createElement("li",null,l.a.createElement(jt.a,{onChange:function(e){return t("autoBackupTestSuites",e.target.checked)},checked:this.props.config.autoBackupTestSuites}),l.a.createElement("span",null,"Test suites")),l.a.createElement("li",null,l.a.createElement(jt.a,{onChange:function(e){return t("autoBackupScreenshots",e.target.checked)},checked:this.props.config.autoBackupScreenshots}),l.a.createElement("span",null,"Screenshots")),l.a.createElement("li",null,l.a.createElement(jt.a,{onChange:function(e){return t("autoBackupCSVFiles",e.target.checked)},checked:this.props.config.autoBackupCSVFiles}),l.a.createElement("span",null,"CSV files")),l.a.createElement("li",null,l.a.createElement(jt.a,{onChange:function(e){return t("autoBackupVisionImages",e.target.checked)},checked:this.props.config.autoBackupVisionImages}),l.a.createElement("span",null,"Visual UI Test images")))),l.a.createElement("div",{className:"row"},l.a.createElement("span",null,"And you can also "),l.a.createElement(y.a,{type:"primary",onClick:function(){return e.props.runBackup()}},"Run backup now"))),l.a.createElement(kt.a.TabPane,{tab:"Security",key:"security",className:"security-pane"},l.a.createElement("h4",null,"Master password for Password Encryption"),l.a.createElement("p",null,"A master password is used to encrypt and decrypt all stored website passwords. The websites passwords are encrypted using strong encryption.",l.a.createElement("a",{target:"_blank",href:"https://a9t9.com/x/idehelp?help=encryption"},"More info >>")),l.a.createElement("div",null,l.a.createElement(Nt.a.Group,{onChange:function(e){return t("shouldEncryptPassword",e.target.value)},value:this.props.config.shouldEncryptPassword},l.a.createElement(Nt.a,{value:"no"},"Do not encrypt passwords"),l.a.createElement(Nt.a,{value:"master_password"},"Enter master password here to store it")),"master_password"===this.props.config.shouldEncryptPassword?l.a.createElement("div",null,l.a.createElement("label",null,"Master password:"),l.a.createElement(It.a,{type:"password",style:{width:"200px"},value:this.props.config.masterPassword,onChange:function(e){return t("masterPassword",e.target.value)}})):null)),l.a.createElement(kt.a.TabPane,{tab:"XModules",key:"xmodules",className:"xmodules-pane"},l.a.createElement("div",{className:"xmodule-item"},l.a.createElement("div",{className:"xmodule-title"},l.a.createElement("span",null,l.a.createElement("b",null,"FileAccess XModule")," - Read and write to your hard drive"),l.a.createElement("a",{href:Object(Zt.getXFile)().infoLink(),target:"_blank"},"More Info"),l.a.createElement(y.a,{type:"primary",onClick:function(){Object(Zt.getXFile)().getVersion().then((function(t){var n=t.installed,a=t.version,r=n?"Installed (v"+a+")":"Not Installed";o.a.info("status updated: "+r),e.setState(Object(I.updateIn)(["xModuleData",Object(Zt.getXFile)().getName()],(function(e){return an({},e,t,{config:Object(Zt.getXFile)().getCachedConfig()})}),e.state))}))}},"Test it")),l.a.createElement("div",{className:"xmodule-status"},l.a.createElement("label",null,"Status:"),this.state.xModuleData[Object(Zt.getXFile)().getName()]&&this.state.xModuleData[Object(Zt.getXFile)().getName()].installed?l.a.createElement("div",{className:"status-box"},l.a.createElement("span",null,"Installed (v",this.state.xModuleData[Object(Zt.getXFile)().getName()].version,")"),l.a.createElement("a",{target:"_blank",href:Object(Zt.getXFile)().checkUpdateLink(this.state.xModuleData[Object(Zt.getXFile)().getName()]&&this.state.xModuleData[Object(Zt.getXFile)().getName()].version,nn.a.runtime.getManifest().version)},"Check for update")):l.a.createElement("div",{className:"status-box"},l.a.createElement("span",null,"Not Installed"),l.a.createElement("a",{href:Object(Zt.getXFile)().downloadLink(),target:"_blank"},"Download it"))),l.a.createElement("div",{className:"xmodule-settings"},l.a.createElement("h3",null,"Settings"),l.a.createElement("div",{className:"xmodule-settings-item"},l.a.createElement("div",{className:"settings-detail"},l.a.createElement("label",null,"Home Folder"),l.a.createElement("div",{className:"settings-detail-content"},l.a.createElement(It.a,{type:"text",value:Object(Zt.getXFile)().getCachedConfig().rootDir,disabled:!(this.state.xModuleData[Object(Zt.getXFile)().getName()]&&this.state.xModuleData[Object(Zt.getXFile)().getName()].installed),onChange:function(t){var n=t.target.value;e.setState(Object(I.compose)(Object(I.setIn)(["xModuleData",Object(Zt.getXFile)().getName(),"config","rootDir"],n),Object(I.setIn)(["xFileRootDirChanged"],!0))(e.state)),Object(Zt.getXFile)().setConfig({rootDir:n})},onBlur:function(){e.state.xFileRootDirChanged&&(e.setState({xFileRootDirChanged:!1}),Object(Zt.getXFile)().sanityCheck().then((function(){e.setState(Object(I.setIn)(["xModuleData",Object(Zt.getXFile)().getName(),"checkResult"],{error:null},e.state)),Object(P.getStorageManager)().emit(P.StorageManagerEvent.RootDirChanged)}),(function(t){e.setState(Object(I.setIn)(["xModuleData",Object(Zt.getXFile)().getName(),"checkResult"],{error:t.message},e.state)),e.props.updateUI({showSettings:!0,settingsTab:"xmodules"})})))}}),this.state.xModuleData[Object(Zt.getXFile)().getName()]&&this.state.xModuleData[Object(Zt.getXFile)().getName()].checkResult&&this.state.xModuleData[Object(Zt.getXFile)().getName()].checkResult.error?l.a.createElement("div",{className:"check-result"},this.state.xModuleData[Object(Zt.getXFile)().getName()].checkResult.error):null)),l.a.createElement("div",{className:"settings-desc"},"In this folder, Kantu creates /macros, /images, /testsuites, /datasources")))),l.a.createElement("div",{className:"xmodule-item"},l.a.createElement("div",{className:"xmodule-title"},l.a.createElement("span",null,l.a.createElement("b",null,"RealUser XModule")," - Click / Type / Drag with OS native events"),l.a.createElement("a",{href:Object(en.getXUserIO)().infoLink(),target:"_blank"},"More Info"),l.a.createElement(y.a,{type:"primary",onClick:function(){Object(en.getXUserIO)().getVersion().then((function(t){var n=t.installed,a=t.version,r=n?"Installed (v"+a+")":"Not Installed";o.a.info("status updated: "+r),e.setState(Object(I.updateIn)(["xModuleData",Object(en.getXUserIO)().getName()],(function(e){return an({},e,t,{config:Object(en.getXUserIO)().getCachedConfig()})}),e.state))}))}},"Test it")),l.a.createElement("div",{className:"xmodule-status"},l.a.createElement("label",null,"Status:"),this.state.xModuleData[Object(en.getXUserIO)().getName()]&&this.state.xModuleData[Object(en.getXUserIO)().getName()].installed?l.a.createElement("div",{className:"status-box"},l.a.createElement("span",null,"Installed (v",this.state.xModuleData[Object(en.getXUserIO)().getName()].version,")"),l.a.createElement("a",{target:"_blank",href:Object(en.getXUserIO)().checkUpdateLink(this.state.xModuleData[Object(en.getXUserIO)().getName()]&&this.state.xModuleData[Object(en.getXUserIO)().getName()].version,nn.a.runtime.getManifest().version)},"Check for update")):l.a.createElement("div",{className:"status-box"},l.a.createElement("span",null,"Not Installed"),l.a.createElement("a",{href:Object(en.getXUserIO)().downloadLink(),target:"_blank"},"Download it")))))))}},{key:"renderMainMenu",value:function(){var e=this,t=this.state,n=(t.htmlUri,t.jsonUri,this.props),a=(n.status,n.editing),r=(a.commands,a.meta.src),o=this.props.player.status===Qt.f.STOPPED;r&&r.name;return l.a.createElement(St.a,{onClick:function(t){switch(t.key){case"play_settings":e.showSettingsModal()}},selectable:!1},l.a.createElement(St.a.Item,{key:"play_settings",disabled:!o},"Replay settings.."))}},{key:"renderStatus",value:function(){var e=this.props,t=e.status,n=e.player;return l.a.createElement("div",{className:"status"},function(){switch(t){case Qt.a.RECORDER:return"Recording";case Qt.a.PLAYER:switch(n.status){case Qt.f.PLAYING:var e=n.nextCommandIndex,a=n.loops,r=n.currentLoop,o=n.timeoutStatus;if(null===e||null===a||0===r)return"";var i=["Line "+(e+1),"Round "+r+"/"+a];if(o&&o.type&&o.total){var s=o.type,c=o.total,l=o.past;i.unshift(s+" "+l/1e3+"s ("+c/1e3+")")}return i.join(" | ");case Qt.f.PAUSED:return"Player paused";default:return""}default:return""}}())}},{key:"renderActions",value:function(){var e=this,t=this.props,n=(t.testCases,t.editing,t.player),a=t.status,r=l.a.createElement(St.a,{onClick:function(t){switch(t.key){case"play_loop":e.togglePlayLoopsModal(!0)}},selectable:!1},l.a.createElement(St.a.Item,{key:"play_loop",disabled:!1},"Play loop.."));if(a===Qt.a.RECORDER)return l.a.createElement("div",{className:"actions"},l.a.createElement(y.a,{onClick:this.onToggleRecord,style:{color:"#ff0000"}},l.a.createElement("span",null,"Stop Record")));switch(n.status){case Qt.f.PLAYING:return l.a.createElement("div",{className:"actions"},l.a.createElement(y.a.Group,null,l.a.createElement(y.a,{onClick:function(){return e.getPlayer().stop()}},l.a.createElement("span",null,"Stop")),l.a.createElement(y.a,{onClick:function(){return e.getPlayer("testCase").pause()}},l.a.createElement("span",null,"Pause"))));case Qt.f.PAUSED:return l.a.createElement("div",{className:"actions"},l.a.createElement(y.a.Group,null,this.props.player.mode===Qt.e.TEST_CASE?l.a.createElement(y.a,{onClick:function(){return e.getPlayer("testCase").resume(!0)}},"Step"):null,l.a.createElement(y.a,{onClick:function(){return e.getPlayer().stop()}},"Stop"),l.a.createElement(y.a,{onClick:function(){return e.getPlayer("testCase").resume()}},"Resume")));case Qt.f.STOPPED:return l.a.createElement("div",{className:"actions"},l.a.createElement(y.a,{onClick:this.onToggleRecord},l.a.createElement("span",null,"Record")),l.a.createElement(y.a.Group,{className:"play-actions"},l.a.createElement(y.a,{onClick:function(){return e.playCurrentMacro(!0)}},"Step"),l.a.createElement(Tt.a.Button,{onClick:function(){return e.playCurrentMacro(!1)},overlay:r},l.a.createElement("span",null,"Play Macro"))),l.a.createElement(y.a,{shape:"circle",onClick:function(){return e.showSettingsModal()}},l.a.createElement(wt.a,{type:"setting"})))}}},{key:"renderMacro",value:function(){var e=this.props,t=(e.testCases,e.editing),n=e.player,a=e.hasUnsaved,r=t.meta.src,o=n.status===Qt.f.STOPPED,i=a?"unsaved":"",s={text:r?"Save":"Save..",disabled:!a};return l.a.createElement("div",{className:"select-case"},l.a.createElement("span",{className:"test-case-name "+i},r?r.name:"Untitled"),o?l.a.createElement(y.a,{disabled:s.disabled,onClick:this.onClickSave},l.a.createElement("span",null,s.text)):null)}},{key:"render",value:function(){var e=this.props,t=e.testCases;e.player.status,Qt.f.STOPPED;return t.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n===a?0:1})),l.a.createElement("div",{className:"header "+this.props.status.toLowerCase()},this.renderMacro(),this.renderStatus(),this.renderActions(),this.renderPlayLoopModal(),this.renderSettingModal())}}]),t}(l.a.Component),mn=Object(C.b)((function(e){return{hasUnsaved:Kt(e),route:e.route,testCases:[].concat(on(e.editor.testCases)),editing:e.editor.editing,player:e.player,status:e.status,config:e.config,ui:e.ui}}),(function(e){return Object(T.b)(an({},a),e)}))(Object(m.b)(dn)),pn=n(110),fn=n.n(pn),gn=(n(594),n(407)),hn=n.n(gn),vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bn=(un=nn.a.isFirefox()?1:0,nn.a.bookmarks.getTree().then((function(e){return e[0].children[un].id}))),yn=function(e){return bn.then((function(t){return nn.a.bookmarks.create(vn({},e,{parentId:t}))}))},En=n(1),wn=n.n(En),Cn=n(111),Tn=(n(87),n(207),n(208),n(209),n(210),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _n=function(e){function t(){var e,n,a;xn(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=Sn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={value:"",valueModified:null,errMsg:null},a.onSave=function(){var e=null;try{a.props.validate(a.state.valueModified),a.props.onChange(a.state.valueModified)}catch(t){e=t.message}finally{a.setState({errMsg:e})}},Sn(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Tn(t,[{key:"componentDidMount",value:function(){this.setState({value:this.props.value,valueModified:this.props.value})}},{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value,valueModified:e.value})}},{key:"render",value:function(){var e=this;return l.a.createElement(w.a,{visible:this.props.visible,okText:"Save",onOk:this.onSave,onCancel:this.props.onClose,width:"80%"},l.a.createElement("pre",{style:{color:"red",lineHeight:"18px",marginBottom:"10px"}},this.state.errMsg),l.a.createElement(Cn.UnControlled,{className:this.state.sourceErrMsg?"has-error":"no-error",value:this.state.value,onChange:function(t,n,a){return e.setState({valueModified:a})},options:{mode:{name:"javascript",json:!0},lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0}}))}}]),t}(l.a.Component);_n.propTypes={value:wn.a.string.isRequired,onClose:wn.a.func.isRequired,visible:wn.a.bool,validate:wn.a.func,onChange:wn.a.func},_n.defaultProps={visible:!1,validate:function(){return!0},onChange:function(){}};var kn=_n,On=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},In=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Pn=function(e){function t(){var e,n,a;An(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=Nn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={isEditing:!1},a.onChange=function(e){a.setState({value:e.target.value})},a.onKeyDown=function(e){13===e.keyCode?a.submit():27===e.keyCode&&a.setState({value:a.props.value},a.submit)},a.onBlur=function(e){a.submit()},a.onClickText=function(){a.props.clickToEdit&&a.setState({isEditing:!0})},a.submit=function(){a.setState({isEditing:!1}),a.props.onChange&&a.props.onChange(a.state.value)},Nn(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),In(t,[{key:"componentDidMount",value:function(){this.setState({isEditing:this.props.isEditing,value:this.props.value}),this.props.isEditing&&this.focusOnInput()}},{key:"componentWillReceiveProps",value:function(e){var t={};this.props.isEditing!==e.isEditing&&(t.isEditing=e.isEditing,t.isEditing&&this.focusOnInput()),this.props.value!==e.value&&(t.value=e.value),this.setState(t)}},{key:"focusOnInput",value:function(){var e=this;setTimeout((function(){var t=e.input.refs.input;t&&(t.focus(),t.selectionStart=0,t.selectionEnd=t.value.length)}),200)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isEditing,a=t.value;return l.a.createElement("div",{className:this.props.className},n?l.a.createElement(It.a,On({value:a,onChange:this.onChange,onBlur:this.onBlur,onKeyDown:this.onKeyDown,ref:function(t){e.input=t}},this.props.inputProps||{})):l.a.createElement("span",{onClick:this.onClickText},l.a.createElement("span",null,a),this.props.clickToEdit?l.a.createElement(wt.a,{type:"edit",style:{marginLeft:"10px"}}):null))}}]),t}(l.a.Component);Pn.propTypes={value:wn.a.string,isEditing:wn.a.bool,onChange:wn.a.func,inputProps:wn.a.object,textProps:wn.a.object,className:wn.a.any,clickToEdit:wn.a.bool};var jn=Pn,Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ln=function(e,t){var n=Object(ee.stringifyTestSuite)({name:e.name,cases:e.cases},t),a=new Blob([n],{type:"text/plain;charset=utf-8"});v.a.saveAs(a,"suite_"+e.name+".json",!0)},Fn=function(e){var t=Object(ee.toHtml)({name:e.name}),n=new Blob([t],{type:"text/plain;charset=utf-8"});v.a.saveAs(n,e.name+".html",!0)},Un=function(e){function t(){var e,n,a;Mn(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=a=Rn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={tsContextMenu:{x:null,y:null,isShown:!1},tscContextMenu:{x:null,y:null,isShown:!1},tsEditingNameIndex:-1,editTestSuiteSource:{ts:null,visible:!1}},a.addTestSuite=function(){a.props.addTestSuite({name:"__Untitled__",cases:[]})},a.addTestCaseToTestSuite=function(e){a.props.updateTestSuite(e.id,{cases:e.cases.concat({testCaseId:a.props.testCases[0]&&a.props.testCases[0].id,loops:1})})},a.removeTestCaseFromTestSuite=function(e,t){var n,r,o,i,s,c;e.cases.splice(t,1),a.props.updateTestSuite(e.id,{cases:e.cases,playStatus:(n=e.playStatus,r=void 0===n?{}:n,o=r.doneIndices,i=void 0===o?[]:o,s=r.errorIndices,c=function(e){return void 0===e||e===t?-1:e>t?e-1:e},{errorIndices:(void 0===s?[]:s).map(c).filter((function(e){return-1!==e})),doneIndices:i.map(c).filter((function(e){return-1!==e}))})})},a.toggleTestSuiteFold=function(e){a.props.updateTestSuite(e.id,{fold:!e.fold})},a.foldAllTestSuites=function(){a.props.testSuites.forEach((function(e){a.props.updateTestSuite(e.id,{fold:!0})}))},a.onClickTestSuiteMore=function(e,t,n){e.stopPropagation(),e.preventDefault();var r={tsContextMenu:{x:e.clientX,y:e.clientY,isShown:!0,ts:t,tsIndex:n}};setTimeout((function(){return a.setState(r)}),20)},a.onClickTsTestCaseMore=function(e,t,n,r,o){e.stopPropagation(),e.preventDefault();var i={tscContextMenu:{x:e.clientX,y:e.clientY,isShown:!0,tc:t,ts:r,tcIndex:n,tsIndex:o}};setTimeout((function(){return a.setState(i)}),20)},a.hideTsContextMenu=function(){a.setState({tsContextMenu:Vn({},a.state.tsContextMenu,{isShown:!1})})},a.hideTscContextMenu=function(){a.setState({tscContextMenu:Vn({},a.state.tscContextMenu,{isShown:!1})})},a.onTsMenuClick=function(e,t,n){var r=e.key;switch(a.hideTsContextMenu(),r){case"play":q({name:"testSuite"}).play({title:t.name,extra:{id:t.id,name:t.name},mode:q().C.MODE.STRAIGHT,startIndex:0,resources:t.cases.map((function(e){return{id:e.testCaseId,loops:e.loops}}))});break;case"edit_source":a.setState({editTestSuiteSource:{ts:t,visible:!0}});break;case"rename":a.setState({tsEditingNameIndex:n});break;case"export":Ln(t,a.props.testCases);break;case"create_bookmark":var i=prompt("Title for this bookmark","#"+t.name+".kantu");if(null===i)return;return yn(Object(ee.toBookmarkData)({bookmarkTitle:i,name:t.name})).then((function(){o.a.success("successfully created bookmark!",1.5)}));case"export_html":return Fn(t);case"delete":w.a.confirm({title:"Are your sure to delete this test suite?",okText:"Confirm",onOk:function(){return a.props.removeTestSuite(t.id)}})}},a.onTscMenuClick=function(e,t,n,r,o){var i=e.key;switch(a.hideTscContextMenu(),i){case"play_from_here":q({name:"testSuite"}).play({title:r.name,extra:{id:r.id,name:r.name},mode:q().C.MODE.STRAIGHT,startIndex:n,resources:r.cases.map((function(e){return{id:e.testCaseId,loops:e.loops}}))})}},a.onChangeTsName=function(e,t,n){a.setState({tsEditingNameIndex:-1}),a.props.updateTestSuite(t.id,{name:e})},a.onChangeTsCase=function(e,t,n,r,o){a.props.updateTestSuite(r.id,{cases:Object(I.setIn)([n,e],t,r.cases)})},a.getTsTestCaseClass=function(e,t){if(!t)return"";var n=t.doneIndices,a=void 0===n?[]:n,r=t.errorIndices,o=void 0===r?[]:r;return e===t.currentIndex?"current-tc":-1!==o.indexOf(e)?"error-tc":-1!==a.indexOf(e)?"done-tc":""},a.onJSONFileChange=function(e){return setTimeout((function(){a.jsonFileInput.value=null}),500),a.onReadFile((function(e){return Object(ee.parseTestSuite)(e,a.props.testCases)}))(e)},a.onReadFile=function(e){return function(t){var n=[].slice.call(t.target.files);if(n&&n.length){Promise.all(n.map((function(t){return new Promise((function(n,a){var r=new FileReader;r.onload=function(a){try{var r=a.target.result,o=e(r,t.name);n({data:o})}catch(e){n({err:e,fileName:t.name})}},r.readAsText(t)}))}))).then((function(e){var t=e.filter((function(e){return e.data})),n=e.filter((function(e){return e.err}));a.props.addTestSuites(t.map((function(e){return e.data}))).then((function(e){var t=e.passCount,r=e.failCount,i=e.failTcs;o.a.info([t+" test suite"+(t>1?"s":"")+" imported!",n.length+r+" test suite"+(n.length+r>1?"s":"")+" failed!"].join(", "),3),n.forEach((function(e){a.props.addLog("error","in parsing "+e.fileName+": "+e.err.message)})),i.forEach((function(e){a.props.addLog("error","duplicated test suite name: "+e.name)}))}))}))}}},a.onClosePlayTestSuiteTip=function(){a.props.updateConfig({hidePlayTestSuiteTip:!0})},Rn(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Dn(t,[{key:"getPortalContainer",value:function(){var e="__context_menu_container__",t=document.getElementById(e);if(t)return t;var n=document.createElement("div");return n.id=e,document.body.appendChild(n),n}},{key:"renderTestSuiteContextMenu",value:function(){var e=this,t=this.state.tsContextMenu,n=t.x+window.scrollX;n-230>0&&(n-=230);var a={position:"absolute",top:t.y+window.scrollY,left:n,display:t.isShown?"block":"none"},r={width:"230px"},o=l.a.createElement("div",{style:a,className:"context-menu"},l.a.createElement(fn.a,{onClickOutside:this.hideTsContextMenu},l.a.createElement(St.a,{onClick:function(n){return e.onTsMenuClick(n,t.ts,t.tsIndex)},style:r,mode:"vertical",selectable:!1},l.a.createElement(St.a.Item,{key:"play"},"Play"),l.a.createElement(St.a.Item,{key:"edit_source"},"Edit source.."),l.a.createElement(St.a.Item,{key:"rename"},"Rename.."),l.a.createElement(St.a.Item,{key:"export"},"Export"),l.a.createElement(St.a.Item,{key:"export_html"},"Create HTML autorun page"),l.a.createElement(St.a.Item,{key:"create_bookmark"},"Add to Bookmarks"),l.a.createElement(St.a.Divider,null),l.a.createElement(St.a.Item,{key:"delete"},"Delete"))));return d.a.createPortal(o,this.getPortalContainer())}},{key:"renderTestSuiteCaseContextMenu",value:function(){var e=this,t=this.state.tscContextMenu,n=t.x+window.scrollX;n-150>0&&(n-=150);var a={position:"absolute",top:t.y+window.scrollY,left:n,display:t.isShown?"block":"none"},r={width:"150px"},o=l.a.createElement("div",{style:a,className:"context-menu"},l.a.createElement(fn.a,{onClickOutside:this.hideTscContextMenu},l.a.createElement(St.a,{onClick:function(n){return e.onTscMenuClick(n,t.tc,t.tcIndex,t.ts,t.tsIndex)},style:r,mode:"vertical",selectable:!1},l.a.createElement(St.a.Item,{key:"play_from_here"},"Replay from here"))));return d.a.createPortal(o,this.getPortalContainer())}},{key:"renderTestSuiteMenu",value:function(){var e=this;return l.a.createElement(St.a,{onClick:function(t){switch(t.key){case"export_all":var n=new Q.a;if(0===e.props.testSuites.length)return o.a.error("No saved test suites to export",1.5);var a=Object(I.nameFactory)();e.props.testSuites.forEach((function(t){var r=a(t.name);n.file(r+".json",Object(ee.stringifyTestSuite)(t,e.props.testCases))})),n.generateAsync({type:"blob"}).then((function(e){v.a.saveAs(e,"all_suites.zip")}))}},selectable:!1},l.a.createElement(St.a.Item,{key:"export_all"},"Export all (JSON)"),l.a.createElement(St.a.Item,{key:"4"},l.a.createElement("label",{htmlFor:"select_json_files_for_ts"},"Import JSON"),l.a.createElement("input",{multiple:!0,type:"file",accept:".json",id:"select_json_files_for_ts",onChange:this.onJSONFileChange,style:{display:"none"},ref:function(t){e.jsonFileInput=t}})))}},{key:"renderEditTestSuiteSource",value:function(){var e=this;if(!this.state.editTestSuiteSource.visible)return null;var t=this.state.editTestSuiteSource.ts,n=Object(ee.stringifyTestSuite)(t,this.props.testCases),a=this.props.testCases;return l.a.createElement(kn,{visible:!0,value:n,validate:function(e){return Object(ee.validateTestSuiteText)(e,a)},onClose:function(){return e.setState({editTestSuiteSource:{visible:!1}})},onChange:function(n){var r=Object(ee.parseTestSuite)(n,a);e.props.updateTestSuite(t.id,r),e.setState({editTestSuiteSource:{visible:!1}})}})}},{key:"renderTestSuites",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"test-suite-actions"},l.a.createElement(y.a,{type:"primary",onClick:this.addTestSuite},"+ Test Suite"),l.a.createElement(y.a,{type:"default",onClick:this.foldAllTestSuites},"Fold"),l.a.createElement(Tt.a,{overlay:this.renderTestSuiteMenu(),trigger:["click"]},l.a.createElement(y.a,{shape:"circle"},l.a.createElement(wt.a,{type:"setting"})))),!this.props.config.hidePlayTestSuiteTip&&this.props.testSuites.length>0?l.a.createElement(hn.a,{type:"info",message:"Right click to play test suite",onClose:this.onClosePlayTestSuiteTip,closable:!0,showIcon:!0,style:{margin:"10px",paddingRight:"30px"}}):null,0===this.props.testSuites.length?l.a.createElement("div",{className:"no-data"},"No test suite"):null,l.a.createElement("ul",{className:"sidebar-test-suites"},this.props.testSuites.map((function(t,n){return l.a.createElement("li",{key:t.id,className:Object(I.cn)("test-suite-item ",{fold:t.fold,playing:t.playStatus&&t.playStatus.isPlaying})},l.a.createElement("div",{className:"test-suite-row",onClick:function(){return e.toggleTestSuiteFold(t)},onContextMenu:function(a){return e.onClickTestSuiteMore(a,t,n)}},l.a.createElement(wt.a,{type:t.fold?"folder":"folder-open"}),l.a.createElement(jn,{className:"test-suite-title",value:t.name,onChange:function(a){return e.onChangeTsName(a,t,n)},isEditing:n===e.state.tsEditingNameIndex,inputProps:{onClick:function(e){return e.stopPropagation()},onContextMenu:function(e){return e.stopPropagation()}}}),n===e.state.tsEditingNameIndex?null:l.a.createElement(wt.a,{type:"bars",className:"more-button",onClick:function(a){return e.onClickTestSuiteMore(a,t,n)}})),t.cases.length>0?l.a.createElement("ul",{className:"test-suite-cases"},t.cases.map((function(a,r){return l.a.createElement("li",{key:r,className:e.getTsTestCaseClass(r,t.playStatus),onContextMenu:function(o){return e.onClickTsTestCaseMore(o,a,r,t,n)}},l.a.createElement(wt.a,{type:"file",style:{marginRight:"10px",cursor:"pointer"},onClick:function(){e.props.editing.meta.src;return Jt().saveOrNot().then((function(){return e.props.editTestCase(a.testCaseId),Promise.resolve()}))}}),l.a.createElement(Rt.a,{showSearch:!0,optionFilterProp:"children",value:a.testCaseId,onChange:function(a){return e.onChangeTsCase("testCaseId",a,r,t,n)},filterOption:function(e,t){return-1!==t.props.children.toLowerCase().indexOf(e.toLowerCase())},style:{flex:1,marginRight:"10px",maxWidth:"50%"}},e.props.testCases.map((function(e){return l.a.createElement(Rt.a.Option,{value:e.id,key:e.id},e.name)}))),l.a.createElement(It.a,{type:"number",min:1,value:a.loops,onChange:function(a){return e.onChangeTsCase("loops",0===a.target.value.trim().length?"1":a.target.value,r,t,n)},style:{width:"45px",marginRight:"10px"}}),l.a.createElement(wt.a,{type:"close",style:{cursor:"pointer"},onClick:function(){return e.removeTestCaseFromTestSuite(t,r)}}))}))):null,l.a.createElement("div",{className:"test-suite-more-actions"},l.a.createElement(y.a,{type:"default",onClick:function(){return e.addTestCaseToTestSuite(t)}},"+ Macro")))}))))}},{key:"render",value:function(){return l.a.createElement("div",null,this.renderTestSuites(),this.renderTestSuiteContextMenu(),this.renderTestSuiteCaseContextMenu(),this.renderEditTestSuiteSource())}}]),t}(l.a.Component),Bn=Object(C.b)((function(e){return{status:e.status,testCases:e.editor.testCases,testSuites:e.editor.testSuites,editing:e.editor.editing,player:e.player,config:e.config}}),(function(e){return Object(T.b)(Vn({},a),e)}))(Un),Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var zn=function(e){function t(){return Gn(this,t),$n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Yn(t,[{key:"render",value:function(){var e=this,t=(this.props.inputProps||{}).value,n=void 0!==t&&t.length>0;return l.a.createElement("span",{className:this.props.className,style:Kn({},this.props.style||{},{position:"relative"})},l.a.createElement(It.a,this.props.inputProps||{}),l.a.createElement(wt.a,{type:n?"close":"search",onClick:function(t){n&&e.props.inputProps&&e.props.inputProps.onChange&&e.props.inputProps.onChange({target:{value:""}})},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:n?"pointer":"auto"}}))}}]),t}(It.a),Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Jn=function(e){var t=Object(Z.toJSONString)({name:e.name,commands:e.data.commands}),n=new Blob([t],{type:"text/plain;charset=utf-8"});v.a.saveAs(n,e.name+".json",!0)},Qn=function(e){var t=Object(Z.toHtml)({name:e.name,commands:e.data.commands}),n=new Blob([t],{type:"text/plain;charset=utf-8"});v.a.saveAs(n,e.name+".html",!0)},Zn=function(e){function t(){var e,n,a;Hn(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=a=qn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={searchText:"",showDuplicate:!1,duplicateName:"",showRename:!1,rename:"",tcContextMenu:{x:null,y:null,isShown:!1}},a.onClickRename=function(){a.props.renameTestCase(a.state.rename,a.state.renameTcId).then((function(){o.a.success("successfully renamed!",1.5),a.toggleRenameModal(!1)})).catch((function(e){o.a.error(e.message,1.5)}))},a.onCancelRename=function(){a.toggleRenameModal(!1),a.setState({rename:null})},a.onChangeRename=function(e){a.setState({rename:e.target.value})},a.onClickDuplicate=function(){a.props.duplicateTestCase(a.state.duplicateName,a.state.duplicateTcId).then((function(){o.a.success("successfully duplicated!",1.5)})),a.toggleDuplicateModal(!1)},a.onCancelDuplicate=function(){a.toggleDuplicateModal(!1)},a.onChangeDuplicate=function(e){a.setState({duplicateName:e.target.value})},a.toggleDuplicateModal=function(e,t){var n=t?t.name+"_new":"";a.setState({showDuplicate:e,duplicateTcId:t&&t.id,duplicateName:n}),e&&setTimeout((function(){var e=a.inputDuplicateTestCase.refs.input;e.focus(),e.selectionStart=e.selectionEnd=e.value.length}),100)},a.toggleRenameModal=function(e,t){a.setState({showRename:e,renameTcId:t&&t.id}),e&&setTimeout((function(){var e=a.inputRenameTestCase.refs.input;e.focus(),e.selectionStart=e.selectionEnd=e.value.length}),100)},a.getItemKlass=function(e){var t=a.props.editing.meta.src,n=[];return t&&t.id===e.id&&n.push("selected"),e.status===Qt.h.SUCCESS?n.push("success"):e.status===Qt.h.ERROR?n.push("error"):n.push("normal"),a.props.status!==Qt.a.NORMAL&&n.push("disabled"),n.join(" ")},a.changeTestCase=function(e){return new Promise((function(t){if(a.props.status!==Qt.a.NORMAL)return t(!1);if(a.props.editing.meta.src&&a.props.editing.meta.src.id===e)return t(!0);return Jt().saveOrNot().then((function(){a.props.editTestCase(e),t(!0)}))}))},a.playTestCase=function(e){a.props.status===Qt.a.NORMAL&&a.changeTestCase(e).then((function(e){e&&setTimeout((function(){var e=a.props.editing.commands,t=e.find((function(e){return"open"===e.cmd.toLowerCase()})),n=a.props.editing.meta.src;a.props.playerPlay({title:n&&n.name&&n.name.length?n.name:"Untitled",extra:{id:n&&n.id},mode:q().C.MODE.STRAIGHT,startIndex:0,startUrl:t?t.target:null,resources:e,postDelay:1e3*a.props.player.playInterval})}),500)}))},a.onReadFile=function(e){return function(t){var n=[].slice.call(t.target.files);if(n&&n.length){Promise.all(n.map((function(t){return new Promise((function(n,a){var r=new FileReader;r.onload=function(a){try{var r=a.target.result,o=e(r,t.name);n({data:o})}catch(e){n({err:e,fileName:t.name})}},r.readAsText(t)}))}))).then((function(e){var t=e.filter((function(e){return e.data})),n=e.filter((function(e){return e.err}));a.props.addTestCases(t.map((function(e){return e.data}))).then((function(e){var t=e.passCount,r=e.failCount,i=e.failTcs;o.a.info([t+" macro"+(t>1?"s":"")+" imported!",n.length+r+" macro"+(n.length+r>1?"s":"")+" failed!"].join(", "),3),n.forEach((function(e){a.props.addLog("error","in parsing "+e.fileName+": "+e.err.message)})),i.forEach((function(e){a.props.addLog("error","duplicated macro name: "+e.name)}))}))}))}}},a.onHTMLFileChange=function(e){return setTimeout((function(){a.htmlFileInput.value=null}),500),a.onReadFile(Z.fromHtml)(e)},a.onJSONFileChange=function(e){return setTimeout((function(){a.jsonFileInput.value=null}),500),a.onReadFile(Z.fromJSONString)(e)},a.addTestCase=function(){a.props.editing.meta.src;return Jt().saveOrNot().then((function(){return a.props.editNewTestCase(),Promise.resolve()}))},a.onClickTestCaseMore=function(e,t,n){e.stopPropagation(),e.preventDefault();var r={tcContextMenu:{x:e.clientX,y:e.clientY,isShown:!0,tc:t,tcIndex:n}};setTimeout((function(){return a.setState(r)}),20)},a.hideTcContextMenu=function(){a.setState({tcContextMenu:Wn({},a.state.tcContextMenu,{isShown:!1})})},a.onTcMenuClick=function(e,t,n){var r=e.key;switch(a.hideTcContextMenu(),r){case"play":return a.playTestCase(t.id);case"rename":a.setState({rename:t.name}),a.toggleRenameModal(!0,t);break;case"delete":return w.a.confirm({title:"Sure to delete?",content:'Do you really want to delete "'+t.name+'"?',okText:"Delete",cancelText:"Cancel",onOk:function(){return a.props.removeTestCase(t.id).then((function(){o.a.success("successfully deleted!",1.5)})).catch((function(e){w.a.warning({title:"Failed to delete",content:e.message})}))},onCancel:function(){}});case"duplicate":return a.toggleDuplicateModal(!0,t);case"export_html":return Qn(t);case"export_json":return Jn(t);case"create_bookmark":var i=prompt("Title for this bookmark","#"+t.name+".kantu");if(null===i)return;return yn(Object(Z.toBookmarkData)({bookmarkTitle:i,name:t.name})).then((function(){o.a.success("successfully created bookmark!",1.5)}));case"copy_to_xfile":return Object(P.getStorageManager)().isStrategyTypeAvailable(P.StorageStrategyType.XFile).then((function(){var e=Object(P.getStorageManager)().getStorageForTarget(P.StorageTarget.Macro,P.StorageStrategyType.XFile),n=Wn({},t,{id:Object(I.uid)()});return delete n.status,e.write(n.name,n).then((function(){return o.a.success("copied")}))})).catch((function(e){a.props.updateUI({showFileNotInstalledDialog:1})}));case"copy_to_browser":return Object(P.getStorageManager)().isStrategyTypeAvailable(P.StorageStrategyType.Browser).then((function(){var e=Object(P.getStorageManager)().getStorageForTarget(P.StorageTarget.Macro,P.StorageStrategyType.Browser),n=Wn({},t,{id:Object(I.uid)()});return delete n.status,e.write(n.name,n).then((function(){return o.a.success("copied")}))})).catch((function(e){o.a.warn(e.message)}))}},qn(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Xn(t,[{key:"renderTestCases",value:function(){var e=this,t=!this.props.editing.meta.src,n=this.props.testCases,a=this.state.searchText.trim().toLowerCase(),r=0===a.length?function(e){return e}:function(e){return-1!==e.name.toLowerCase().indexOf(a)},o=n.filter(r);return o.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n===a?0:1})),l.a.createElement("ul",{className:"sidebar-test-cases"},0!==o.length||t?null:l.a.createElement("div",{className:"no-data"},"No macros yet"),t?l.a.createElement("li",{className:"selected"},"Untitled"):null,o.map((function(t,n){return l.a.createElement("li",{key:t.id,className:e.getItemKlass(t),onClick:function(){return e.changeTestCase(t.id)},onDoubleClick:function(){return e.playTestCase(t.id)},onContextMenu:function(a){return e.onClickTestCaseMore(a,t,n)}},l.a.createElement("span",{className:"test-case-name"},t.name),l.a.createElement(wt.a,{type:"bars",className:"more-button",onClick:function(a){return e.onClickTestCaseMore(a,t,n)}}))})))}},{key:"getPortalContainer",value:function(){var e="__context_menu_container__",t=document.getElementById(e);if(t)return t;var n=document.createElement("div");return n.id=e,document.body.appendChild(n),n}},{key:"renderTestCaseContextMenu",value:function(){var e=this,t=this.state.tcContextMenu,n=t.x+window.scrollX,a=t.y+window.scrollY,r=document.querySelector(".sidebar-inner");r&&a+220>r.clientHeight&&(a-=220),n-230>0&&(n-=230);var o={position:"absolute",top:a,left:n,display:t.isShown?"block":"none"},i={width:"230px"},s=l.a.createElement("div",{style:o,className:"context-menu"},l.a.createElement(fn.a,{onClickOutside:this.hideTcContextMenu},l.a.createElement(St.a,{onClick:function(n){return e.onTcMenuClick(n,t.tc,t.tcIndex)},style:i,mode:"vertical",selectable:!1},l.a.createElement(St.a.Item,{key:"play"},"Play"),l.a.createElement(St.a.Item,{key:"rename"},"Rename.."),l.a.createElement(St.a.Item,{key:"duplicate"},"Duplicate.."),l.a.createElement(St.a.Item,{key:"export_json"},"Export as JSON"),l.a.createElement(St.a.Item,{key:"export_html"},"Export as HTML (plus autorun)"),l.a.createElement(St.a.Item,{key:"create_bookmark"},"Add shortcut to bookmarks bar"),Object(P.getStorageManager)().isXFileMode()?l.a.createElement(St.a.Item,{key:"copy_to_browser"},"Copy to Local Storage"):null,Object(P.getStorageManager)().isBrowserMode()?l.a.createElement(St.a.Item,{key:"copy_to_xfile"},"Copy to Macro Folder"):null,l.a.createElement(St.a.Divider,null),l.a.createElement(St.a.Item,{key:"delete"},"Delete"))));return d.a.createPortal(s,this.getPortalContainer())}},{key:"renderTestCaseMenu",value:function(){var e=this;return l.a.createElement(St.a,{onClick:function(t){switch(t.key){case"export_all_json":var n=new Q.a;if(0===e.props.testCases.length)return o.a.error("No saved macros to export",1.5);e.props.testCases.forEach((function(e){n.file(e.name+".json",Object(Z.toJSONString)({name:e.name,commands:e.data.commands}))})),n.generateAsync({type:"blob"}).then((function(e){v.a.saveAs(e,"all_test_cases.zip")}))}},selectable:!1},l.a.createElement(St.a.Item,{key:"export_all_json"},"Export All (JSON)"),l.a.createElement(St.a.Item,{key:"import_json"},l.a.createElement("label",{htmlFor:"select_json_files_for_macros"},"Import JSON"),l.a.createElement("input",{multiple:!0,type:"file",accept:".json",id:"select_json_files_for_macros",onChange:this.onJSONFileChange,ref:function(t){e.jsonFileInput=t},style:{display:"none"}})),l.a.createElement(St.a.Item,{key:"import_html"},l.a.createElement("label",{htmlFor:"select_html_files"},"Import HTML"),l.a.createElement("input",{multiple:!0,type:"file",accept:".html,.htm",id:"select_html_files",onChange:this.onHTMLFileChange,ref:function(t){e.htmlFileInput=t},style:{display:"none"}})))}},{key:"renderDuplicateModal",value:function(){var e=this;return l.a.createElement(w.a,{title:"Duplicate Macro..",okText:"Save",cancelText:"Cancel",visible:this.state.showDuplicate,onOk:this.onClickDuplicate,onCancel:this.onCancelDuplicate,className:"duplicate-modal"},l.a.createElement(It.a,{style:{width:"100%"},value:this.state.duplicateName,onKeyDown:function(t){13===t.keyCode&&e.onClickDuplicate()},onChange:this.onChangeDuplicate,placeholder:"macro name",ref:function(t){e.inputDuplicateTestCase=t}}))}},{key:"renderRenameModal",value:function(){var e=this;return l.a.createElement(w.a,{title:"Rename the macro as..",okText:"Save",cancelText:"Cancel",visible:this.state.showRename,onOk:this.onClickRename,onCancel:this.onCancelRename,className:"rename-modal"},l.a.createElement(It.a,{style:{width:"100%"},value:this.state.rename,onKeyDown:function(t){13===t.keyCode&&e.onClickRename()},onChange:this.onChangeRename,placeholder:"macro name",ref:function(t){e.inputRenameTestCase=t}}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"test-case-actions"},l.a.createElement(y.a,{type:"primary",onClick:this.addTestCase},"+ Macro"),l.a.createElement(Tt.a,{overlay:this.renderTestCaseMenu(),trigger:["click"]},l.a.createElement(y.a,{shape:"circle"},l.a.createElement(wt.a,{type:"setting"}))),l.a.createElement(zn,{style:{flex:1},inputProps:{placeholder:"search macro",value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}})),this.renderTestCases(),this.renderTestCaseContextMenu(),this.renderDuplicateModal(),this.renderRenameModal())}}]),t}(l.a.Component),ea=Object(C.b)((function(e){return{status:e.status,testCases:e.editor.testCases,testSuites:e.editor.testSuites,editing:e.editor.editing,player:e.player,config:e.config}}),(function(e){return Object(T.b)(Wn({},a),e)}))(Zn),ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},na=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var oa=function(e){function t(){var e,n,a;aa(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=a=ra(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={drag:{isDragging:!1,startX:0,movingX:0,lastWidth:260,currentMinWidth:260}},a.getSideBarMinWidth=function(){var e=a.state.drag,t=e.isDragging,n=e.lastWidth,r=e.currentMinWidth;return(t?r:n)+"px"},a.onResizeDragStart=function(e){e.dataTransfer.setData("text","");var t=window.getComputedStyle(a.$dom),n=parseInt(t.width);a.setState(Object(I.setIn)(["drag"],{isDragging:!0,startX:e.screenX,lastWidth:n,currentWidth:n},a.state))},a.onResizeDragEnd=function(e){var t=e.screenX-a.state.drag.startX+a.state.drag.lastWidth;a.setState(Object(I.setIn)(["drag"],{isDragging:!1,startX:0,lastWidth:t,currentMinWidth:t}))},a.onTryToChangeStorageMode=function(e){var t=Object(P.getStorageManager)();t.isStrategyTypeAvailable(e).then((function(n){if(n)return a.props.updateConfig({storageMode:e}),t.setCurrentStrategyType(e);throw new Error("It should be impossible to get isOk as false")})).catch((function(e){o.a.warn(e.message),e.message&&/xFile is not installed yet/.test(e.message)?a.props.updateUI({showFileNotInstalledDialog:!0}):a.props.updateUI({showSettings:!0,settingsTab:"xmodules"})}))},ra(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),na(t,[{key:"componentDidMount",value:function(){var e=Object(P.getStorageManager)().getCurrentStrategyType();this.setState({storageMode:e})}},{key:"prefixHardDisk",value:function(e){return Object(P.getStorageManager)().isXFileMode()?l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement("img",{src:"./img/hard-drive.svg",style:{position:"relative",top:"3px",marginRight:"5px",height:"15px"}}),l.a.createElement("span",null,e)):e}},{key:"renderXFileNotInstalledModal",value:function(){var e=this;return l.a.createElement(w.a,{title:"",className:Object(I.cn)("xfile-not-installed-modal",{"left-bottom":!0===this.props.ui.showFileNotInstalledDialog}),width:350,footer:null,visible:this.props.ui.showFileNotInstalledDialog,onCancel:function(){e.props.updateUI({showFileNotInstalledDialog:!1})}},l.a.createElement("p",null,"XFileAccess Module not installed."),l.a.createElement("div",null,l.a.createElement(y.a,{type:"primary",onClick:function(){e.props.updateUI({showFileNotInstalledDialog:!1,showSettings:!0,settingsTab:"xmodules"})}},"Open Settings")))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"sidebar",ref:function(t){e.$dom=t},style:{minWidth:this.getSideBarMinWidth()}},l.a.createElement("div",{className:"sidebar-inner"},l.a.createElement(kt.a,{defaultActiveKey:"macros",activeKey:this.props.ui.sidebarTab||"macros",onChange:function(t){return e.props.updateUI({sidebarTab:t})}},l.a.createElement(kt.a.TabPane,{tab:this.prefixHardDisk("Macros"),key:"macros"},l.a.createElement(ea,null)),l.a.createElement(kt.a.TabPane,{tab:this.prefixHardDisk("Test Suites"),key:"test_suites"},l.a.createElement(Bn,null)))),l.a.createElement("div",{className:"sidebar-storage-mode"},l.a.createElement("div",{className:"storage-mode-header"},l.a.createElement("h3",null,"Storage Mode"),Object(P.getStorageManager)().isXFileMode()?l.a.createElement("img",{src:"./img/reload.svg",title:"Reload all resources on hard drive",style:{height:"15px",cursor:"pointer"},onClick:function(){Object(P.getStorageManager)().emit(P.StorageManagerEvent.ForceReload),o.a.info("reloaded from hard drive")}}):null,l.a.createElement("a",{href:"https://a9t9.com/x/idehelp?help=storage_mode",target:"_blank"},"More Info")),l.a.createElement(Rt.a,{style:{width:"100%"},placeholder:"Storage Mode",value:this.props.config.storageMode,onChange:this.onTryToChangeStorageMode},l.a.createElement(Rt.a.Option,{value:P.StorageStrategyType.Browser},"Local Storage (in browser)"),l.a.createElement(Rt.a.Option,{value:P.StorageStrategyType.XFile},"File system (on hard drive)"))),l.a.createElement("div",{className:Object(I.cn)("resize-handler",{focused:this.state.drag.isDragging}),draggable:"true",onDragStart:this.onResizeDragStart,onDragEnd:this.onResizeDragEnd,onMouseDown:function(){return e.setState(Object(I.setIn)(["drag","isDragging"],!0,e.state))}}),this.renderXFileNotInstalledModal())}}]),t}(l.a.Component),ia=Object(C.b)((function(e){return{status:e.status,testCases:e.editor.testCases,testSuites:e.editor.testSuites,editing:e.editor.editing,player:e.player,config:e.config,ui:e.ui}}),(function(e){return Object(T.b)(ta({},a),e)}))(oa),sa=(n(597),n(78)),ca=n.n(sa),la=n(408),ua=n.n(la),da=n(30),ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pa=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ha(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var va=["open","click","clickAndWait","select","selectAndWait","type","pause","waitForPageToLoad","selectFrame","assertAlert","assertConfirmation","assertPrompt","answerOnNextPrompt","store","storeText","storeTitle","storeAttribute","assertText","assertTitle","clickAt","echo","mouseOver","storeEval","verifyText","verifyTitle","sendKeys","dragAndDropToObject","selectWindow","captureScreenshot","refresh","verifyElementPresent","assertElementPresent","deleteAllCookies","label","gotoLabel","gotoIf","while","endWhile","csvRead","csvSave","if","else","endif","storeValue","assertValue","verifyValue","storeChecked","assertChecked","verifyChecked","captureEntirePageScreenshot","onDownload","throwError","comment","waitForVisible","onError","sourceSearch","sourceExtract","storeImage","localStorageExport","visionLimitSearchArea","visualSearch","visualVerify","visualAssert","editContent","bringBrowserToForeground","resize","XClick","XType","XMove"];va.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1}));var ba={cmd:"",target:"",value:""},ya=[ba],Ea=function(e){function t(){var e,n,a,r,i,s;ga(this,t);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return n=a=ha(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={cursor:null,contextMenu:{x:null,y:null,isShown:!1},visionFindPreview:{visible:!1,url:null,timer:null,left:-9999,top:-9999}},a.resetSourceCodeCursor=function(e){return ma({},e?{cursor:{line:0,ch:0}}:{})},a.onDetailChange=function(e,t){a.props.updateSelectedCommand(fa({},e,t))},a.onChangeCommandsView=function(e){switch(e){case"table_view":case"source_view":var t=a.props.sourceErrMsg?"source_view":e;a.props.setEditorActiveTab(t),"source_view"===e&&a.codeMirror&&a.state.cursor&&setTimeout((function(){a.codeMirror.setCursor(a.state.cursor,!0,!0)}),200)}},a.onSourceBlur=function(){var e=a.props,t=e.sourceTextModified;e.sourceText;a.props.saveSourceCodeToEditing(t)},a.onChangeEditSource=function(e,t,n){a.props.setSourceCurrent(n)},a.onClickFind=function(){var e,t=a.state.lastOperation,n=a.props.selectedCommand;(-1!==["visionFind","visualSearch","visualAssert","visualVerify","XClick","XMove"].indexOf(n.cmd)?(e=a.props.editing.meta.selectedIndex,a.playLine(e,{overrideScope:{"!TIMEOUT_WAIT":0},commandExtra:{throwError:!0}}),Promise.resolve(!0)):A.a.ask("PANEL_HIGHLIGHT_DOM",{lastOperation:t,locator:n.target})).catch((function(e){o.a.error(e.message,1.5)}))},a.onToggleInspect=function(){var e=a.props.selectedCommand;if(-1!==["visionFind","visualSearch","visualAssert","visualVerify","XClick","XMove"].indexOf(e.cmd))return A.a.ask("PANEL_SELECT_AREA_ON_CURRENT_PAGE").then((function(e){a.props.updateSelectedCommand({target:e.fileName}),o.a.success("Saved vision as "+e.fileName)})).catch((function(e){o.a.error(e.message)}));a.props.status===Qt.a.INSPECTOR?a.props.stopInspecting():a.props.startInspecting()},a.onDoubleClick=(r=void 0,i=void 0,s=void 0,function(e){var t=1*new Date;r===e.screenX&&i===e.screenY&&t-s<300&&function(){var t=da.a.parentWithClass("real-command",e.target);if(t){var n=parseInt(t.getAttribute("data-index"));isNaN(n)||a.playLine(n)}}(),r=e.screenX,i=e.screenY,s=t}),a.scheduleHideVisionFindPreview=function(){Object(te.a)("scheduleHideVisionFindPreview");var e=a.state.visionFindPreview.timer;return clearTimeout(e),setTimeout((function(){a.state.visionFindPreview.visible&&(Object(te.a)("to hide preview"),a.setState({visionFindPreview:{visible:!1}}))}),3e3)},a.onMouseEnterTarget=function(e,t){if(Object(te.a)("onMouseOverTarget"),-1!==["visionFind","visualSearch","visualAssert","visualVerify","XClick","XMove"].indexOf(t.cmd)&&(-1===["XClick","XMove"].indexOf(t.cmd)||/\.png/i.test(t.target))&&!a.state.visionFindPreview.visible){clearTimeout(a.state.visionFindPreview.timer);var n=Object(P.getStorageManager)().getVisionStorage(),r=e.target.getBoundingClientRect(),o=t.target.trim().split("@")[0],i={visible:!0,left:r.left,top:r.top+r.height};n.exists(o).then((function(e){return e?n.getLink(o).then((function(e){return a.setState({visionFindPreview:ma({},i,{url:e,timer:a.scheduleHideVisionFindPreview()})})})):a.setState({visionFindPreview:ma({},i,{url:"./img/not_found.png",timer:a.scheduleHideVisionFindPreview()})})}))}},a.onMouseLeaveTarget=function(e,t){Object(te.a)("onMouseOutTarget"),-1!==["visionFind","visualSearch","visualAssert","visualVerify","XClick","XMove"].indexOf(t.cmd)&&(-1===["XClick","XMove"].indexOf(t.cmd)||/\.png/i.test(t.target))&&a.state.visionFindPreview.visible&&(clearTimeout(a.state.visionFindPreview.timer),a.setState({visionFindPreview:{visible:!1}}))},a.jumpToSourceCode=function(e){a.props.setEditorActiveTab("source_view"),setTimeout((function(){var t=a.state.cmEdtiorInstance,n=3+5*e,r=n+5,o=document.querySelector(".source-view"),i=parseInt(window.getComputedStyle(o).height,10),s=(i-60)/2;Object(te.a)("margin",s,i),t.scrollIntoView({line:n,ch:0},s),t.setSelection({ch:0,line:n},{ch:0,line:r},{scroll:!1})}),100)},a.commandClassName=function(e,t){var n=a.props,r=n.editing,o=n.player,i=o.nextCommandIndex,s=o.errorCommandIndices,c=o.doneCommandIndices,l=o.breakpointIndices,u=(r.commands,[]);return-1!==l.indexOf(t)&&u.push("breakpoint-command"),"comment"===e.cmd&&u.push("comment-command"),t===r.meta.selectedIndex?u.push("selected-command"):t===i?u.push("running-command"):-1!==s.indexOf(t)?u.push("error-command"):-1!==c.indexOf(t)&&u.push("done-command"),u.join(" ")},a.needVirtualList=function(){var e=a.props.editing.commands;return(void 0===e?[]:e).length>=0},a.virtualCommmandList=function(e){var t=e.virtual,n=e.itemHeight,r=a.props.editing.commands,o=a.isPlayerStopped();return l.a.createElement("div",{style:t.style},t.items.map((function(e){return e.header?l.a.createElement("div",{className:"command-row header-row",key:"header"},l.a.createElement("div",{className:"row-col command-col"},"Command"),l.a.createElement("div",{className:"row-col target-col"},"Target"),l.a.createElement("div",{className:"row-col value-col"},"Value"),l.a.createElement("div",{className:"row-col op-col"},"Ops")):e.footer?l.a.createElement("div",{className:"command-row footer-row",key:"footer",onClick:function(){return a.props.insertCommand(ba,r.length)}},"Add"):l.a.createElement("div",{key:e.key,style:{height:n+"px"},className:"command-row real-command "+a.commandClassName(e,e.realIndex),"data-index":""+e.realIndex,onClick:function(){return a.props.selectCommand(e.realIndex)},onContextMenu:function(t){return a.onContextMenu(t,e.realIndex)}},l.a.createElement("div",{className:"row-col command-col",title:e.cmd},e.cmd),l.a.createElement("div",{className:"row-col target-col",title:e.target,onMouseEnter:function(t){return a.onMouseEnterTarget(t,e)},onMouseLeave:function(t){return a.onMouseLeaveTarget(t,e)}},e.target),l.a.createElement("div",{className:"row-col value-col",title:e.value},e.value),l.a.createElement("div",{className:"row-col op-col"},l.a.createElement(y.a,{disabled:!o,shape:"circle",onClick:function(t){a.props.removeCommand(e.realIndex),t.stopPropagation()}},l.a.createElement(wt.a,{type:"minus"})),l.a.createElement(y.a,{disabled:!o,shape:"circle",onClick:function(t){a.props.duplicateCommand(e.realIndex),t.stopPropagation()}},l.a.createElement(wt.a,{type:"plus"}))))})))},a.onContextMenu=function(e,t){Object(te.a)("onContextMenu"),a.setState({contextMenu:{x:e.clientX,y:e.clientY,isShown:!0,commandIndex:t}}),a.props.selectCommand(t,!0),e.preventDefault(),e.stopPropagation()},a.onHideMenu=function(e){0===e.button&&a.setState({contextMenu:ma({},a.state.contextMenu,{isShown:!1})})},a.getTestCaseName=function(){var e=a.props.editing.meta.src;return e&&e.name&&e.name.length?e.name:"Untitled"},a.playLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.props.editing.commands,r=a.props.editing.meta.src;return a.setState({lastOperation:"play"}),a.props.playerPlay(ma({title:a.getTestCaseName(),extra:{id:r&&r.id},mode:X.C.MODE.SINGLE,startIndex:e,startUrl:null,resources:n,postDelay:1e3*a.props.config.playCommandInterval},t))},ha(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),pa(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onHideMenu),document.addEventListener("click",this.onDoubleClick)}},{key:"componentWillReceiveProps",value:function(e){if(e.editing.meta.src!==this.props.editing.meta.src||e.editing.commands!==this.props.editing.commands){var t=e.editing.meta.src!==this.props.editing.meta.src;this.setState(this.resetSourceCodeCursor(t))}if(e.status===Qt.a.PLAYER&&e.player.nextCommandIndex!==this.props.player.nextCommandIndex){var n=document.querySelector(".table-wrapper");if(!n)return;n.scrollTop=45*e.player.nextCommandIndex}if(e.status===Qt.a.RECORDER&&e.editing.commands.length>this.props.editing.commands.length){var a=document.querySelector(".table-wrapper");if(!a)return;setTimeout((function(){a.scrollTop=45*e.editing.commands.length*2}),100)}}},{key:"isPlayerStopped",value:function(){return this.props.player.status===Qt.f.STOPPED}},{key:"renderVisionFindPreview",value:function(){var e=this.state.visionFindPreview,t=e.visible,n=e.url,a=e.left,r=e.top;return t?l.a.createElement("div",{style:{position:"absolute",width:"100px",height:"100px",border:"1px solid #ccc",left:a+"px",top:r+"px",backgroundColor:"#eee",backgroundImage:"url("+n+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}):null}},{key:"renderContextMenu",value:function(){var e=this,t=this.props.clipboard,n=this.state.contextMenu,a=document.documentElement.clientWidth,r=(document.documentElement.clientHeight,n.x+window.scrollX);r+240>a&&(r-=240);var o={position:"absolute",top:n.y+window.scrollY,left:r,display:n.isShown?"block":"none"},i={width:"240px"},s=n.commandIndex,c=this.props.player.breakpointIndices.indexOf(s);return l.a.createElement("div",{style:o,id:"context_menu"},l.a.createElement(St.a,{onClick:function(t){switch(t.key){case"cut":return e.props.cutCommand(s);case"copy":return e.props.copyCommand(s);case"paste":return e.props.pasteCommand(s);case"insert":return e.props.insertCommand(ba,s+1);case"run_line":return e.playLine(s);case"run_from_here":var n=e.props.editing.commands,a=e.props.editing.meta.src;return e.setState({lastOperation:"play"}),e.props.playerPlay({title:e.getTestCaseName(),extra:{id:a&&a.id},mode:X.C.MODE.STRAIGHT,startIndex:s,startUrl:null,resources:n,postDelay:1e3*e.props.config.playCommandInterval});case"add_breakpoint":return e.props.addBreakpoint(s);case"remove_breakpoint":return e.props.removeBreakpoint(s);case"jump_to_source_code":return e.jumpToSourceCode(s)}},style:i,mode:"vertical",selectable:!1},l.a.createElement(St.a.Item,{key:"cut"},"Cut"),l.a.createElement(St.a.Item,{key:"copy"},"Copy"),l.a.createElement(St.a.Item,{key:"paste",disabled:0===t.commands.length},"Paste"),l.a.createElement(St.a.Divider,null),l.a.createElement(St.a.Item,{key:"insert"},"Insert new line"),l.a.createElement(St.a.Divider,null),l.a.createElement(St.a.Item,{key:"jump_to_source_code"},"Jump to source code"),l.a.createElement(St.a.Item,{key:c?"add_breakpoint":"remove_breakpoint"},c?"Add breakpoint":"Remove breakpoint"),l.a.createElement(St.a.Divider,null),l.a.createElement(St.a.Item,{key:"run_line"},"Execute this command"),l.a.createElement(St.a.Item,{key:"run_from_here"},"Run from here")))}},{key:"renderTable",value:function(){var e=this.props,t=e.editing,n=(e.player,t.commands),a=(n&&n.length?n:ya).map((function(e,t){return ma({},e,{key:Math.random(),realIndex:t})}));return this.needVirtualList()?this.renderVirtualTable(a):this.renderNormalTable(a)}},{key:"renderVirtualTable",value:function(e){var t=ua()({container:this.listContainer})(this.virtualCommmandList),n=[{header:!0}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[{footer:!0}]);return l.a.createElement("div",{className:"t-body"},this.listContainer?l.a.createElement(t,{itemHeight:45,items:n}):null)}},{key:"renderNormalTable",value:function(e){var t=this,n=this.props,a=n.editing,r=n.player,o=(r.nextCommandIndex,r.errorCommandIndices,r.doneCommandIndices,a.commands),i=this.isPlayerStopped(),s={dataSource:e,columns:[{title:"Command",dataIndex:"cmd",key:"cmd",width:130},{title:"Target",dataIndex:"target",key:"target",width:190},{title:"Value",dataIndex:"value",key:"value"},{title:"Ops",key:"ops",width:80,render:function(e,n,a){return l.a.createElement("div",null,l.a.createElement(y.a,{disabled:!i,shape:"circle",onClick:function(e){t.props.removeCommand(a),e.stopPropagation()}},l.a.createElement(wt.a,{type:"minus"})),l.a.createElement(y.a,{disabled:!i,shape:"circle",onClick:function(e){t.props.duplicateCommand(a),e.stopPropagation()}},l.a.createElement(wt.a,{type:"plus"})))}}],pagination:!1,footer:function(){return l.a.createElement("div",{className:"table-footer",onClick:function(e){t.props.insertCommand(ba,o.length)}},"Add")},onRowClick:function(e,n,a){t.props.selectCommand(n)},rowClassName:this.commandClassName};return l.a.createElement(ca.a,s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.status,a=t.editing,r=a.commands,o=a.meta.selectedIndex,i=this.isPlayerStopped(),s=(r&&r.length?r:ya)[o],c=i&&!!s,u=n===Qt.a.INSPECTOR,d=s&&-1!==["visionFind","visualSearch","visualAssert","visualVerify","XClick","XMove"].indexOf(s.cmd);return l.a.createElement("div",{className:"editor-wrapper"},l.a.createElement(kt.a,{type:"card",className:"commands-view",activeKey:this.props.editor.activeTab,onChange:this.onChangeCommandsView},l.a.createElement(kt.a.TabPane,{tab:"Table View",key:"table_view"},l.a.createElement("div",{className:"form-group table-wrapper",style:{marginBottom:0},ref:function(t){e.listContainer=t}},this.renderTable()),l.a.createElement("div",{className:"form-group fields-wrapper",style:{marginBottom:0}},l.a.createElement(Dt.a,null,l.a.createElement(Dt.a.Item,{label:"Command",labelCol:{span:4},wrapperCol:{span:20}},l.a.createElement("div",{className:"flex-row"},l.a.createElement(Rt.a,{showSearch:!0,optionFilterProp:"children",placeholder:"command",disabled:!c,value:s&&s.cmd,onChange:function(t){return e.onDetailChange("cmd",t)},filterOption:function(e,t){return 0===t.key.toLowerCase().indexOf(e.toLowerCase())},style:{flex:1,maxWidth:"60%",marginRight:"10px"},size:"default"},va.map((function(e){return l.a.createElement(Rt.a.Option,{value:e,key:e},e)}))),s&&s.cmd?l.a.createElement("a",{href:"https://a9t9.com/x/idehelp?cmd="+s.cmd.toLowerCase(),target:"_blank"},"Info for this command"):null)),l.a.createElement(Dt.a.Item,{label:"Target",labelCol:{span:4},wrapperCol:{span:20}},l.a.createElement("div",{className:"flex-row"},s&&s.targetOptions&&s.targetOptions.length?l.a.createElement(Rt.a,{style:{flex:1,maxWidth:"60%",marginRight:"10px"},placeholder:"target",disabled:!c,value:s.target,onChange:function(t){return e.onDetailChange("target",t)},size:"default"},s.targetOptions.map((function(e){return l.a.createElement(Rt.a.Option,{key:e,value:e},e)}))):l.a.createElement(It.a,{style:{flex:1,maxWidth:"60%",marginRight:"10px"},placeholder:"target",disabled:!c,value:s&&s.target,onChange:function(t){return e.onDetailChange("target",t.target.value)},size:"default"}),l.a.createElement(y.a,{style:{marginRight:"10px"},disabled:!c,onClick:this.onToggleInspect},u?l.a.createElement("span",null,(d?"":"")+"Cancel"):l.a.createElement("span",null,(d?"":"")+"Select")),l.a.createElement(y.a,{disabled:!c,onClick:this.onClickFind},(d?"":"")+"Find"))),l.a.createElement(Dt.a.Item,{label:"Value",labelCol:{span:4},wrapperCol:{span:20},style:{marginBottom:0}},l.a.createElement(It.a,{disabled:!c,value:s&&s.value,onChange:function(t){return e.onDetailChange("value",t.target.value)},style:{width:"100%"},placeholder:"value",size:"default"}))))),l.a.createElement(kt.a.TabPane,{tab:"Source View (JSON)",key:"source_view",className:"source-view"},l.a.createElement("pre",{className:"source-error"},this.props.sourceErrMsg),l.a.createElement(Cn.UnControlled,{ref:function(t){e.codeMirror=t},className:this.props.sourceErrMsg?"has-error":"no-error",value:this.props.sourceText,onChange:this.onChangeEditSource,onBlur:this.onSourceBlur,onCursor:function(t,n){e.setState({cmEdtiorInstance:t}),n.sticky&&e.setState({cursor:{line:n.line,ch:n.ch}})},options:{mode:{name:"javascript",json:!0},lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0}}))),this.renderContextMenu(),this.renderVisionFindPreview())}}]),t}(l.a.Component),wa=Object(C.b)((function(e){return{status:e.status,editor:e.editor,editing:e.editor.editing,clipboard:e.editor.clipboard,player:e.player,config:e.config,sourceErrMsg:e.editor.editingSource.error,sourceText:e.editor.editingSource.pure,sourceTextModified:e.editor.editingSource.current,selectedCommand:Yt(e)}}),(function(e){return Object(T.b)(ma({},a),e)}))(Ea),Ca=n(152),Ta=n.n(Ca),xa=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Sa=function(){function e(t){var n=t.process,a=t.onZero,r=t.onOne;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={},this.__process=n,this.__onZero=a||function(){},this.__onOne=r||function(){}}return xa(e,[{key:"add",value:function(e,t){if(this.cache[e]=this.cache[e]||[],this.cache[e].push(t),1===this.cache[e].length)try{this.__onOne(e)}catch(e){console.error("in onOne, "+e.message)}return!0}},{key:"remove",value:function(e,t){if(!this.cache[e])return!1;if(this.cache[e]=this.cache[e].filter((function(e){return e!==t})),0===this.cache[e].length)try{this.__onZero(e)}catch(e){console.error("in onZero, "+e.message)}return!0}},{key:"fire",value:function(e,t){var n=this;return!!this.cache[e]&&(this.cache[e].forEach((function(a){try{n.__process(a,t,e)}catch(e){console.error("in process, "+e.message)}})),!0)}},{key:"has",value:function(e){return this.cache[e]&&this.cache[e].length>0}},{key:"keys",value:function(){var e=this;return Object.keys(this.cache).filter((function(t){return e.cache[t]&&e.cache[t].length>0}))}},{key:"destory",value:function(){this.cache={}}}]),e}(),_a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function ka(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Oa=[].concat(["KEY_LEFT","KEY_UP","KEY_RIGHT","KEY_DOWN","KEY_PGUP","KEY_PAGE_UP","KEY_PGDN","KEY_PAGE_DOWN","KEY_BKSP","KEY_BACKSPACE","KEY_DEL","KEY_DELETE","KEY_ENTER","KEY_TAB"],["KEY_CTRL","KEY_ALT","KEY_SHIFT"],["KEY_F1","KEY_F2","KEY_F3","KEY_F4","KEY_F5","KEY_F6","KEY_F7","KEY_F8","KEY_F9","KEY_F10","KEY_F11","KEY_F12","KEY_F13","KEY_F14","KEY_F15"],["KEY_Num0","KEY_Num1","KEY_Num2","KEY_Num3","KEY_Num4","KEY_Num5","KEY_Num6","KEY_Num7","KEY_Num8","KEY_Num9"],["KEY_A","KEY_B","KEY_C","KEY_D","KEY_E","KEY_F","KEY_G","KEY_H","KEY_I","KEY_J","KEY_K","KEY_L","KEY_M","KEY_N","KEY_O","KEY_P","KEY_Q","KEY_R","KEY_S","KEY_T","KEY_U","KEY_V","KEY_W","KEY_X","KEY_Y","KEY_Z"]),Ia=function(e){if(-1!==Oa.indexOf(e))return!0;if(/^KEY_\w+(\+KEY_\w+)*$/.test(e)){var t=e.split("+");return I.and.apply(void 0,ka(t.map((function(e){return-1!==Oa.indexOf(e)}))))}return!1},Aa={},Na=function(e){"!"===e.charAt(0)&&(e=e.substr(1));try{Object(I.validateStandardName)(e)}catch(t){throw new Error("Invalid variable name '"+e+"'. A variable name "+t.message)}return!0};var Pa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return Aa[e]},ja=function(e){switch(e.type){case"reflect":return"[info]";case"error":return e.options&&e.options.ignored?"[error][ignored]":"[error]";default:return"["+e.type+"]"}},Va=function(e){return ja(e)+" "+e.text},Da=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Ma(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var La=function(e){function t(){var e,n,a;Ma(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=Ra(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={isEditing:!1,value:""},a.edit=function(){a.setState({isEditing:!0}),setTimeout((function(){var e=a.$input&&a.$input.refs&&a.$input.refs.input;if(e){e.focus();var t=a.props.getSelection(a.state.value,e);e.selectionStart=t?t.start:0,e.selectionEnd=t?t.end:e.value.length}}),100)},a.submit=function(){a.props.checkValue(a.state.value).then((function(e){e&&(a.setState({isEditing:!1}),a.props.onChange(a.state.value))}))},a.reset=function(){a.setState({isEditing:!1,value:a.props.value})},Ra(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Da(t,[{key:"componentDidMount",value:function(){this.setState({value:this.props.value})}},{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this;return this.state.isEditing?l.a.createElement(It.a,{ref:function(t){e.$input=t},value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})},onBlur:this.reset,onKeyDown:function(t){return 13===t.keyCode?e.submit():27===t.keyCode?e.reset():void 0}}):l.a.createElement("span",null,this.props.value,l.a.createElement(wt.a,{type:"edit",style:{marginLeft:"10px",cursor:"pointer"},onClick:this.edit}))}}]),t}(l.a.Component);La.propTypes={value:wn.a.string.isRequired,onChange:wn.a.func.isRequired,checkValue:wn.a.func.isRequired,getSelection:wn.a.func},La.defaultProps={getSelection:function(){return null}};var Fa=La,Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ba=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ga(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var $a=function(e){function t(){var e,n,a;Ya(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=a=Ga(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={activeTabForLogScreenshot:"Logs",showCSVModal:!1,csvText:"",csvFile:"",drag:{isDragging:!1,startY:0,lastHeight:220,currentMinHeight:220}},a.getBottomMinHeight=function(){var e=a.state.drag,t=e.isDragging,n=e.lastHeight,r=e.currentMinHeight;return(t?r:n)+"px"},a.onResizeDragStart=function(e){e.dataTransfer.setData("text","");var t=window.getComputedStyle(a.$dom),n=parseInt(t.height);a.setState(Object(I.setIn)(["drag"],{isDragging:!0,startY:e.screenY,lastHeight:n,currentHeight:n},a.state))},a.onResizeDragEnd=function(e){var t=e.screenY-a.state.drag.startY,n=a.state.drag.lastHeight-t;a.setState(Object(I.setIn)(["drag"],{isDragging:!1,startY:0,lastHeight:n,currentMinHeight:n}))},a.onFileChange=function(e){var t=Object(P.getStorageManager)().getCSVStorage(),n=[].slice.call(e.target.files);if(n&&n.length){Promise.all(n.map((function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(n){var a=n.target.result;t({text:a,fileName:e.name})},a.readAsText(e)}))}))).then((function(e){var n=e.map((function(e){return e.fileName})),r=e.map((function(e){return t.write(Object(I.sanitizeFileName)(e.fileName),new Blob([e.text]))}));return Promise.all(r).then((function(){return a.props.listCSV()})).then((function(){o.a.info(e.length+" csv files imported"),a.props.addLog("info",e.length+" csv files imported: "+n.join(", "))}))})).catch((function(e){a.props.addLog("error",e.message)}))}},a.removeCSV=function(e){Object(P.getStorageManager)().getCSVStorage().remove(e.name).then((function(){return a.props.listCSV()})).then((function(){o.a.success("successfully deleted"),a.props.addLog("info",e.name+" deleted")}))},a.viewCSV=function(e){window.open("./csv_editor.html?csv="+e.name,"","width=600,height=500,scrollbars=true")},a.onImageFileChange=function(e){var t=[].slice.call(e.target.files);if(t&&t.length){var n=function(e){var t=e.dataUrl,n=e.name;return Object(I.uniqueName)(n,{check:function(e){return Object(P.getStorageManager)().getVisionStorage().exists(e).then((function(e){return!e}))}}).then((function(e){return Object(P.getStorageManager)().getVisionStorage().write(Object(I.sanitizeFileName)(e),Object(I.dataURItoBlob)(t)).then((function(){return e}))})).catch((function(e){te.a.error(e.stack)}))};Promise.all(t.map((function(e){return new Promise((function(t,a){var r=new FileReader;r.onload=function(a){try{var r=a.target.result,o=n({dataUrl:r,name:e.name});t(o)}catch(n){t({err:n,fileName:e.name})}},r.readAsDataURL(e)}))}))).then((function(e){o.a.success(e.length+" image files imported into Vision tab"),a.props.addLog("info",e.length+" image files imported: "+e.join(", ")),a.props.listVisions()})).catch((function(e){te.a.error(e.stack),a.props.addLog("error",e.message)}))}},a.takeScreenshot=function(){A.a.ask("PANEL_SELECT_AREA_ON_CURRENT_PAGE").catch((function(e){o.a.error(e.message)}))},a.viewVision=function(e){window.open("./vision_editor.html?vision="+e,"","width=600,height=500,scrollbars=true")},a.addVisionNameToTargetBox=function(e){var t=a.props.selectedCommand;if(!t||-1===["visionFind","visualSearch","XClick","XMove"].indexOf(t.cmd))return o.a.error("Image names can only be added to the target box if a 'visualSearch' command is selected");a.props.updateSelectedCommand({target:e})},a.exportAllVisions=function(){var e=new Q.a,t=Object(P.getStorageManager)().getVisionStorage();t.list().then((function(n){if(0===n.length)return o.a.error("No vision to export");var a=n.map((function(n){return t.read(n.fileName,"ArrayBuffer").then((function(t){e.file(n.fileName,t,{binary:!0})}))}));return Promise.all(a).then((function(){e.generateAsync({type:"blob"}).then((function(e){v.a.saveAs(e,"vision-images-export.zip")}))}))}))},Ga(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ba(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.logs.length!==this.props.logs.length){var n=document.querySelector(".logs-screenshots .ant-tabs-content");if(!n)return;setTimeout((function(){n.scrollTop=50*e.logs.length*2}),100)}if(e.visions.length>this.props.visions.length){var a=e.visions.filter((function(e){return!t.props.visions.find((function(t){return t.name===e.name}))}));a.length>1&&a.sort((function(e,t){return e.createTime>t.createTime}));var r=a[0];setTimeout((function(){var e=document.getElementById(r.name);e&&e.scrollIntoView({block:"center",behavior:"smooth"})}),100)}}},{key:"logStyle",value:function(e){return e.options&&e.options.color?{color:e.options.color}:e.options&&e.options.ignored?{color:"orange"}:void 0}},{key:"prefixHardDisk",value:function(e){return Object(P.getStorageManager)().isXFileMode()?l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement("img",{src:"./img/hard-drive.svg",style:{position:"relative",top:"3px",marginRight:"5px",height:"15px"}}),l.a.createElement("span",null,e)):e}},{key:"renderCSVModal",value:function(){var e=this;return l.a.createElement(w.a,{title:"Preview - "+this.state.csvFile,visible:this.state.showCSVModal,onCancel:function(){return e.setState({showCSVModal:!1,csvText:"",csvFile:""})},className:"csv-preview-modal",footer:null},l.a.createElement(It.a.TextArea,{style:{width:"100%"},value:this.state.csvText,readOnly:!0,rows:10}))}},{key:"renderCSVTable",value:function(){var e=this,t={columns:[{title:"Name",dataIndex:"name",key:"name"},{title:"Size",dataIndex:"size",key:"size"},{title:"Last Modified",dataIndex:"createTime",key:"createTime",render:function(e){var t=function(e){return e>=10?""+e:"0"+e};return e.getFullYear()+"/"+t(e.getMonth()+1)+"/"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())}},{title:"Action",key:"ops",width:100,render:function(t,n,a){return l.a.createElement("div",null,l.a.createElement(y.a,{size:"small",type:"default",shape:"circle",onClick:function(t){e.viewCSV(n)}},l.a.createElement(wt.a,{type:"eye-o"})),l.a.createElement("a",{href:n.url,download:n.name},l.a.createElement(y.a,{size:"small",type:"primary",shape:"circle",onClick:function(e){e.stopPropagation()}},l.a.createElement(wt.a,{type:"download"}))),l.a.createElement(Ta.a,{title:"Sure to delete?",okText:"Delete",onConfirm:function(){e.removeCSV(n)}},l.a.createElement(y.a,{size:"small",type:"danger",shape:"circle"},l.a.createElement(wt.a,{type:"close"}))))}}],dataSource:this.props.csvs,pagination:!1,bordered:!0,size:"middle",rowKey:"fileName",onRowClick:function(e,t,n){},rowClassName:function(e,t){return""}};return l.a.createElement(ca.a,t)}},{key:"renderVisionTable",value:function(){var e=this,t={columns:[{title:"Image",dataIndex:"url",key:"url",width:116,render:function(e){return l.a.createElement("div",{className:"vision-image",style:{backgroundImage:"url("+e+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}},{title:"Name",dataIndex:"name",key:"name",render:function(t,n){return l.a.createElement("div",{className:"vision-name-1",id:t},l.a.createElement(Fa,{value:n.name,onChange:function(t){Object(P.getStorageManager)().getVisionStorage().rename(n.name,Object(I.ensureExtName)(".png",t)).then((function(){o.a.success("Successfully renamed"),e.props.listVisions()})).catch((function(e){te.a.error(e.stack)}))},checkValue:function(e){return Object(P.getStorageManager)().getVisionStorage().exists(e).then((function(t){return t&&o.a.error("'"+e+"' alreadsy exists"),!t}))},getSelection:function(e,t){return{start:0,end:/(?:_dpi_\d+)?\.png$/i.exec(e).index}}}))}},{title:"Action",key:"ops",width:100,render:function(t,n,a){var r;return l.a.createElement("div",{className:"vision-actions"},l.a.createElement(y.a,{size:"small",type:"default",shape:"circle",title:"Add name to target box",onClick:function(){return e.addVisionNameToTargetBox(n.name)}},l.a.createElement(wt.a,{type:"plus"})),l.a.createElement(y.a,{size:"small",type:"default",shape:"circle",title:"View image",onClick:function(){return e.viewVision(n.name)}},l.a.createElement(wt.a,{type:"eye-o"})),l.a.createElement(Ta.a,(Ka(r={title:"Sure to delete?",okText:"Delete"},"title","Delete image"),Ka(r,"onConfirm",(function(){Object(P.getStorageManager)().getVisionStorage().remove(n.name).then((function(){o.a.success("Successfully deleted"),e.props.listVisions()})).catch((function(e){te.a.error(e.stack)}))})),r),l.a.createElement(y.a,{size:"small",type:"danger",shape:"circle"},l.a.createElement(wt.a,{type:"close"}))))}}],dataSource:this.props.visions,pagination:!1,bordered:!0,size:"middle",rowKey:"fileName",onRowClick:function(e,t,n){},rowClassName:function(e,t){return""}};return l.a.createElement(ca.a,t)}},{key:"renderVariableTable",value:function(){var e,t,n,a,r,o,i,s,c=[{title:"Name",dataIndex:"key",key:"key",width:"40%"},{title:"Value",dataIndex:"value",key:"value",render:function(e){return JSON.stringify(e)||"undefined"}}],u=this.props.config,d=u.showCommonInternalVariables,m=u.showAdvancedInternalVariables,p=(n=(e={withCommonInternal:d,withAdvancedInternal:m}).withUserDefined,a=void 0===n||n,r=e.withCommonInternal,o=e.withAdvancedInternal,i=function(e){return-1!==["!url","!clipboard","!runtime","!statusok","!errorignore"].map((function(e){return e.toUpperCase()})).indexOf(e.toUpperCase())},s=[a?function(e){return!/^!/.test(e)}:null,r?i:null,o?function(e){return/^!/.test(e)&&!i(e)}:null].filter((function(e){return!!e})),t=s,function(){for(var e=0,n=t.length;e<n;e++)if(t[e].apply(t,arguments))return!0;return!1}),f={columns:c,dataSource:this.props.variables.filter((function(e){return p(e.key)})),pagination:!1,bordered:!0,size:"middle",rowKey:"key",onRowClick:function(e,t,n){},rowClassName:function(e,t){var n=Pa();return n&&n.isReadOnly(e.key)?"read-only":""}};return l.a.createElement(ca.a,f)}},{key:"render",value:function(){var e=this,t=this.state.activeTabForLogScreenshot,n=this.props.config.logFilter||"All",a=this.props.logs.filter({All:function(){return!0},Echo:function(e){return"echo"===e.type||"error"===e.type||"warning"===e.type||"status"===e.type},Error:function(e){return"error"===e.type},None:function(){return!1}}[n]);return l.a.createElement("div",{className:"logs-screenshots",ref:function(t){e.$dom=t},style:{height:this.getBottomMinHeight()}},this.renderCSVModal(),l.a.createElement("div",{className:Object(I.cn)("resize-handler",{focused:this.state.drag.isDragging}),draggable:"true",onDragStart:this.onResizeDragStart,onDragEnd:this.onResizeDragEnd,onMouseDown:function(){return e.setState(Object(I.setIn)(["drag","isDragging"],!0,e.state))}}),l.a.createElement(kt.a,{type:"card",onChange:function(t){e.setState({activeTabForLogScreenshot:t}),"Screenshots"===t&&e.props.listScreenshots()}},l.a.createElement(kt.a.TabPane,{tab:"Logs",key:"Logs"},l.a.createElement("ul",{className:"log-content"},a.map((function(t,n){return l.a.createElement("li",{className:t.type,key:t.id,style:e.logStyle(t)},l.a.createElement("span",{className:"log-type"},ja(t)),l.a.createElement("pre",{className:"log-detail"},t.text))})))),l.a.createElement(kt.a.TabPane,{tab:"Variables",key:"Variables"},l.a.createElement("div",{className:"variable-content"},l.a.createElement("div",{className:"variable-options"},l.a.createElement(jt.a,{onChange:function(t){return e.props.updateConfig({showCommonInternalVariables:t.target.checked})},checked:this.props.config.showCommonInternalVariables},"Show most common ",l.a.createElement("a",{href:"https://a9t9.com/x/idehelp?help=internalvars",target:"_blank"},"internal variables")),l.a.createElement(jt.a,{onChange:function(t){return e.props.updateConfig({showAdvancedInternalVariables:t.target.checked})},checked:this.props.config.showAdvancedInternalVariables},"Show advanced ",l.a.createElement("a",{href:"https://a9t9.com/x/idehelp?help=internalvars",target:"_blank"},"internal variables"))),this.renderVariableTable())),l.a.createElement(kt.a.TabPane,{tab:"Screenshots",key:"Screenshots"},l.a.createElement("ul",{className:"screenshot-content"},this.props.screenshots.map((function(e,t){return l.a.createElement("li",{key:t},l.a.createElement("span",{className:"timestamp"},e.createTime&&e.createTime.toLocaleString()," - ",l.a.createElement("span",{className:"filename"},decodeURIComponent(e.name))),l.a.createElement("a",{download:decodeURIComponent(e.name),href:nn.a.isFirefox()?"#":e.url,onClick:function(t){nn.a.isFirefox()&&(t.preventDefault(),v.a.saveAs(Object(I.dataURItoBlob)(e.url),e.name))}},l.a.createElement("img",{src:e.url})))})))),l.a.createElement(kt.a.TabPane,{tab:this.prefixHardDisk("CSV"),key:"CSV"},l.a.createElement("div",{className:"csv-content"},this.renderCSVTable())),l.a.createElement(kt.a.TabPane,{tab:this.prefixHardDisk("Visual"),key:"Vision"},l.a.createElement("div",{className:"vision-content"},l.a.createElement("div",{className:"vision-top-actions"},l.a.createElement("div",{className:"main-actions"},l.a.createElement(y.a,{type:"primary",onClick:this.takeScreenshot},"Take Screenshot"),l.a.createElement("span",{className:"load-image-button ant-btn ant-btn-primary"},l.a.createElement("label",{htmlFor:"select_image_files"},"Load Image"),l.a.createElement("input",{multiple:!0,type:"file",accept:"image/*",id:"select_image_files",onChange:this.onImageFileChange,ref:function(t){e.imageFileInput=t},style:{display:"none"}})),l.a.createElement(y.a,{onClick:this.exportAllVisions},"Export All")),l.a.createElement("a",{className:"more-info",target:"_blank",href:"https://a9t9.com/x/idehelp?help=visual"},"More Info")),this.renderVisionTable()))),l.a.createElement("div",{className:"ls-toolbox"},"Logs"===t?l.a.createElement("div",null,l.a.createElement(Rt.a,{value:this.props.config.logFilter,onChange:function(t){e.props.updateConfig({logFilter:t})},style:{width:"70px",marginRight:"10px"},size:"small"},l.a.createElement(Rt.a.Option,{value:"All"},"All"),l.a.createElement(Rt.a.Option,{value:"Echo"},"Echo"),l.a.createElement(Rt.a.Option,{value:"Error"},"Error"),l.a.createElement(Rt.a.Option,{value:"None"},"No log")),l.a.createElement(y.a,{size:"small",onClick:this.props.clearLogs},"Clear")):null,"Screenshots"===t?l.a.createElement(y.a,{size:"small",onClick:this.props.clearScreenshots},"Clear"):null,"CSV"===t?l.a.createElement(y.a,{size:"small",onClick:function(){return e.fileInput.click()}},"Import CSV",l.a.createElement("input",{multiple:!0,type:"file",accept:".csv",onChange:this.onFileChange,style:{display:"none"},ref:function(t){e.fileInput=t}})):null))}}]),t}(l.a.Component),za=Object(C.b)((function(e){return{hasSelectedCommand:e.editor.editing&&e.editor.editing.meta&&-1!==e.editor.editing.meta.selectedIndex,selectedCommand:Yt(e),status:e.status,logs:e.logs,screenshots:e.screenshots,variables:e.variables,csvs:e.csvs,visions:e.visions,config:e.config}}),(function(e){return Object(T.b)(Ua({},a),e)}))($a),Wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xa=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Ha(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ja=function(e){function t(){return Ha(this,t),qa(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Xa(t,[{key:"render",value:function(){var e=/windows/i.test(window.navigator.userAgent);return l.a.createElement("div",{className:"dashboard"},l.a.createElement(wa,null),l.a.createElement(za,null),l.a.createElement("div",{className:"online-help"},l.a.createElement("div",{style:{visibility:e?"visible":"hidden"}},l.a.createElement("a",{href:"https://a9t9.com/x/idehelp?help=visual",target:"_blank"})),l.a.createElement("div",null,"Kantu for Chrome/Firefox:",l.a.createElement("a",{href:"https://a9t9.com/x/idehelp?help=forum",target:"_blank"}," User Forum")," -",l.a.createElement("a",{href:"https://a9t9.com/x/idehelp?help=docs",target:"_blank"}," Online Help"))))}}]),t}(l.a.Component),Qa=Object(C.b)((function(e){return{}}),(function(e){return Object(T.b)(Wa({},a),e)}))(Ja),Za=(n(392),n(622),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),er=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ar=function(e){function t(){var e,n,a;tr(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=nr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.hideBackupAlert=function(){a.props.updateConfig({lastBackupActionTime:1*new Date}),a.$app.classList.remove("with-alert")},a.onClickBackup=function(){a.props.runBackup(),a.hideBackupAlert()},a.onClickNoBackup=function(){a.hideBackupAlert()},nr(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),er(t,[{key:"componentDidMount",value:function(){var e=this,t=function(){A.a.ask("PANEL_TIME_FOR_BACKUP",{}).then((function(t){t&&e.$app.classList.add("with-alert")}))};this.timer=setInterval(t,3e5),t()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderPreinstallModal",value:function(){var e=this;return this.props.ui.newPreinstallVersion?l.a.createElement(w.a,{className:"preinstall-modal",visible:!0,title:"New demo macros avaiable",okText:"Yes, overwrite",cancelText:"Skip",onOk:function(){return e.props.updateUI({newPreinstallVersion:!1}),e.props.preinstall(!0).then((function(){o.a.success("demo macros updated")})).catch((function(e){o.a.error(e.message)}))},onCancel:function(){e.props.updateUI({newPreinstallVersion:!1}),e.props.preinstall(!1)}},l.a.createElement("p",{style:{fontSize:"14px"}},"Do you want to overwrite the demo macros with their latest versions?")):null}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"app with-sidebar",ref:function(t){e.$app=t}},l.a.createElement("div",{className:"backup-alert"},l.a.createElement("span",null,"Do you want to run the automated backup?"),l.a.createElement("span",{className:"backup-actions"},l.a.createElement(y.a,{type:"primary",onClick:this.onClickBackup},"Yes"),l.a.createElement(y.a,{onClick:this.onClickNoBackup},"No"))),l.a.createElement("div",{className:"app-inner"},l.a.createElement(ia,null),l.a.createElement("section",{className:"content"},l.a.createElement(mn,null),l.a.createElement(Qa,null))),this.renderPreinstallModal())}}]),t}(c.Component),rr=Object(C.b)((function(e){return{ui:e.ui}}),(function(e){return Object(T.b)(Za({},a),e)}))(ar),or=n(409),ir=n.n(or),sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cr=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};n(109);var lr=n(410),ur=n.n(lr),dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function mr(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var pr={commands:[],meta:{src:null,hasUnsaved:!0,selectedIndex:-1}},fr={status:Qt.a.NORMAL,recorderStatus:Qt.g.STOPPED,inspectorStatus:Qt.c.STOPPED,editor:{testSuites:[],testCases:[],editing:dr({},pr),editingSource:{original:null,pure:null,current:null,error:null},clipboard:{commands:[]},activeTab:"table_view"},player:{mode:Qt.e.TEST_CASE,status:Qt.f.STOPPED,stopReason:null,currentLoop:0,loops:0,nextCommandIndex:null,errorCommandIndices:[],doneCommandIndices:[],breakpointIndices:[],playInterval:0,timeoutStatus:{type:null,total:null,past:null}},variables:[],logs:[],screenshots:[],csvs:[],visions:[],config:{},ui:{}},gr=function(e){var t=e.editor.editing,n=t.meta,a=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["meta"]),r=n.src&&n.src.id;if(!r)return e;var o=e.editor.testCases.find((function(e){return e.id===r}));if(!o)return e;var i=M({data:a}),s=!ur()(o.data,i.data);return Object(I.setIn)(["editor","editing","meta","hasUnsaved"],s,e)},hr=function(e,t,n){var a=function(e,t,n){switch(t){case"add":for(var a=e.slice(),r=0,o=e.length;r<o;r++)a[r]>=n&&(a[r]+=1);return a;case"delete":for(var i=e.slice(),s=e.length-1;s>=0;s--)i[s]>n?i[s]-=1:i[s]===n&&i.splice(s,1);return i;default:throw new Error("updateBreakpointIndices: unknown action, '"+t+"'")}};if("number"==typeof n)return a(e,t,n);if(Array.isArray(n)){var r=n.slice();return r.sort((function(e,t){return t-e})),r.reduce((function(e,n){return a(e,t,n)}),e)}throw new Error("updateBreakpointIndices: actionIndex should be either number or an array of number")},vr=Object(I.partial)((function(e,t){Object(te.a)("resetEditingSource",e);var n=Object(Z.toJSONString)(e);return Object(I.setIn)(["editor","editingSource"],{original:n,pure:n,current:n,error:null},t)})),br=function(e){var t={name:e.editor.editing.meta.src?e.editor.editing.meta.src.name:"Untitled",commands:e.editor.editing.commands};Object(te.a)("setEditingSourceCurrent",t);var n=Object(Z.toJSONString)(t);return Object(I.updateIn)(["editor","editingSource"],(function(e){return dr({},e,{pure:n,current:n})}),e)},yr=function(e){var t=e.editor.editingSource.current;return Object(I.updateIn)(["editor","editingSource"],(function(e){return dr({},e,{pure:t,original:t})}),e)},Er=function(e,t){var n=Object(Z.toJSONString)(e);return Object(I.updateIn)(["editor","editingSource"],(function(e){return dr({},e,{pure:n,original:n})}),t)};var wr,Cr=Object(T.a)(ir.a,(function(e){return e.dispatch,e.getState,function(e){return function(t){var n=t.promise,a=t.types,r=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["promise","types"]);if(!n)return e(t);var o=cr(a,3),i=o[0],s=o[1],c=o[2];return e(sr({},r,{type:i})),n().then((function(t){return e(sr({},r,{data:t,type:s}))}),(function(t){return e(sr({},r,{err:t,type:c}))}))}}}),(function(e){var t=e.dispatch,n=e.getState;return function(e){return function(a){var r=a.post;return function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}(a,["post"]),r&&"function"==typeof r&&setTimeout((function(){r({dispatch:t,getState:n},a,wr)}),0),e(a)}}}))(T.c),Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xr=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sr(this,e),this.state={labels:{},tags:[],commands:[]},t.pre&&(this.__customPre=t.pre),t.run&&(this.__customRun=t.run),t.post&&(this.__customPost=t.post)}return xr(e,[{key:"reset",value:function(){this.__setState({labels:{},tags:[],commands:[]})}},{key:"preprocess",value:function(e){var t=this,n={commands:e,tags:[]},a=[],r=function(e,t){var n=new Error(t);return n.errorIndex=e,n};if(e.forEach((function(e,o){if(!t.__customPre||!t.__customPre(e,o)){var i,s,c,l=a[a.length-1];switch(e.cmd){case"while":if(a.find((function(e){return"while"===e.type})))throw r(o,"No nested while allowed (at command #"+(o+1)+")");a.push({type:"while",start:{index:o,command:e}});break;case"endWhile":if(!l||"while"!==l.type)throw r(o,"No matching while for this endWhile (at command #"+(o+1)+")");n.tags.push(Tr({},l,{end:{index:o,command:e}})),a.pop();break;case"if":if(a.find((function(e){return"if"===e.type})))throw r(o,"No nested if allowed (at command #"+(o+1)+")");a.push({type:"if",start:{index:o,command:e}});break;case"else":if(!l||"if"!==l.type)throw r(o,"No matching if for this else (at command #"+(o+1)+")");Tr(l,{fork:{index:o,command:e}});break;case"endif":if(!l||"if"!==l.type)throw r(o,"No matching if for this endif (at command #"+(o+1)+")");n.tags.push(Tr({},l,{end:{index:o,command:e}})),a.pop();break;case"label":if(!e.target||!e.target.length)throw new Error("invalid target for label commmand");t.__setState({labels:Tr({},t.state.labels,(i={},s=e.target,c={index:o},s in i?Object.defineProperty(i,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[s]=c,i))})}}})),a.length>0){var o=a[a.length-1];throw r(o.start.index,"Unclosed '"+o.type+"' (at command #"+(o.start.index+1)+")")}this.__setState(n)}},{key:"run",value:function(e,t){var n=e.cmd,a=e.target;e.value;if(this.__customRun){var r=this.__customRun(e,t);if(r)return Promise.resolve(r)}switch(n){case"onError":var o=e.value&&e.value.trim(),i=e.target&&e.target.trim();if(!(i&&(/^#restart$/i.test(i)||/^#goto$/i.test(i))))throw new Error("invalid target for onError command");if(/^#goto$/i.test(i)&&!this.state.labels[o])throw new Error("label "+o+" doesn't exist");return Promise.resolve({isFlowLogic:!0});case"gotoLabel":if(!a||!a.length)throw new Error("invalid target for gotoLabel commmand");if(!this.state.labels[a])throw new Error("label "+a+" doesn't exist");return Promise.resolve({isFlowLogic:!0,nextIndex:this.state.labels[a].index});case"else":var s=this.state.tags.find((function(e){return"if"===e.type&&e.fork.index===t}));if(!s)throw new Error("tag not found for this else (at command #"+(t+1)+")");return Promise.resolve({isFlowLogic:!0,nextIndex:s.end.index+1});case"endif":return Promise.resolve({isFlowLogic:!0});case"endWhile":var c=this.state.tags.find((function(e){return"while"===e.type&&e.end.index===t}));if(!c)throw new Error("tag not found for this endWhile (at command #"+(t+1)+")");return Promise.resolve({isFlowLogic:!0,nextIndex:c.start.index});case"comment":case"label":return Promise.resolve({isFlowLogic:!0});case"gotoIf":case"if":case"while":default:return Promise.resolve({isFlowLogic:!1})}}},{key:"postRun",value:function(e,t,n){var a=e.cmd,r=(e.target,e.value);if(this.__customPost){var o=this.__customPost(e,t,n);if(o)return Promise.resolve(o)}switch(a){case"gotoIf":if(!n.condition)return Promise.resolve();if(!r||!r.length)throw new Error("invalid value for value commmand");if(!this.state.labels[r])throw new Error("label "+r+" doesn't exist");return Promise.resolve({nextIndex:this.state.labels[r].index});case"if":var i=n.condition,s=this.state.tags.find((function(e){return"if"===e.type&&e.start.index===t}));if(!s)throw new Error("tag not found for this if (at command #"+(t+1)+")");var c=s.fork&&s.fork.index+1,l=s.end&&s.end.index+1;return Promise.resolve({nextIndex:i?t+1:c||l});case"while":var u=n.condition,d=this.state.tags.find((function(e){return"while"===e.type&&e.start.index===t}));if(!d)throw new Error("tag not found for this while (at command #"+(t+1)+")");if(!d.end||void 0===d.end.index||null===d.end.index)throw new Error("tag doesn't have a valid end index");return Promise.resolve(u?{}:{nextIndex:d.end.index+1});default:return Promise.resolve()}}},{key:"commandIndexByLabel",value:function(e){var t=this.state.labels[e];if(!t)throw new Error("label '"+e+"' doesn't exist");return t.index}},{key:"__setState",value:function(e){this.state=Tr({},this.state,e)}}]),e}(),kr=n(235),Or=n.n(kr);function Ir(e){return new Promise((function(t,n){Or.a.parse(e,(function(e,a){return e?n(e):t(a)}))}))}function Ar(e){return new Promise((function(t,n){Or.a.stringify(e,(function(e,a){return e?n(e):t(a)}))}))}var Nr=n(62),Pr=n(47),jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vr=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Dr=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Lr=function(){function e(){Rr(this,e),this.reset()}return Dr(e,[{key:"reset",value:function(){this.startTime=new Date}},{key:"elapsed",value:function(){return new Date-this.startTime}},{key:"elapsedInSeconds",value:function(){return(this.elapsed()/1e3).toFixed(2)+"s"}}]),e}(),Fr=function(){function e(t){Rr(this,e),this.callback=t}return Dr(e,[{key:"reset",value:function(e){this.cancel(),e&&(this.callback=e),this.timer=null,this.timeout=null,this.startTime=null}},{key:"restart",value:function(e){if(this.timeout){var t=e-(1*new Date-1*this.startTime);if(clearTimeout(this.timer),t<0)return this.callback();this.timeout=e,this.timer=setTimeout(this.callback,t)}else this.timeout=e,this.startTime=new Date,this.timer=setTimeout(this.callback,this.timeout)}},{key:"cancel",value:function(){clearTimeout(this.timer)}}]),e}(),Ur=function(e){var t=e.store,n=e.vars,a=e.getTcPlayer,r=[Kr({store:t,vars:n,getTcPlayer:a}),Br({store:t,vars:n,getTcPlayer:a})];return function(e,t){return r.reduce((function(n,a){return void 0!==n?n:a(e,t)}),void 0)}},Br=function(e){var t=e.store,n=e.vars,a=e.getTcPlayer;return function e(r,o){var i=Object(P.getStorageManager)().getCSVStorage(),s=Object(P.getStorageManager)().getScreenshotStorage(),c=r.cmd,l=r.target,u=r.value,d=r.extra,m={isFlowLogic:!0};switch(Object(te.a)("interpretCsFreeCommands",r),c){case"store":return{byPass:!0,vars:Mr({},u,l)};case"echo":return{byPass:!0,log:jr({info:l},"#shownotification"===u?{options:{notification:!0}}:u?{options:{color:u}}:{})};case"throwError":throw new Error(l);case"pause":var p=parseInt(l);if(!l||!l.length||0===p)return{byPass:!0,control:{type:"pause"}};if(isNaN(p)||p<0)throw new Error("target of pause command must be a positive integer");return Object(I.withCountDown)({timeout:p,interval:1e3,onTick:function(e){var n=e.total,a=e.past;t.dispatch(We({past:a,total:n,type:"pause"}))}}).then((function(){return{byPass:!0}}));case"localStorageExport":var f=/\s*#DeleteAfterExport\s*/i.test(u);if(/^\s*log\s*$/i.test(l)){var g=t.getState().logs.map(Va).join("\n");return v.a.saveAs(new Blob([g]),"kantu_log.txt"),f&&t.dispatch(qe()),m}if(/\.csv$/i.test(l))return i.exists(l).then((function(e){if(!e)throw new Error(l+" doesn't exist");return i.read(l,"Text").then((function(e){return v.a.saveAs(new Blob([e]),l),f&&i.remove(l).then((function(){return t.dispatch(rt())})),m}))}));if(/\.png$/i.test(l))return s.exists(l).then((function(e){if(!e)throw new Error(l+" doesn't exist");return s.read(l,"ArrayBuffer").then((function(e){return v.a.saveAs(new Blob([new Uint8Array(e)]),l),f&&s.remove(l).then((function(){return t.dispatch(ot())})),m}))}));throw new Error(l+" doesn't exist");case"visualVerify":case"visualAssert":case"visualSearch":case"visionFind":if(!("visualSearch"!==c||u&&u.length))throw new Error(c+": Must specify a variable to save the result");var h=-1===["visualVerify","visualAssert"].indexOf(c),b=l.split("@"),y=Vr(b,2),E=y[0],w=y[1],C=w?parseFloat(w):t.getState().config.defaultVisionSearchConfidence,T=n.get("!visualSearchArea"),x=1e3*n.get("!TIMEOUT_WAIT"),S=Object(I.retry)((function(){return A.a.ask("PANEL_CLEAR_VISION_RECTS_ON_PLAYING_PAGE").then((function(){return A.a.ask("PANEL_SEARCH_VISION_ON_PLAYING_PAGE",{visionFileName:E,minSimilarity:C,searchArea:T,storedImageRect:n.get("!storedImageRect"),command:c})})).then((function(e){if(Object(te.a)("regions",e),0===e.length)throw new Error("Image '"+E+"' (conf. = "+C+") not found");var t=e[0];return A.a.ask("PANEL_HIGHLIGHT_RECTS",{scoredRects:e}),Object(I.delay)((function(){return{best:t,byPass:!0,vars:jr({"!imageX":t.left+t.width/2,"!imageY":t.top+t.height/2},h&&u&&u.length?Mr({},u,e.length):{})}}),100)}))}),{timeout:x,shouldRetry:function(e){return t.getState().status===Qt.a.PLAYER&&/Image.*\(conf\. =.*\) not found/.test(e.message)},retryInterval:function(e,t){return.5+.25*e},onFirstFail:function(){A.a.ask("PANEL_TIMEOUT_STATUS",{timeout:x,type:"Vision waiting"})},onFinal:function(){A.a.ask("PANEL_CLEAR_TIMEOUT_STATUS")}});return function(e,t){return Object(P.getStorageManager)().getVisionStorage().exists(e).then((function(n){if(!n)throw new Error(t+": No input image found for file name '"+e+"'")}))}(E,c).then((function(){return S().catch((function(e){if("visualAssert"===c||d&&d.throwError)throw e;return jr({byPass:!0},h&&u&&u.length?{vars:Mr({},u,0)}:{},"visualVerify"===c?{log:{error:e.message}}:{})}))}));case"visionLimitSearchArea":var _=l.trim(),k=Promise.resolve({byPass:!0});if(/^viewport$/.test(_))_="viewport";else if(/^full$/.test(_))_="full";else{if(!/^element:/.test(_))throw new Error("Target of visionLimitSearchArea could only be either 'viewport', 'full' or 'element:...'");k=Promise.resolve({byPass:!1})}return n.set({"!visualSearchArea":_},!0),k;case"bringBrowserToForeground":return A.a.ask("PANEL_BRING_PLAYING_WINDOW_TO_FOREGROUND").then((function(){return{byPass:!0}}));case"resize":if(!/\s*\d+@\d+\s*/.test(l))throw new Error("Syntax for target of resize command is x@y, e.g. 800@600");var O=l.split("@"),N=Vr(O,2),j=N[0],V=N[1],D=parseInt(j,10),M=parseInt(V,10);return Object(te.a)("resize",D,M),A.a.ask("PANEL_RESIZE_PLAY_TAB",{width:D,height:M}).then((function(e){var t=e.actual,n=e.desired;return 0===e.diff.length?{byPass:!0}:{byPass:!0,log:{warning:"Only able to resize it to "+t.width+"@"+t.height+", given "+n.width+"@"+n.height}}}));case"XType":return Object(en.getXUserIO)().sanityCheck().then((function(){return Object(Pr.getNativeXYAPI)().sendText({text:l}).then((function(e){if(!e)throw new Error("Failed to XType '"+l+"'");return{byPass:!0}}))}));case"XMove":case"XClick":var R={XClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.trim().toLowerCase();switch(t){case"":return"#left";case"#left":case"#middle":case"#right":case"#doubleclick":return t;default:throw new Error("XClick: invalid value, '"+e+"'")}},XMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.trim().toLowerCase();switch(t){case"":return"#move";case"#move":case"#up":case"#down":return t;default:throw new Error("XMove: invalid value, '"+e+"'")}}}[c];return Object(en.getXUserIO)().sanityCheck().then((function(){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.trim();if(Object(Nr.b)(t))return{type:"locator",value:{locator:t}};if(/^[dD](\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?)$/.test(t))return{type:"desktop_coordinates",value:{coordinates:t.substr(1).split(/\s*,\s*/)}};if(/^(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?)$/.test(t))return{type:"viewport_coordinates",value:{coordinates:t.split(/\s*,\s*/)}};if(/^.*\.png(@\d\.\d+)?$/.test(t))return{type:"visual_search",value:{query:t}};throw new Error("XClick: invalid target, '"+e+"'")}(l),i=R(u);return function(){switch(o.type){case"locator":return function(e){return Gr({vars:n,store:t,command:e,loopTracker:null,state:a().getState(),preRun:function(e,t,n){return n(e)}})}(jr({},r,{cmd:"locate",target:o.value.locator,value:""})).then((function(e){var t=e.rect;if(!t)throw new Error("no rect data returned");var n=t.x+t.width/2,a=t.y+t.height/2;if(isNaN(n))throw new Error("empty x");if(isNaN(a))throw new Error("empty y");return{type:"viewport",offset:{x:n,y:a}}}));case"visual_search":return e(jr({},r,{cmd:"visualAssert",target:o.value.query,value:""})).then((function(e){var t=e.best;if(!t)throw new Error("no best found from result of verifyAssert triggered by XClick");var n=t.offsetLeft+t.width/2,a=t.offsetTop+t.height/2;if(isNaN(n))throw new Error("empty x");if(isNaN(a))throw new Error("empty y");return{type:"viewport",offset:{x:n,y:a},originalResult:e}}));case"desktop_coordinates":var i=o.value.coordinates;return Promise.resolve({type:"desktop",offset:{x:parseFloat(i[0]),y:parseFloat(i[1])}});case"viewport_coordinates":var s=o.value.coordinates;return Promise.resolve({type:"viewport",offset:{x:parseFloat(s[0]),y:parseFloat(s[1])}})}}().then((function(t){var n=t.type,a=t.offset,r=t.originalResult,o=void 0===r?{}:r;return e({cmd:"bringBrowserToForeground"}).then((function(){return Object(I.delay)((function(){}),300)})).then((function(){var e=Object(Pr.getNativeXYAPI)(),t=function(){switch(i){case"#left":return[Pr.MouseButton.Left,Pr.MouseEventType.Click];case"#middle":return[Pr.MouseButton.Middle,Pr.MouseEventType.Click];case"#right":return[Pr.MouseButton.Right,Pr.MouseEventType.Click];case"#doubleclick":return[Pr.MouseButton.Left,Pr.MouseEventType.DoubleClick];case"#move":return[Pr.MouseButton.Left,Pr.MouseEventType.Move];case"#up":return[Pr.MouseButton.Left,Pr.MouseEventType.Up];case"#down":return[Pr.MouseButton.Left,Pr.MouseEventType.Down];default:throw new Error("Unsupported realValue: "+i)}}(),r=Vr(t,2),s=r[0],l=r[1],u={button:s,x:a.x,y:a.y,type:l};return("desktop"===n?e.sendMouseEvent(u):e.sendViewportMouseEvent(u,{markPage:function(){return A.a.ask("PANEL_TOGGLE_HIGHLIGHT_VIEWPORT",{on:!0}).then((function(){return Object(I.delay)((function(){}),200)}))},unmarkPage:function(){return A.a.ask("PANEL_TOGGLE_HIGHLIGHT_VIEWPORT",{on:!1}).then((function(){return Object(I.delay)((function(){}),200)}))},needCalibration:function(){return A.a.ask("PANEL_XCLICK_NEED_CALIBRATION",{}).catch((function(e){return!0}))}})).then((function(e){if(!e)throw new Error("Failed to "+c+" "+n+" coordiates at ["+a.x+", "+a.y+"]");return jr({},o,{byPass:!0})}))}))}))}));default:return}}},Kr=function(e){var t=e.store,n=e.vars;return function(e,a){var r=Object(P.getStorageManager)().getCSVStorage(),o=e.cmd,i=e.target;e.value;switch(o){case"csvRead":return r.exists(i).then((function(e){if(!e)throw n.set({"!CsvReadStatus":"FILE_NOT_FOUND"},!0),new Error("csv file '"+i+"' does not exist");return r.read(i,"Text").then(Ir).then((function(e){var t=n.get("!CsvReadLineNumber")-1,a=e[t];if(t>=e.length)throw n.set({"!CsvReadStatus":"END_OF_FILE"},!0),new Error("end of csv file reached");n.set({"!CsvReadStatus":"OK","!CsvReadMaxRow":e.length},!0),n.clear(/^!COL\d+$/i),a.forEach((function(e,t){n.set(Mr({},"!COL"+(t+1),e))}))}))})).then((function(){return{isFlowLogic:!0}}));case"csvSave":var s=n.get("!CSVLINE");if(!s||!s.length)throw new Error("No data to save to csv");return Ar([s]).then((function(e){var t=/\.csv$/i.test(i)?i:i+".csv";return r.exists(t).then((function(n){return n?r.read(t,"Text").then((function(n){var a=(n+"\n"+e).replace(/\n+/g,"\n");return r.overwrite(t,new Blob([a]))})):r.write(t,new Blob([e]))}))})).then((function(){n.clear(/^!CSVLINE$/),t.dispatch(rt())})).then((function(){return{isFlowLogic:!0}}));default:return}}},Yr=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=_a({isInvalidInternalVar:function(e){return 0===e.indexOf("!")&&"!TIMEOUT_PAGELOAD"!==e&&"!TIMEOUT_WAIT"!==e&&"!TIMEOUT_MACRO"!==e&&"!TIMEOUT_DOWNLOAD"!==e&&"!REPLAYSPEED"!==e&&"!LOOP"!==e&&"!URL"!==e&&"!MACRONAME"!==e&&"!RUNTIME"!==e&&"!CSVLINE"!==e&&"!CSVLINE"!==e&&"!LASTCOMMANDOK"!==e&&"!ERRORIGNORE"!==e&&"!CSVREADLINENUMBER"!==e&&"!CSVREADSTATUS"!==e&&"!CSVREADMAXROW"!==e&&"!CLIPBOARD"!==e&&"!STATUSOK"!==e&&"!WAITFORVISIBLE"!==e&&"!IMAGEX"!==e&&"!IMAGEY"!==e&&"!VISUALSEARCHAREA"!==e&&"!STOREDIMAGERECT"!==e&&!/^!COL\d+$/i.test(e)},readonly:["!LOOP","!URL","!MACRONAME","!RUNTIME","!LASTCOMMANDOK","!CSVREADSTATUS","!CSVREADMAXROW","!VISUALSEARCHAREA"].concat(ka(Oa)),typeCheck:{"!REPLAYSPEED":function(e){return-1!==["SLOW","MEDIUM","FAST"].indexOf((e||"").toUpperCase())},"!TIMEOUT_PAGELOAD":function(e){return parseInt(e,10)>=0},"!TIMEOUT_WAIT":function(e){return parseInt(e,10)>=0},"!TIMEOUT_MACRO":function(e){return parseInt(e,10)>=0},"!TIMEOUT_DOWNLOAD":function(e){return parseInt(e,10)>=0},"!CSVREADLINENUMBER":function(e){return parseInt(e,10)>=0}},normalize:function(e,t){switch(e.toUpperCase()){case"!ERRORIGNORE":case"!WAITFORVISIBLE":return function(e){return"true"===e||"false"!==e&&e}(t);case"!TIMEOUT_PAGELOAD":case"!TIMEOUT_WAIT":case"!TIMEOUT_MACRO":case"!TIMEOUT_DOWNLOAD":return parseFloat(t);default:return t}}},t),r=n,o=new Sa({process:function(e,t,n){return e(t)}}),i=function(){return o.fire("change",{vars:_a({},r)})},s={reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.keepGlobal){var t=Object.keys(r).reduce((function(e,t){return/^global/i.test(t)&&(e[t]=r[t]),e}),{});r=t}else r={};i()},render:function(e,t){var n=function(e){var t=(e||"").toUpperCase();if(t in r)return r[t];throw/^!/.test(t)?new Error('Internal variable "'+t+'" not supported'):new Error('variable "'+t+'" is not defined')},a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e[1]},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};return e.replace(t,(function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=(a(t)||"").toUpperCase();return Ia(i)?t[0]:r(n(i))}))},o=new RegExp("\\$\\{(!?\\w+)\\}","gi"),i=new RegExp("storedVars\\[('|\")(!?\\w+)\\1\\]","gi"),s=a(e,o);return t&&t.withHashNotation&&(s=a(s,i,(function(e){return e[2]}),(function(e){return JSON.stringify(e)}))),s},get:function(e){return r[e.toUpperCase()]},set:function(e,t){Object.keys(e).forEach((function(n){var o=n.trim();if(0!==o.length){Na(o);var i=o.toUpperCase();if(0!==i.length){if(/^!CSVLINE$/i.test(i)){var c=s.get("!CSVLINE");return void 0===c?c=[]:Array.isArray(c)||(c=[c]),c.push(e[n]),void(r["!CSVLINE"]=c)}if(!t&&-1!==a.readonly.indexOf(i))throw new Error("Cannot write to readony variable '"+n+"'");if(a.isInvalidInternalVar(i))throw new Error("Not allowed to write to '"+n+"'");if(a.typeCheck[i]&&!a.typeCheck[i](e[n]))throw new Error("Value '"+e[n]+"' not supported for variable \""+i+'"');r[i]=a.normalize(n,e[n])}}})),i()},clear:function(e){Object.keys(r).forEach((function(t){e.test(t)&&delete r[t]})),i()},isReadOnly:function(e){var t=e&&e.toUpperCase?e.toUpperCase():"";return-1!==a.readonly.indexOf(t)},dump:function(){return _a({},r)},onChange:function(e){return o.add("change",e),function(){return o.remove("change",e)}}};return Aa[e]=s,s}(),n=new _r({run:Ur({vars:t,store:e,getTcPlayer:function(){return a}})}),a=$r({store:e,vars:t,interpreter:n});zr({store:e,tcPlayer:a})},Gr=function(e){var t=e.command,n=e.state,a=e.store,r=e.vars,o=e.loopTracker,i=e.preRun,s=/!clipboard/i.test(t.target+";"+t.value)?A.a.ask("GET_CLIPBOARD").then((function(e){return{useClipboard:!0,clipboard:e}})):Promise.resolve({useClipboard:!1});if(nn.a.isFirefox())switch(t.cmd){case"onDownload":a.dispatch(He("warning","onDownload - changing file names not supported by Firefox extension api yet"))}return s.then((function(e){var a=e.useClipboard,s=e.clipboard,c=void 0===s?"":s;return a&&r.set({"!CLIPBOARD":c}),r.set({"!LOOP":n.loopsCursor,"!RUNTIME":o?o.elapsedInSeconds():0},!0),"open"===t.cmd&&(t=jr({},t,{href:n.startUrl})),t.target&&/^#efp$/i.test(t.target.trim())&&(t.target="#elementfrompoint (${!imageX}, ${!imageY})"),"comment"!==t.cmd&&["target","value"].forEach((function(e){if(void 0!==t[e]){var n="storeEval"===t.cmd&&"target"===e||"gotoIf"===t.cmd&&"target"===e||"if"===t.cmd&&"target"===e||"while"===t.cmd&&"target"===e?{withHashNotation:!0}:{};t=jr({},t,Mr({},e,r.render(function(e,t,n){return-1!==["storeEval","gotoIf","if","while"].indexOf(t.cmd)&&"target"===n?e:[[/\\n/g,"\n"],[/\\t/g,"\t"]].reduce((function(e,t){var n=Vr(t,2),a=n[0],r=n[1];return e.replace(a,r)}),e)}("type"===t.cmd?t[e]:t[e].trim(),t,e),n)))}})),t=Object(I.updateIn)(["extra"],(function(e){return jr({},e||{},{timeoutPageLoad:r.get("!TIMEOUT_PAGELOAD"),timeoutElement:r.get("!TIMEOUT_WAIT"),timeoutDownload:r.get("!TIMEOUT_DOWNLOAD"),lastCommandOk:r.get("!LASTCOMMANDOK"),errorIgnore:!!r.get("!ERRORIGNORE"),waitForVisible:!!r.get("!WAITFORVISIBLE")})}),t),i(t,n,(function(e){var t,n="pause"===e.cmd?-1:null;return t=function(){return A.a.ask("PANEL_RUN_COMMAND",{command:e},n)},Object(I.retry)((function(){var e=function(){(new Date).getTime();var e=!1,t=null,n=function n(){return Object(te.a)("start to send heart beat to background"),e?Promise.resolve():A.a.ask("PANEL_HEART_BEAT",{},300).then((function(e){if(-1===e)return new Promise((function(){}));if(e===t)throw new Error("lost background heart beat when running command");return t=e,Object(I.delay)((function(){}),3e3).then(n)}),(function(e){throw te.a.error("lost background heart beart!!",e.stack),new Error("lost background heart beat when running command")}))};return n.stop=function(){Object(te.a)("stopping background heart beat"),e=!0},n}();return Promise.race([t().then((function(t){return e.stop(),t})).catch((function(t){throw e.stop(),t})),e()])}),{timeout:999999,shouldRetry:function(e,t){return e&&e.message&&-1!==e.message.indexOf("lost background heart beat when running command")&&t<10}})()}))}))},$r=function(e){var t=e.store,n=e.vars,a=e.interpreter,r=new Lr,i=new Lr,s=new Fr((function(){return c.stopWithError(new Error("macro timeout "+n.get("!TIMEOUT_MACRO")+"s (change the value in the settings if needed)"))})),c=q({prepare:function(e){return n.reset({keepGlobal:!0}),n.set(e.public.scope||{},!0),n.set({"!StatusOK":!0,"!WaitForVisible":!1,"!IMAGEX":0,"!IMAGEY":0}),r.reset(),i.reset(),a.reset(),a.preprocess(e.resources),A.a.ask("PANEL_START_PLAYING",{url:e.startUrl,shouldNotActivateTab:!0})},run:function(e,r){return Gr({command:e,state:r,store:t,vars:n,loopTracker:i,preRun:function(e,t,n){return a.run(e,t.nextIndex).then((function(t){var a=t.byPass,r=t.isFlowLogic,o=t.nextIndex;t.resetVars;return"onError"===e.cmd&&e,a?Promise.resolve(t):r?Promise.resolve({nextIndex:o}):n(e)}))}})},handleResult:function(e,r,o){var i=[];if(e&&e.pageUrl&&n.set({"!URL":e.pageUrl},!0),e&&e.vars){var l=Object(I.objMap)((function(e){if(!e.__undefined__)return e}),e.vars);Object(te.a)("set vars",l);try{n.set(l);var u=Object.keys(e.vars).find((function(e){return/!clipboard/i.test(e)}));u&&i.push(A.a.ask("SET_CLIPBOARD",{value:e.vars[u]}));var d=Object.keys(e.vars).find((function(e){return/!timeout_macro/i.test(e)}));d&&s.restart(1e3*e.vars[d])}catch(e){return Promise.reject(e)}}var m=!1;if(e&&e.log&&(e.log.info&&(t.dispatch(He("echo",e.log.info,e.log.options)),e.log.options&&e.log.options.notification&&A.a.ask("PANEL_NOTIFY_ECHO",{text:e.log.info})),e.log.warning&&t.dispatch(He("warning",e.log.warning,e.log.options)),e.log.error&&(t.dispatch(Xe(o.nextIndex)),t.dispatch(He("error",e.log.error,{ignored:!0})),m=!0)),"echo"!==r.cmd&&n.set({"!LastCommandOK":!m},!0),m&&n.set({"!StatusOK":!1},!0),e&&e.screenshot&&(t.dispatch(He("info","a new screenshot captured")),Object(P.getStorageManager)().getScreenshotStorage().getLink(e.screenshot.name).then((function(t){return jr({},e.screenshot,{url:t})})).then((function(e){t.dispatch(ot())})).catch((function(e){te.a.error("screenshot obj error 1",e),te.a.error("screenshot obj error stack",e.stack)}))),e&&e.control)switch(e.control.type){case"pause":q({name:"testCase"}).pause(),A.a.ask("PANEL_NOTIFY_AUTO_PAUSE",{});break;default:throw new Error("Control type '"+e.control.type+"' not supported yet")}if(/^(fast|medium|slow)$/i.test(n.get("!REPLAYSPEED"))){var p=n.get("!REPLAYSPEED").toUpperCase();c.setPostDelay({FAST:0,MEDIUM:300,SLOW:2e3}[p])}return e&&void 0!==e.nextIndex?Promise.all(i).then((function(){return e.nextIndex})):Promise.all(i).then((function(){return a.postRun(r,o.nextIndex,e)})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.nextIndex}))}},{preDelay:0});return c.on("BREAKPOINT",(function(){A.a.ask("PANEL_NOTIFY_BREAKPOINT",{})})),c.on("LOOP_START",(function(e){var t=e.loopsCursor;n.set({"!CsvReadLineNumber":t,"!visualSearchArea":"viewport"},!0),i.reset(),s.reset(),s.restart(1e3*n.get("!TIMEOUT_MACRO")),null})),c.on("LOOP_RESTART",(function(e){var n=e.currentLoop;e.loopsCursor;A.a.ask("PANEL_STOP_PLAYING",{}),A.a.ask("PANEL_START_PLAYING",{shouldNotActivateTab:!0}),t.dispatch(He("status","Current loop: "+n))})),c.on("START",(function(e){var n=e.title;e.loopsCursor;Object(te.a)("START"),t.dispatch(he()),t.dispatch(ze({status:Qt.f.PLAYING,nextCommandIndex:null,errorCommandIndices:[],doneCommandIndices:[]})),t.dispatch(He("status","Playing macro "+n))})),c.on("PAUSED",(function(){Object(te.a)("PAUSED"),t.dispatch(ze({status:Qt.f.PAUSED})),t.dispatch(He("status","Macro paused"))})),c.on("RESUMED",(function(){Object(te.a)("RESUMED"),t.dispatch(ze({status:Qt.f.PLAYING})),t.dispatch(He("status","Macro resumed"))})),c.on("END",(function(e){var n;Object(te.a)("END",e),s.cancel(),A.a.ask("PANEL_STOP_PLAYING",{}),t.dispatch(ve()),t.dispatch(ze({status:Qt.f.STOPPED,stopReason:e.reason,nextCommandIndex:null,timeoutStatus:null}));var a=e.extra&&e.extra.id;switch(e.reason){case c.C.END_REASON.COMPLETE:a&&t.dispatch(nt(a,Qt.h.SUCCESS)),o.a.success("Macro completed running",1.5);break;case c.C.END_REASON.ERROR:a&&t.dispatch(nt(a,Qt.h.ERROR)),o.a.error("Macro encountered some error",1.5)}var i=(Mr(n={},c.C.END_REASON.COMPLETE,"Macro completed"),Mr(n,c.C.END_REASON.ERROR,"Macro failed"),Mr(n,c.C.END_REASON.MANUAL,"Macro was stopped manually"),n);t.dispatch(He("info",i[e.reason]+" (Runtime "+r.elapsedInSeconds()+")")),e.reason!==c.C.END_REASON.COMPLETE&&e.reason!==c.C.END_REASON.ERROR||A.a.ask("PANEL_UPDATE_BADGE",jr({type:"play",blink:5e3,text:e.reason===c.C.END_REASON.COMPLETE?"done":"err"},e.reason===c.C.END_REASON.COMPLETE?{}:{color:"orange"}))})),c.on("TO_PLAY",(function(e){var n=e.index,a=e.currentLoop,r=e.loops,o=e.resource;Object(te.a)("TO_PLAY",n,o),t.dispatch(ze({timeoutStatus:null,nextCommandIndex:n,currentLoop:a,loops:r}));var i=[o.cmd,o.target,o.value],s=[""].concat(i,[""]).join(" | ");t.dispatch(He("reflect","Executing: "+s)),A.a.ask("PANEL_UPDATE_BADGE",{type:"play",text:""+(n+1)})})),c.on("PLAYED_LIST",(function(e){var n=e.indices;Object(te.a)("PLAYED_LIST",n),t.dispatch(ze({doneCommandIndices:n}))})),c.on("ERROR",(function(e){var n=e.errorIndex,a=e.msg,r=e.restart;te.a.error("command index: "+n+", Error: "+a),t.dispatch(Xe(n)),t.dispatch(He("error",a)),r&&t.getState().player.mode===Qt.e.TEST_CASE&&setTimeout((function(){return c.replayLastConfig()}),50)})),c.on("DELAY",(function(e){var n=e.total,a=e.past;t.dispatch(ze({timeoutStatus:{type:"delay",total:n,past:a}}))})),c},zr=function(e){var t=e.store,n=e.tcPlayer,a=new Lr,r=new Lr,o={isPlaying:!1,tsId:null,lastErrMsg:"",testCasePromiseHandlers:null,reports:[],stopReason:null},i=function(e){o=jr({},o,e)},s=q({name:"testSuite",prepare:function(){i({isPlaying:!0,reports:[]})},run:function(e,n){var a=e.id,r=e.loops>1?parseInt(e.loops,10):1,o=t.getState(),s=o.editor.testCases.find((function(e){return e.id===a})),c=s&&s.data.commands.find((function(e){return"open"===e.cmd.toLowerCase()}));if(!s)throw new Error("macro does not exist");return t.dispatch(Le(s.id)),t.dispatch(at({title:s.name,extra:{id:s.id,name:s.name,shouldNotActivateTab:!0},mode:1===r?X.C.MODE.STRAIGHT:X.C.MODE.LOOP,loopsStart:1,loopsEnd:r,startIndex:0,startUrl:c?c.target:null,resources:s.data.commands,postDelay:1e3*o.config.playCommandInterval})),new Promise((function(e,t){i({testCasePromiseHandlers:{resolve:e,reject:t}})}))},handleResult:function(e,t,n){return Promise.resolve(void 0)}},{preDelay:0});return s.on("START",(function(e){var n=e.title,r=e.extra;Object(te.a)("START SUITE"),a.reset(),i({tsId:r.id,isPlaying:!0,stopReason:null}),t.dispatch(He("status","Playing test suite "+n)),t.dispatch(mt(Qt.e.TEST_SUITE)),t.dispatch(ut(r.id,(function(e){return jr({},e,{playStatus:{isPlaying:!0,currentIndex:-1,errorIndices:[],doneIndices:[]}})})))})),s.on("PAUSED",(function(e){e.extra;Object(te.a)("PAUSED SUITE"),t.dispatch(He("status","Test suite paused")),n.pause()})),s.on("RESUMED",(function(e){e.extra;Object(te.a)("RESUMED SUIITE"),t.dispatch(He("status","Test suite resumed")),n.resume()})),s.on("TO_PLAY",(function(e){var n=e.index,a=e.extra;r.reset(),i({lastErrMsg:"",tcIndex:n}),t.dispatch(ut(a.id,(function(e){return jr({},e,{playStatus:jr({},e.playStatus,{currentIndex:n})})})))})),s.on("PLAYED_LIST",(function(e){var n=e.indices,a=e.extra;t.dispatch(ut(a.id,(function(e){return jr({},e,{playStatus:jr({},e.playStatus,{doneIndices:n})})})))})),s.on("END",(function(e){var r=e.reason,s=e.extra,c=e.opts;o.isPlaying&&(i({isPlaying:!1}),t.dispatch(mt(Qt.e.TEST_CASE)),t.dispatch(ut(s.id,(function(e){return jr({},e,{playStatus:jr({},e.playStatus,{isPlaying:!1,currentIndex:-1})})}))),r!==X.C.END_REASON.MANUAL||c&&c.tcPlayerStopped||n.stop(),setTimeout((function(){var e,n=o.reports.length,i=o.reports.filter((function(e){return e.stopReason===X.C.END_REASON.ERROR})).length,c=n-i,l=(Mr(e={},X.C.END_REASON.MANUAL,"Manually stopped"),Mr(e,X.C.END_REASON.COMPLETE,"OK"),Mr(e,X.C.END_REASON.ERROR,"Error"),e),u=l[o.stopReason||r],d=["Test Suite name: "+s.name,"Start Time: "+a.startTime.toString(),"Overall status: "+u+", Runtime: "+a.elapsedInSeconds(),"Macro run: "+n,"Success: "+c,"Failure: "+i,"Macro executed:"];o.reports.forEach((function(e){var t=l[e.stopReason]+(e.stopReason===X.C.END_REASON.ERROR?": "+e.errMsg:"");d.push(e.name+" ("+t+", Runtime: "+e.usedTime+")")})),t.dispatch(He("info",d.join("\n")))}),200))})),n.on("END",(function(e){var n,a=e.reason,c=e.extra;if(t.getState().player.mode===Qt.e.TEST_SUITE)switch(n={id:c.id,name:c.name,errMsg:o.lastErrMsg,stopReason:a,usedTime:r.elapsedInSeconds()},i({reports:o.reports.concat(n)}),a){case X.C.END_REASON.MANUAL:break;case X.C.END_REASON.COMPLETE:o.testCasePromiseHandlers.resolve(!0);break;case X.C.END_REASON.ERROR:t.dispatch(ut(o.tsId,(function(e){return jr({},e,{playStatus:jr({},e.playStatus,{errorIndices:e.playStatus.errorIndices.concat([s.state.nextIndex])})})}))),i({stopReason:X.C.END_REASON.ERROR}),o.testCasePromiseHandlers.resolve(!0)}})),n.on("ERROR",(function(e){var n=e.msg,a=e.restart;i({lastErrMsg:n}),a&&t.getState().player.mode===Qt.e.TEST_SUITE&&setTimeout((function(){return s.replayLastConfig()}),50)})),s},Wr=n(58),Xr=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};var qr=Cr((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr,t=arguments[1];switch(t.type){case O.START_RECORDING_SUCCESS:return dr({},e,{status:Qt.a.RECORDER,recorderStatus:Qt.a.PENDING,player:dr({},e.player,{nextCommandIndex:null,errorCommandIndices:[],doneCommandIndices:[]})});case O.STOP_RECORDING_SUCCESS:return dr({},e,{status:Qt.a.NORMAL,recorderStatus:Qt.g.STOPPED});case O.START_INSPECTING_SUCCESS:return dr({},e,{status:Qt.a.INSPECTOR,inspectorStatus:Qt.c.PENDING});case O.STOP_INSPECTING_SUCCESS:case O.DONE_INSPECTING:return dr({},e,{status:Qt.a.NORMAL,recorderStatus:Qt.c.STOPPED});case O.START_PLAYING:return dr({},e,{status:Qt.a.PLAYER});case O.STOP_PLAYING:return dr({},e,{status:Qt.a.NORMAL});case O.APPEND_COMMAND:return Object(I.compose)(br,gr,Object(I.updateIn)(["editor","editing","commands"],(function(e){return[].concat(mr(e),[t.data.command])})))(e);case O.DUPLICATE_COMMAND:return Object(I.compose)(br,gr,Object(I.setIn)(["editor","editing","meta","selectedIndex"],t.data.index+1),Object(I.updateIn)(["editor","editing","commands"],(function(e){var n=t.data.index,a=e.slice();return a.splice(n+1,0,e[n]),a})),Object(I.updateIn)(["player","breakpointIndices"],(function(e){return hr(e,"add",t.data.index+1)})))(e);case O.INSERT_COMMAND:return Object(I.compose)(br,gr,Object(I.setIn)(["editor","editing","meta","selectedIndex"],t.data.index),Object(I.updateIn)(["editor","editing","commands"],(function(e){var n=t.data,a=n.index,r=n.command,o=e.slice();return o.splice(a,0,r),o})),Object(I.updateIn)(["player","breakpointIndices"],(function(e){return hr(e,"add",t.data.index)})))(e);case O.UPDATE_COMMAND:return Object(I.compose)(br,gr,Object(I.setIn)(["editor","editing","commands",t.data.index],t.data.command))(e);case O.REMOVE_COMMAND:return Object(I.compose)(br,gr,Object(I.updateIn)(["editor","editing","commands"],(function(e){var n=t.data.index,a=e.slice();return a.splice(n,1),a})),Object(I.updateIn)(["player","breakpointIndices"],(function(e){return hr(e,"delete",t.data.index)})))(e);case O.SELECT_COMMAND:return Object(I.compose)(Object(I.setIn)(["editor","editing","meta","selectedIndex"],t.data.forceClick||e.editor.editing.meta.selectedIndex!==t.data.index?t.data.index:-1),e.status===Qt.a.NORMAL?Object(I.updateIn)(["editor","editing","commands"],(function(e){return e.map(D)})):function(e){return e})(e);case O.CUT_COMMAND:var n=t.data.indices.map((function(t){return e.editor.editing.commands[t]}));return Object(I.compose)(br,gr,Object(I.setIn)(["editor","clipboard","commands"],n),Object(I.updateIn)(["editor","editing","commands"],(function(e){return e.slice().filter((function(e,n){return-1===t.data.indices.indexOf(n)}))})),Object(I.updateIn)(["player","breakpointIndices"],(function(e){return hr(e,"delete",t.data.indices)})))(e);case O.COPY_COMMAND:var a=t.data.indices.map((function(t){return e.editor.editing.commands[t]}));return Object(I.setIn)(["editor","clipboard","commands"],a,e);case O.PASTE_COMMAND:var r=e.editor.clipboard.commands;return Object(I.compose)(br,gr,Object(I.updateIn)(["editor","editing","commands"],(function(e){var n=e.slice();return n.splice.apply(n,[t.data.index+1,0].concat(mr(r))),n})),Object(I.updateIn)(["player","breakpointIndices"],(function(e){return hr(e,"add",r.map((function(e){return t.data.index+1})))})))(e);case O.NORMALIZE_COMMANDS:return Object(I.updateIn)(["editor","editing","commands"],(function(e){return e.map(D)}),e);case O.UPDATE_SELECTED_COMMAND:return-1===e.editor.editing.meta.selectedIndex?e:Object(I.compose)(br,gr,Object(I.updateIn)(["editor","editing","commands",e.editor.editing.meta.selectedIndex],(function(e){return dr({},e,t.data)})))(e);case O.SAVE_EDITING_AS_EXISTED:return Object(I.compose)(Object(I.setIn)(["editor","editing","meta","hasUnsaved"],!1),yr)(e);case O.SAVE_EDITING_AS_NEW:return Object(I.compose)(Object(I.updateIn)(["editor","editing","meta"],(function(e){return dr({},e,{hasUnsaved:!1,src:Object(I.pick)(["id","name"],t.data)})})),yr)(e);case O.SET_TEST_CASES:return Object(I.compose)((function(e){var t=e.editor.editing.meta.src;if(!t)return e;var n=e.editor.testCases.find((function(e){return e.id===t.id}));return n?Er({name:n.name,commands:n.data.commands},e):e}),Object(I.setIn)(["editor","testCases"],t.data))(e);case O.SET_TEST_SUITES:return Object(I.setIn)(["editor","testSuites"],t.data,e);case O.UPDATE_TEST_SUITE:var o=t.data,i=o.id,s=o.updated,c=e.editor.testSuites.findIndex((function(e){return e.id===i}));return-1===c?e:Object(I.setIn)(["editor","testSuites",c],s,e);case O.SET_EDITING:return Object(te.a)("REDUCER SET_EDITING",t.data),t.data?Object(I.compose)(br,gr,Object(I.setIn)(["editor","editing"],t.data))(e):e;case O.EDIT_TEST_CASE:var l=e.editor.testCases,u=l.find((function(e){return e.id===t.data}));return u?Object(I.compose)(Object(I.setIn)(["editor","editing"],dr({},u.data,{meta:{selectedIndex:-1,hasUnsaved:!1,src:Object(I.pick)(["id","name"],u)}})),Object(I.updateIn)(["player"],(function(e){return dr({},e,{status:Qt.f.STOPPED,stopReason:null,nextCommandIndex:null,errorCommandIndices:[],doneCommandIndices:[],breakpointIndices:[]})})),vr({name:u.name,commands:u.data.commands}))(e):e;case O.UPDATE_TEST_CASE_STATUS:var d=t.data,m=d.id,p=d.status;if(!m)return e;var f=e.editor.testCases,g=f.findIndex((function(e){return e.id===m}));return-1===g?e:Object(I.setIn)(["editor","testCases",g,"status"],p,e);case O.RENAME_TEST_CASE:return Object(I.setIn)(["editor","editing","meta","src","name"],t.data,e);case O.REMOVE_TEST_CASE:if(!t.data.isCurrent)return e;var h=e.editor.editing.meta.src.id,v=(e.editor.editing.meta.selectedIndex,e.editor.testCases.filter((function(e){return e.id!==h}))),b=e.editor.testCases.findIndex((function(e){return e.id===h})),y=void 0;if(0===v.length)y=dr({},pr);else{var E=-1===b?0:b<v.length?b:b-1,w=v[E];y=dr({},w.data,{meta:{src:Object(I.pick)(["id","name"],w),hasUnsaved:!1,selectedIndex:E}})}return Object(I.setIn)(["editor","editing"],y,e);case O.EDIT_NEW_TEST_CASE:return Object(I.compose)(Object(I.setIn)(["editor","editing"],dr({},pr)),Object(I.updateIn)(["player"],(function(e){return dr({},e,{nextCommandIndex:null,errorCommandIndices:[],doneCommandIndices:[],breakpointIndices:[]})})),vr({name:"Untitled",commands:[]}))(e);case O.SET_PLAYER_STATE:return Object(I.updateIn)(["player"],(function(e){return dr({},e,t.data)}),e);case O.PLAYER_ADD_ERROR_COMMAND_INDEX:return Object(I.updateIn)(["player","errorCommandIndices"],(function(e){return[].concat(mr(e),[t.data])}),e);case O.ADD_BREAKPOINT:return Object(I.updateIn)(["player","breakpointIndices"],(function(e){return-1===e.indexOf(t.data)?[].concat(mr(e),[t.data]):e}),e);case O.REMOVE_BREAKPOINT:return Object(I.updateIn)(["player","breakpointIndices"],(function(e){return e.filter((function(e){return e!==t.data}))}),e);case O.ADD_LOGS:return dr({},e,{logs:[].concat(mr(e.logs),mr(t.data)).slice(-500)});case O.CLEAR_LOGS:return dr({},e,{logs:[]});case O.ADD_SCREENSHOT:return dr({},e,{screenshots:[].concat(mr(e.screenshots),[t.data])});case O.CLEAR_SCREENSHOTS:return dr({},e,{screenshots:[]});case O.UPDATE_CONFIG:return Object(I.updateIn)(["config"],(function(e){return dr({},e,t.data)}),e);case O.SET_CSV_LIST:return dr({},e,{csvs:t.data});case O.SET_SCREENSHOT_LIST:return dr({},e,{screenshots:t.data});case O.SET_VISION_LIST:return dr({},e,{visions:t.data});case O.SET_VARIABLE_LIST:return dr({},e,{variables:t.data});case O.UPDATE_UI:return Object(I.updateIn)(["ui"],(function(e){return dr({},e,t.data)}),e);case O.SET_EDITOR_ACTIVE_TAB:return Object(I.setIn)(["editor","activeTab"],t.data,e);case O.SET_SOURCE_ERROR:return Object(I.setIn)(["editor","editingSource","error"],t.data,e);case O.SET_SOURCE_CURRENT:return Object(I.setIn)(["editor","editingSource","current"],t.data,e);default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Jr=document.getElementById("root"),Qr={},Zr=function(){var e=Object(P.getStorageManager)().getCurrentStrategyType(),t=Object(P.getStorageManager)().getMacroStorage(),n=Object(P.getStorageManager)().getTestSuiteStorage(),a=function(e){e.filter((function(e){return"__Untitled__"!==e.fileName})).forEach((function(e){var t=e.fullFilePath;(!Qr[t]||1*new Date-Qr[t]>2e3)&&(Qr[t]=1*new Date,qr.dispatch(He("warning",e.error.message)))}))},r=function(){return t.readAll("Text",a).then((function(e){return e.map((function(e){return e.content}))})).then((function(e){Object(te.a)("restoreTestCases - macroStorage - tcs",e),qr.dispatch(De(e.map(L)))}))},o=function(){return n.readAll("Text",a).then((function(e){return e.map((function(e){return e.content}))})).then((function(e){e.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n>a?1:n===a?t.updateTime-e.updateTime:void 0})),Object(te.a)("restoreTestSuites - suiteStorage - tss",e),qr.dispatch(st(e))}))};[Wr.FlatStorageEvent.ListChanged,Wr.FlatStorageEvent.FilesChanged].forEach((function(n){t.off(n),t.on(n,(function(){e===Object(P.getStorageManager)().getCurrentStrategyType()&&(Object(te.a)("macroStorage - eventName",n),setTimeout(r,50))}))})),[Wr.FlatStorageEvent.ListChanged,Wr.FlatStorageEvent.FilesChanged].forEach((function(t){n.off(t),n.on(t,(function(){e===Object(P.getStorageManager)().getCurrentStrategyType()&&(Object(te.a)("suiteStorage - eventName",t),setTimeout(o,50))}))})),r(),o()},eo=function(){return N.default.get("config").then((function(e){var t=Hr({showSidebar:!0,playScrollElementsIntoView:!0,playHighlightElements:!0,playCommandInterval:.3,recordNotification:!0,recordClickType:"click",logFilter:"All",onErrorInLoop:"continue_next_loop",defaultVisionSearchConfidence:.8,allowRunFromBookmark:!0,allowRunFromFileSchema:!0,allowRunFromHttpSchema:!1,timeoutPageLoad:60,timeoutElement:10,timeoutMacro:900,timeoutDownload:60,lastBackupActionTime:1*new Date,enableAutoBackup:!0,autoBackupInterval:7,autoBackupTestCases:!0,autoBackupTestSuites:!0,autoBackupScreenshots:!0,autoBackupCSVFiles:!0,autoBackupVisionImages:!0,shouldEncryptPassword:"no",masterPassword:"",showCommonInternalVariables:!0,showAdvancedInternalVariables:!1,storageMode:P.StorageStrategyType.Browser},e);return qr.dispatch(tt(t)),t}))},to=function(){Object(P.getStorageManager)().getCSVStorage(),qr.dispatch(rt())},no=function(){Object(P.getStorageManager)().getScreenshotStorage(),qr.dispatch(ot())},ao=function(){Object(P.getStorageManager)().getVisionStorage(),qr.dispatch(it())},ro=function(e){var t=e.options;return function(e,n){if(t.savelog){var a=qr.getState().logs,r=a.find((function(e){return"error"===e.type&&!(e.options&&e.options.ignored)})),o=e||r&&{message:r.text},i=o?"Status=Error: "+o.message:"Status=OK",s=a.map(Va);!function(e,t){var n=new Blob([e],{type:"text/plain;charset=utf-8"});v.a.saveAs(n,t)}([i,"###"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s)).join("\n"),decodeURIComponent(t.savelog))}t.close&&setTimeout((function(){A.a.ask("PANEL_CLOSE_ALL_WINDOWS",{})}),1e3),e||n!==X.C.END_REASON.COMPLETE||setTimeout((function(){window.close()}),1e3)}},oo=function(e){if(nn.a.isFirefox())return!0;var t=document.title.replace(/ - .*$/,"");document.title=t+" - (Tab: "+e.title+")"};function io(){Zr(),to(),no(),ao(),setTimeout((function(){qr.dispatch(Me())}),200)}function so(){Zr(),A.a.onAsk((function(e,t){switch(Object(te.a)(e,t),e){case"INSPECT_RESULT":return qr.dispatch(be()),qr.dispatch(Ie({target:t.locatorInfo.target,targetOptions:t.locatorInfo.targetOptions})),!0;case"RECORD_ADD_COMMAND":return Object(te.a)("got add command",e,t),qr.dispatch(ye(t,!0)),!0;case"TIMEOUT_STATUS":return qr.getState().status===Qt.a.PLAYER&&(qr.dispatch(We(t)),!0);case"RUN_TEST_CASE":if(qr.getState().status!==Qt.a.NORMAL)return o.a.error("can only run macros when it is not recording or playing"),!1;var n=t.testCase,a=t.options,r=n.storageMode||P.StorageStrategyType.Browser,i=Object(P.getStorageManager)();return i.isStrategyTypeAvailable(r).catch((function(e){throw o.a.error(e.message),e})).then((function(){return i.setCurrentStrategyType(r),Object(I.delay)((function(){}),1e3)})).then((function(){var e=qr.getState(),t=e.editor.testCases.find((function(e){return e.name===n.name}));if(!t)return o.a.error("no macro found with name '"+n.name+"'"),!1;var r=t.data.commands.find((function(e){return"open"===e.cmd.toLowerCase()}));qr.dispatch(Le(t.id)),qr.dispatch(at({title:n.name,extra:{id:t&&t.id},mode:X.C.MODE.STRAIGHT,startIndex:0,startUrl:r?r.target:null,resources:t.data.commands,postDelay:1e3*e.player.playInterval,callback:ro({options:a})})),qr.dispatch(gt({sidebarTab:"macros"}))})),!0;case"RUN_TEST_SUITE":if(qr.getState().status!==Qt.a.NORMAL)return o.a.error("can only run test suites when it is not recording or playing"),!1;var s=t.testSuite,c=t.options,l=s.storageMode||P.StorageStrategyType.Browser,u=Object(P.getStorageManager)();return u.isStrategyTypeAvailable(l).catch((function(e){throw o.a.error(e.message),e})).then((function(){return u.setCurrentStrategyType(l),Object(I.delay)((function(){}),1e3)})).then((function(){var e=qr.getState().editor.testSuites.find((function(e){return e.name===s.name}));if(!e)return o.a.error("no macro found with name '"+s.name+"'"),!1;q({name:"testSuite"}).play({title:e.name,extra:{id:e.id,name:e.name},mode:q().C.MODE.STRAIGHT,startIndex:0,resources:e.cases.map((function(e){return{id:e.testCaseId,loops:e.loops}})),callback:ro({options:c})}),qr.dispatch(gt({sidebarTab:"test_suites"}))})),!0;case"IMPORT_HTML_AND_RUN":var d=t.options,m=void 0;try{m=Object(Z.fromHtml)(t.html)}catch(e){return o.a.error("Failed to parse html",1.5),!1}var p=t.storageMode||P.StorageStrategyType.Browser,f=Object(P.getStorageManager)();return f.isStrategyTypeAvailable(p).catch((function(e){throw o.a.error(e.message),e})).then((function(){return f.setCurrentStrategyType(p),Object(I.delay)((function(){}),1e3)})).then((function(){return qr.dispatch(Ue(m)),Object(I.delay)((function(){var e=qr.getState(),t=e.editor.testCases.find((function(e){return e.name===m.name})),n=t.data.commands.find((function(e){return"open"===e.cmd.toLowerCase()}));return qr.dispatch(Le(t.id)),qr.dispatch(at({title:t.name,extra:{id:t&&t.id},mode:X.C.MODE.STRAIGHT,startIndex:0,startUrl:n?n.target:null,resources:t.data.commands,postDelay:1e3*e.player.playInterval,callback:ro({options:d})})),!0}),1e3).catch((function(e){throw te.a.error(e.stack),e}))}));case"ADD_VISION_IMAGE":var g=t.dataUrl,h=Object(I.randomName)()+"_dpi_"+Object(I.getScreenDpi)()+".png";return Object(P.getStorageManager)().getVisionStorage().write(h,Object(I.dataURItoBlob)(g)).then(ao).catch((function(e){return te.a.error(e.stack)})),{fileName:h};case"RESTORE_SCREENSHOTS":return no(),!0;case"UPDATE_ACTIVE_TAB":return oo(t),!0;case"ADD_LOG":return!!t&&(t.info&&qr.dispatch(He("info",t.info,t.options)),t.warning&&qr.dispatch(He("warning",t.warning)),t.error&&qr.dispatch(He("error",t.error)),!0)}})),window.addEventListener("beforeunload",(function(){A.a.ask("PANEL_STOP_RECORDING",{}),A.a.ask("PANEL_STOP_PLAYING",{})})),window.addEventListener("resize",(function(){var e,t,n,a={width:window.outerWidth,height:window.outerHeight},r=qr.getState();qr.dispatch(tt({size:Hr({},r.config.size,(e={},t=r.config.showSidebar?"with_sidebar":"standard",n=a,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))}))})),setTimeout((function(){Pa().onChange((function(e){var t=e.vars,n=Object.keys(t).map((function(e){return{key:e,value:t[e]}}));qr.dispatch(ft(n))}))}),0),Object(P.getStorageManager)().on(P.StorageManagerEvent.StrategyTypeChanged,(function(e){io()})),Object(P.getStorageManager)().on(P.StorageManagerEvent.RootDirChanged,(function(e){io()})),Object(P.getStorageManager)().on(P.StorageManagerEvent.ForceReload,(function(e){io()})),Yr(qr),N.default.get("editing").then((function(e){var t=e;e.baseUrl&&((t=Hr({},e)).commands=t.commands.map(R(e.baseUrl)),delete t.baseUrl),qr.dispatch(Re(t))})),eo(),to(),no(),ao(),Jt(qr),N.default.get("preinstall_info").then((function(e){switch(function(){if(!e)return"fresh";var t=e.askedVersions;return-1===(void 0===t?[]:t).indexOf(g.a.preinstallVersion)?"new_version_available":"up_to_date"}()){case"fresh":return qr.dispatch(yt());case"new_version_available":return qr.dispatch(gt({newPreinstallVersion:!0}));case"up_to_date":default:return!1}})),A.a.ask("I_AM_PANEL",{}),document.title=document.title+" "+nn.a.runtime.getManifest().version,A.a.ask("PANEL_CURRENT_PLAY_TAB_INFO").then(oo),d.a.render(l.a.createElement(s.a,{locale:f.a},l.a.createElement(C.a,{store:qr},l.a.createElement(m.a,null,l.a.createElement(rr,null)))),Jr)}Promise.all([eo(),Object(Zt.getXFile)().getConfig()]).then((function(e){var t=Xr(e,2),n=t[0];t[1];Object(P.getStorageManager)(n.storageMode,{getMacros:function(){return qr.getState().editor.testCases}}),so()}),so)},71:function(e,t,n){"use strict";var a=n(3),r=n.n(a).a.isFirefox()?"firefox":"chrome";t.a={preinstallVersion:"3.3.1",urlAfterUpgrade:"https://ui.vision/web-automation/"+r+"/whatsnew",urlAfterInstall:"https://ui.vision/web-automation/"+r+"/welcome",urlAfterUninstall:"https://ui.vision/web-automation/"+r+"/why"}},75:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p}));var a=n(60),r=n.n(a),o=n(32),i=n(3),s=n.n(i),c=n(4),l=n(2),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(e){var t=function(t){return t+"_"+e};return{ipcCs:function(e){var n=[];return s.a.runtime.onMessage.addListener((function(e,t,a){return n.forEach((function(n){return n(e,t,a)})),!0})),r()({timeout:-1,checkReady:e,ask:function(e,n,a){s.a.runtime.sendMessage({type:t("CS_ASK_BG"),uid:e,cmd:n,args:a})},onAnswer:function(e){n.push((function(n,a,r){n.type===t("BG_ANSWER_CS")&&e(n.uid,n.err,n.data)}))},onAsk:function(e){n.push((function(n,a,r){n.type===t("BG_ASK_CS")&&e(n.uid,n.cmd,n.args)}))},answer:function(e,n,a){s.a.runtime.sendMessage({type:t("CS_ANSWER_BG"),uid:e,err:n,data:a})},destroy:function(){n=[]}})},ipcBg:function(e){var n=[],a=function(e,t){return e&&"object"===(void 0===e?"undefined":u(e))?(e.sender=t,e):e};return s.a.runtime.onMessage.addListener((function(e,t,a){return n.forEach((function(n){return n(e,t,a)})),!0})),r()({timeout:-1,ask:function(n,a,r){s.a.tabs.sendMessage(e,{type:t("BG_ASK_CS"),uid:n,cmd:a,args:r})},onAnswer:function(e){n.push((function(n,r,o){n.type===t("CS_ANSWER_BG")&&e(n.uid,n.err,a(n.data,r))}))},onAsk:function(e){n.push((function(n,r,o){n.type===t("CS_ASK_BG")&&e(n.uid,n.cmd,a(n.args,r))}))},answer:function(n,a,r){s.a.tabs.sendMessage(e,{type:t("BG_ANSWER_CS"),uid:n,err:a,data:r})},destroy:function(){n=[]}})}}},m=function(){var e=""+Math.floor(1e4*Math.random());if(Object(c.a)("sending Connect..."),s.a.extension.getURL)try{var t=Object(l.retry)((function(){return Object(l.withTimeout)(1e3,(function(){return s.a.runtime.sendMessage({type:"CONNECT",cuid:e}).then((function(t){if(t)return d(e).ipcCs();throw new Error("not done")}))}))}),{shouldRetry:function(){return!0},retryInterval:0,timeout:5e3});return Object(l.mockAPIWith)((function(){return Object(l.withTimeout)(500,(function(){return s.a.runtime.sendMessage({type:"RECONNECT"}).then((function(e){if(Object(c.a)("got existing cuid",e),e)return d(e).ipcCs();throw new Error("failed to reconnect")}))})).catch((function(){return t()})).catch((function(e){throw c.a.error("Failed to create cs ipc"),e}))}),{ask:function(){return Promise.reject(new Error("mock ask"))},onAsk:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];c.a.apply(void 0,["mock onAsk"].concat(t))},destroy:function(){}},["ask"])}catch(e){c.a.error(e.stack)}},p=function(e){s.a.runtime.onMessage.addListener((function(t,n,a){switch(t.type){case"CONNECT":t.cuid&&(e(n.tab.id,t.cuid,d(t.cuid).ipcBg(n.tab.id)),a(!0));break;case"RECONNECT":var r=Object(o.a)().getCuid(n.tab.id);r&&Object(o.a)().enable(n.tab.id),a(r||null)}return!0}))}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return d}));var a=function(e){return e.reduce((function(e,t){return e[t]=t,e}),{})},r=a(["NORMAL","INSPECTOR","RECORDER","PLAYER"]),o=a(["PENDING","INSPECTING","STOPPED"]),i=a(["PENDING","RECORDING","STOPPED"]),s=a(["PLAYING","PAUSED","STOPPED"]),c=a(["TEST_CASE","TEST_SUITE"]),l=a(["NORMAL","RECORDING","INSPECTING","PLAYING"]),u=a(["NORMAL","SUCCESS","ERROR"]),d="__lastscreenshot"},88:function(e,t){var n=function(){this.dataByFormat={},this.dropEffect="none",this.effectAllowed="all",this.files=[],this.types=[]};n.prototype.clearData=function(e){var t,n,a;e?(delete this.dataByFormat[e],t=this.types,n=e,(a=t.indexOf(n))>=0&&t.splice(a,1)):(this.dataByFormat={},this.types=[])},n.prototype.getData=function(e){return this.dataByFormat[e]},n.prototype.setData=function(e,t){return this.dataByFormat[e]=t,this.types.indexOf(e)<0&&this.types.push(e),!0},n.prototype.setDragImage=function(){},e.exports=function(){if(window.DataTransfer)try{new window.DataTransfer;return window.DataTransfer}catch(e){}return n}()},93:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var a=n(98),r=n.n(a),o=n(53),i=n.n(o),s=(n(3),n(31)),c=new RegExp("^@_KANTU_@"),l=new RegExp("^__KANTU_ENCRYPTED__"),u=function(){return s.default.get("config").then((function(e){return{shouldEncrypt:"master_password"===e.shouldEncryptPassword,masterPassword:e.masterPassword}}))},d=function(e){return u().then((function(t){var n=t.shouldEncrypt,a=t.masterPassword;return n?"__KANTU_ENCRYPTED__"+function(e,t){var n=r.a.pbkdf2Sync(t,"salt",1,32,"sha512"),a=new i.a.ModeOfOperation.ctr(n);return i.a.utils.hex.fromBytes(a.encrypt(i.a.utils.utf8.toBytes(e)))}("@_KANTU_@"+e,a):e}))},m=function(e){return u().then((function(t){var n=t.shouldEncrypt,a=t.masterPassword;if(!n)return e;var o=function(e,t){var n=r.a.pbkdf2Sync(t,"salt",1,32,"sha512"),a=new i.a.ModeOfOperation.ctr(n);return i.a.utils.utf8.fromBytes(a.decrypt(i.a.utils.hex.toBytes(e)))}(e.replace(l,""),a);if(0!==o.indexOf("@_KANTU_@"))throw new Error("Wrong master password");return o.replace(c,"")})).catch((function(e){throw new Error("password string invalid")}))},p=function(e,t){return t&&"INPUT"===t.tagName.toUpperCase()&&"password"===t.type?d(e):Promise.resolve(e)},f=function(e,t){return l.test(e)&&t&&"INPUT"===t.tagName.toUpperCase()&&"password"===t.type?m(e):Promise.resolve(e)}}});